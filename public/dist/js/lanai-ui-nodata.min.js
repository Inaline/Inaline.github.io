!function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||3<t[0])throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 4");e.fn.showMSg=function(e){}}(jQuery),function(n){"use strict";n.fn.emulateTransitionEnd=function(e){var t=!1,i=this;n(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||n(i).trigger(n.support.transition.end)},e),this},n(function(){n.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return{end:t[i]};return!1}(),n.support.transition&&(n.event.special.bsTransitionEnd={bindType:n.support.transition.end,delegateType:n.support.transition.end,handle:function(e){if(n(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(o){"use strict";var t='[data-dismiss="alert"]',s=function(e){o(e).on("click",t,this.close)};s.VERSION="3.3.7",s.TRANSITION_DURATION=150,s.prototype.close=function(e){var t=o(this),i=t.attr("data-target");i||(i=(i=t.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,""));var n=o("#"===i?[]:i);function a(){n.detach().trigger("closed.bs.alert").remove()}e&&e.preventDefault(),n.length||(n=t.closest(".alert")),n.trigger(e=o.Event("close.bs.alert")),e.isDefaultPrevented()||(n.removeClass("in"),o.support.transition&&n.hasClass("fade")?n.one("bsTransitionEnd",a).emulateTransitionEnd(s.TRANSITION_DURATION):a())};var e=o.fn.alert;o.fn.alert=function(i){return this.each(function(){var e=o(this),t=e.data("bs.alert");t||e.data("bs.alert",t=new s(this)),"string"==typeof i&&t[i].call(e)})},o.fn.alert.Constructor=s,o.fn.alert.noConflict=function(){return o.fn.alert=e,this},o(document).on("click.bs.alert.data-api",t,s.prototype.close)}(jQuery),function(o){"use strict";var a=function(e,t){this.$element=o(e),this.options=o.extend({},a.DEFAULTS,t),this.isLoading=!1};function i(n){return this.each(function(){var e=o(this),t=e.data("bs.button"),i="object"==typeof n&&n;t||e.data("bs.button",t=new a(this,i)),"toggle"==n?t.toggle():n&&t.setState(n)})}a.VERSION="3.3.7",a.DEFAULTS={loadingText:"loading..."},a.prototype.setState=function(e){var t="disabled",i=this.$element,n=i.is("input")?"val":"html",a=i.data();e+="Text",null==a.resetText&&i.data("resetText",i[n]()),setTimeout(o.proxy(function(){i[n](null==a[e]?this.options[e]:a[e]),"loadingText"==e?(this.isLoading=!0,i.addClass(t).attr(t,t).prop(t,!0)):this.isLoading&&(this.isLoading=!1,i.removeClass(t).removeAttr(t).prop(t,!1))},this),0)},a.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var i=this.$element.find("input");"radio"==i.prop("type")?(i.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==i.prop("type")&&(i.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),i.prop("checked",this.$element.hasClass("active")),e&&i.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var e=o.fn.button;o.fn.button=i,o.fn.button.Constructor=a,o.fn.button.noConflict=function(){return o.fn.button=e,this},o(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(e){var t=o(e.target).closest(".btn");i.call(t,"toggle"),o(e.target).is('input[type="radio"], input[type="checkbox"]')||(e.preventDefault(),t.is("input,button")?t.trigger("focus"):t.find("input:visible,button:visible").first().trigger("focus"))}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(e){o(e.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(e.type))})}(jQuery),function(h){"use strict";var u=function(e,t){this.$element=h(e),this.$indicators=this.$element.find(".carousel-indicators"),this.options=t,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",h.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",h.proxy(this.pause,this)).on("mouseleave.bs.carousel",h.proxy(this.cycle,this))};function s(a){return this.each(function(){var e=h(this),t=e.data("bs.carousel"),i=h.extend({},u.DEFAULTS,e.data(),"object"==typeof a&&a),n="string"==typeof a?a:i.slide;t||e.data("bs.carousel",t=new u(this,i)),"number"==typeof a?t.to(a):n?t[n]():i.interval&&t.pause().cycle()})}u.VERSION="3.3.7",u.TRANSITION_DURATION=600,u.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},u.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},u.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(h.proxy(this.next,this),this.options.interval)),this},u.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},u.prototype.getItemForDirection=function(e,t){var i=this.getItemIndex(t);if(("prev"==e&&0===i||"next"==e&&i==this.$items.length-1)&&!this.options.wrap)return t;var n=(i+("prev"==e?-1:1))%this.$items.length;return this.$items.eq(n)},u.prototype.to=function(e){var t=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));if(!(e>this.$items.length-1||e<0))return this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):i==e?this.pause().cycle():this.slide(i<e?"next":"prev",this.$items.eq(e))},u.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&h.support.transition&&(this.$element.trigger(h.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},u.prototype.next=function(){if(!this.sliding)return this.slide("next")},u.prototype.prev=function(){if(!this.sliding)return this.slide("prev")},u.prototype.slide=function(e,t){var i=this.$element.find(".item.active"),n=t||this.getItemForDirection(e,i),a=this.interval,o="next"==e?"left":"right",s=this;if(n.hasClass("active"))return this.sliding=!1;var r=n[0],l=h.Event("slide.bs.carousel",{relatedTarget:r,direction:o});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=h(this.$indicators.children()[this.getItemIndex(n)]);d&&d.addClass("active")}var c=h.Event("slid.bs.carousel",{relatedTarget:r,direction:o});return h.support.transition&&this.$element.hasClass("slide")?(n.addClass(e),n[0].offsetWidth,i.addClass(o),n.addClass(o),i.one("bsTransitionEnd",function(){n.removeClass([e,o].join(" ")).addClass("active"),i.removeClass(["active",o].join(" ")),s.sliding=!1,setTimeout(function(){s.$element.trigger(c)},0)}).emulateTransitionEnd(u.TRANSITION_DURATION)):(i.removeClass("active"),n.addClass("active"),this.sliding=!1,this.$element.trigger(c)),a&&this.cycle(),this}};var e=h.fn.carousel;h.fn.carousel=s,h.fn.carousel.Constructor=u,h.fn.carousel.noConflict=function(){return h.fn.carousel=e,this};var t=function(e){var t,i=h(this),n=h(i.attr("data-target")||(t=i.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,""));if(n.hasClass("carousel")){var a=h.extend({},n.data(),i.data()),o=i.attr("data-slide-to");o&&(a.interval=!1),s.call(n,a),o&&n.data("bs.carousel").to(o),e.preventDefault()}};h(document).on("click.bs.carousel.data-api","[data-slide]",t).on("click.bs.carousel.data-api","[data-slide-to]",t),h(window).on("load",function(){h('[data-ride="carousel"]').each(function(){var e=h(this);s.call(e,e.data())})})}(jQuery),function(s){"use strict";var r=function(e,t){this.$element=s(e),this.options=s.extend({},r.DEFAULTS,t),this.$trigger=s('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};function a(e){var t,i=e.attr("data-target")||(t=e.attr("href"))&&t.replace(/.*(?=#[^\s]+$)/,"");return s(i)}function l(n){return this.each(function(){var e=s(this),t=e.data("bs.collapse"),i=s.extend({},r.DEFAULTS,e.data(),"object"==typeof n&&n);!t&&i.toggle&&/show|hide/.test(n)&&(i.toggle=!1),t||e.data("bs.collapse",t=new r(this,i)),"string"==typeof n&&t[n]()})}r.VERSION="3.3.7",r.TRANSITION_DURATION=350,r.DEFAULTS={toggle:!0},r.prototype.dimension=function(){return this.$element.hasClass("width")?"width":"height"},r.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var e,t=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(t&&t.length&&(e=t.data("bs.collapse"))&&e.transitioning)){var i=s.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){t&&t.length&&(l.call(t,"hide"),e||t.data("bs.collapse",null));var n=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[n](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[n](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!s.support.transition)return a.call(this);var o=s.camelCase(["scroll",n].join("-"));this.$element.one("bsTransitionEnd",s.proxy(a,this)).emulateTransitionEnd(r.TRANSITION_DURATION)[n](this.$element[0][o])}}}},r.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=s.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var t=this.dimension();this.$element[t](this.$element[t]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};if(!s.support.transition)return i.call(this);this.$element[t](0).one("bsTransitionEnd",s.proxy(i,this)).emulateTransitionEnd(r.TRANSITION_DURATION)}}},r.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},r.prototype.getParent=function(){return s(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(s.proxy(function(e,t){var i=s(t);this.addAriaAndCollapsedClass(a(i),i)},this)).end()},r.prototype.addAriaAndCollapsedClass=function(e,t){var i=e.hasClass("in");e.attr("aria-expanded",i),t.toggleClass("collapsed",!i).attr("aria-expanded",i)};var e=s.fn.collapse;s.fn.collapse=l,s.fn.collapse.Constructor=r,s.fn.collapse.noConflict=function(){return s.fn.collapse=e,this},s(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(e){var t=s(this);t.attr("data-target")||e.preventDefault();var i=a(t),n=i.data("bs.collapse")?"toggle":t.data();l.call(i,n)})}(jQuery),function(s){"use strict";var r='[data-toggle="dropdown"]',n=function(e){s(e).on("click.bs.dropdown",this.toggle)};function l(e){var t=e.attr("data-target");t||(t=(t=e.attr("href"))&&/#[A-Za-z]/.test(t)&&t.replace(/.*(?=#[^\s]*$)/,""));var i=t&&s(t);return i&&i.length?i:e.parent()}function o(n){n&&3===n.which||(s(".dropdown-backdrop").remove(),s(r).each(function(){var e=s(this),t=l(e),i={relatedTarget:this};t.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&s.contains(t[0],n.target)||(t.trigger(n=s.Event("hide.bs.dropdown",i)),n.isDefaultPrevented()||(e.attr("aria-expanded","false"),t.removeClass("open").trigger(s.Event("hidden.bs.dropdown",i)))))}))}n.VERSION="3.3.7",n.prototype.toggle=function(e){var t=s(this);if(!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(o(),!n){"ontouchstart"in document.documentElement&&!i.closest(".navbar-nav").length&&s(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(s(this)).on("click",o);var a={relatedTarget:this};if(i.trigger(e=s.Event("show.bs.dropdown",a)),e.isDefaultPrevented())return;t.trigger("focus").attr("aria-expanded","true"),i.toggleClass("open").trigger(s.Event("shown.bs.dropdown",a))}return!1}},n.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var t=s(this);if(e.preventDefault(),e.stopPropagation(),!t.is(".disabled, :disabled")){var i=l(t),n=i.hasClass("open");if(!n&&27!=e.which||n&&27==e.which)return 27==e.which&&i.find(r).trigger("focus"),t.trigger("click");var a=i.find(".dropdown-menu li:not(.disabled):visible a");if(a.length){var o=a.index(e.target);38==e.which&&0<o&&o--,40==e.which&&o<a.length-1&&o++,~o||(o=0),a.eq(o).trigger("focus")}}}};var e=s.fn.dropdown;s.fn.dropdown=function(i){return this.each(function(){var e=s(this),t=e.data("bs.dropdown");t||e.data("bs.dropdown",t=new n(this)),"string"==typeof i&&t[i].call(e)})},s.fn.dropdown.Constructor=n,s.fn.dropdown.noConflict=function(){return s.fn.dropdown=e,this},s(document).on("click.bs.dropdown.data-api",o).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,n.prototype.toggle).on("keydown.bs.dropdown.data-api",r,n.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",n.prototype.keydown)}(jQuery),function(o){"use strict";var s=function(e,t){this.options=t,this.$body=o(document.body),this.$element=o(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,o.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function r(n,a){return this.each(function(){var e=o(this),t=e.data("bs.modal"),i=o.extend({},s.DEFAULTS,e.data(),"object"==typeof n&&n);t||e.data("bs.modal",t=new s(this,i)),"string"==typeof n?t[n](a):i.show&&t.show(a)})}s.VERSION="3.3.7",s.TRANSITION_DURATION=300,s.BACKDROP_TRANSITION_DURATION=150,s.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},s.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},s.prototype.show=function(i){var n=this,e=o.Event("show.bs.modal",{relatedTarget:i});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',o.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){n.$element.one("mouseup.dismiss.bs.modal",function(e){o(e.target).is(n.$element)&&(n.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=o.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),n.adjustDialog(),e&&n.$element[0].offsetWidth,n.$element.addClass("in"),n.enforceFocus();var t=o.Event("shown.bs.modal",{relatedTarget:i});e?n.$dialog.one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(s.TRANSITION_DURATION):n.$element.trigger("focus").trigger(t)}))},s.prototype.hide=function(e){e&&e.preventDefault(),e=o.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),o(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),o.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",o.proxy(this.hideModal,this)).emulateTransitionEnd(s.TRANSITION_DURATION):this.hideModal())},s.prototype.enforceFocus=function(){o(document).off("focusin.bs.modal").on("focusin.bs.modal",o.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},s.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",o.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},s.prototype.resize=function(){this.isShown?o(window).on("resize.bs.modal",o.proxy(this.handleUpdate,this)):o(window).off("resize.bs.modal")},s.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},s.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},s.prototype.backdrop=function(e){var t=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var n=o.support.transition&&i;if(this.$backdrop=o(document.createElement("div")).addClass("modal-backdrop "+i).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",o.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),n&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;n?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){t.removeBackdrop(),e&&e()};o.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(s.BACKDROP_TRANSITION_DURATION):a()}else e&&e()},s.prototype.handleUpdate=function(){this.adjustDialog()},s.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},s.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},s.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},s.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},s.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},s.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var e=o.fn.modal;o.fn.modal=r,o.fn.modal.Constructor=s,o.fn.modal.noConflict=function(){return o.fn.modal=e,this},o(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=o(this),i=t.attr("href"),n=o(t.attr("data-target")||i&&i.replace(/.*(?=#[^\s]+$)/,"")),a=n.data("bs.modal")?"toggle":o.extend({remote:!/#/.test(i)&&i},n.data(),t.data());t.is("a")&&e.preventDefault(),n.one("show.bs.modal",function(e){e.isDefaultPrevented()||n.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),r.call(n,a,this)})}(jQuery),function(g){"use strict";var m=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};m.VERSION="3.3.7",m.TRANSITION_DURATION=150,m.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},m.prototype.init=function(e,t,i){if(this.enabled=!0,this.type=e,this.$element=g(t),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&g(g.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var n=this.options.trigger.split(" "),a=n.length;a--;){var o=n[a];if("click"==o)this.$element.on("click."+this.type,this.options.selector,g.proxy(this.toggle,this));else if("manual"!=o){var s="hover"==o?"mouseenter":"focusin",r="hover"==o?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,g.proxy(this.enter,this)),this.$element.on(r+"."+this.type,this.options.selector,g.proxy(this.leave,this))}}this.options.selector?this._options=g.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},m.prototype.getDefaults=function(){return m.DEFAULTS},m.prototype.getOptions=function(e){return(e=g.extend({},this.getDefaults(),this.$element.data(),e)).delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},m.prototype.getDelegateOptions=function(){var i={},n=this.getDefaults();return this._options&&g.each(this._options,function(e,t){n[e]!=t&&(i[e]=t)}),i},m.prototype.enter=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusin"==e.type?"focus":"hover"]=!0),t.tip().hasClass("in")||"in"==t.hoverState)t.hoverState="in";else{if(clearTimeout(t.timeout),t.hoverState="in",!t.options.delay||!t.options.delay.show)return t.show();t.timeout=setTimeout(function(){"in"==t.hoverState&&t.show()},t.options.delay.show)}},m.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},m.prototype.leave=function(e){var t=e instanceof this.constructor?e:g(e.currentTarget).data("bs."+this.type);if(t||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t)),e instanceof g.Event&&(t.inState["focusout"==e.type?"focus":"hover"]=!1),!t.isInStateTrue()){if(clearTimeout(t.timeout),t.hoverState="out",!t.options.delay||!t.options.delay.hide)return t.hide();t.timeout=setTimeout(function(){"out"==t.hoverState&&t.hide()},t.options.delay.hide)}},m.prototype.show=function(){var e=g.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var t=g.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!t)return;var i=this,n=this.tip(),a=this.getUID(this.type);this.setContent(),n.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&n.addClass("fade");var o="function"==typeof this.options.placement?this.options.placement.call(this,n[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,r=s.test(o);r&&(o=o.replace(s,"")||"top"),n.detach().css({top:0,left:0,display:"block"}).addClass(o).data("bs."+this.type,this),this.options.container?n.appendTo(this.options.container):n.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var l=this.getPosition(),d=n[0].offsetWidth,c=n[0].offsetHeight;if(r){var h=o,u=this.getPosition(this.$viewport);o="bottom"==o&&l.bottom+c>u.bottom?"top":"top"==o&&l.top-c<u.top?"bottom":"right"==o&&l.right+d>u.width?"left":"left"==o&&l.left-d<u.left?"right":o,n.removeClass(h).addClass(o)}var p=this.getCalculatedOffset(o,l,d,c);this.applyPlacement(p,o);var f=function(){var e=i.hoverState;i.$element.trigger("shown.bs."+i.type),i.hoverState=null,"out"==e&&i.leave(i)};g.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",f).emulateTransitionEnd(m.TRANSITION_DURATION):f()}},m.prototype.applyPlacement=function(e,t){var i=this.tip(),n=i[0].offsetWidth,a=i[0].offsetHeight,o=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(o)&&(o=0),isNaN(s)&&(s=0),e.top+=o,e.left+=s,g.offset.setOffset(i[0],g.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},e),0),i.addClass("in");var r=i[0].offsetWidth,l=i[0].offsetHeight;"top"==t&&l!=a&&(e.top=e.top+a-l);var d=this.getViewportAdjustedDelta(t,e,r,l);d.left?e.left+=d.left:e.top+=d.top;var c=/top|bottom/.test(t),h=c?2*d.left-n+r:2*d.top-a+l,u=c?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(h,i[0][u],c)},m.prototype.replaceArrow=function(e,t,i){this.arrow().css(i?"left":"top",50*(1-e/t)+"%").css(i?"top":"left","")},m.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},m.prototype.hide=function(e){var t=this,i=g(this.$tip),n=g.Event("hide.bs."+this.type);function a(){"in"!=t.hoverState&&i.detach(),t.$element&&t.$element.removeAttr("aria-describedby").trigger("hidden.bs."+t.type),e&&e()}if(this.$element.trigger(n),!n.isDefaultPrevented())return i.removeClass("in"),g.support.transition&&i.hasClass("fade")?i.one("bsTransitionEnd",a).emulateTransitionEnd(m.TRANSITION_DURATION):a(),this.hoverState=null,this},m.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},m.prototype.hasContent=function(){return this.getTitle()},m.prototype.getPosition=function(e){var t=(e=e||this.$element)[0],i="BODY"==t.tagName,n=t.getBoundingClientRect();null==n.width&&(n=g.extend({},n,{width:n.right-n.left,height:n.bottom-n.top}));var a=window.SVGElement&&t instanceof window.SVGElement,o=i?{top:0,left:0}:a?null:e.offset(),s={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},r=i?{width:g(window).width(),height:g(window).height()}:null;return g.extend({},n,s,r,o)},m.prototype.getCalculatedOffset=function(e,t,i,n){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-i/2}:"top"==e?{top:t.top-n,left:t.left+t.width/2-i/2}:"left"==e?{top:t.top+t.height/2-n/2,left:t.left-i}:{top:t.top+t.height/2-n/2,left:t.left+t.width}},m.prototype.getViewportAdjustedDelta=function(e,t,i,n){var a={top:0,left:0};if(!this.$viewport)return a;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(e)){var r=t.top-o-s.scroll,l=t.top+o-s.scroll+n;r<s.top?a.top=s.top-r:l>s.top+s.height&&(a.top=s.top+s.height-l)}else{var d=t.left-o,c=t.left+o+i;d<s.left?a.left=s.left-d:c>s.right&&(a.left=s.left+s.width-c)}return a},m.prototype.getTitle=function(){var e=this.$element,t=this.options;return e.attr("data-original-title")||("function"==typeof t.title?t.title.call(e[0]):t.title)},m.prototype.getUID=function(e){for(;e+=~~(1e6*Math.random()),document.getElementById(e););return e},m.prototype.tip=function(){if(!this.$tip&&(this.$tip=g(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},m.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},m.prototype.enable=function(){this.enabled=!0},m.prototype.disable=function(){this.enabled=!1},m.prototype.toggleEnabled=function(){this.enabled=!this.enabled},m.prototype.toggle=function(e){var t=this;e&&((t=g(e.currentTarget).data("bs."+this.type))||(t=new this.constructor(e.currentTarget,this.getDelegateOptions()),g(e.currentTarget).data("bs."+this.type,t))),e?(t.inState.click=!t.inState.click,t.isInStateTrue()?t.enter(t):t.leave(t)):t.tip().hasClass("in")?t.leave(t):t.enter(t)},m.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null,e.$element=null})};var e=g.fn.tooltip;g.fn.tooltip=function(n){return this.each(function(){var e=g(this),t=e.data("bs.tooltip"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.tooltip",t=new m(this,i)),"string"==typeof n&&t[n]())})},g.fn.tooltip.Constructor=m,g.fn.tooltip.noConflict=function(){return g.fn.tooltip=e,this}}(jQuery),function(a){"use strict";var o=function(e,t){this.init("popover",e,t)};if(!a.fn.tooltip)throw new Error("Popover requires tooltip.js");o.VERSION="3.3.7",o.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),((o.prototype=a.extend({},a.fn.tooltip.Constructor.prototype)).constructor=o).prototype.getDefaults=function(){return o.DEFAULTS},o.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),i=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof i?"html":"append":"text"](i),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},o.prototype.hasContent=function(){return this.getTitle()||this.getContent()},o.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},o.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var e=a.fn.popover;a.fn.popover=function(n){return this.each(function(){var e=a(this),t=e.data("bs.popover"),i="object"==typeof n&&n;!t&&/destroy|hide/.test(n)||(t||e.data("bs.popover",t=new o(this,i)),"string"==typeof n&&t[n]())})},a.fn.popover.Constructor=o,a.fn.popover.noConflict=function(){return a.fn.popover=e,this}}(jQuery),function(o){"use strict";function a(e,t){this.$body=o(document.body),this.$scrollElement=o(e).is(document.body)?o(window):o(e),this.options=o.extend({},a.DEFAULTS,t),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",o.proxy(this.process,this)),this.refresh(),this.process()}function t(n){return this.each(function(){var e=o(this),t=e.data("bs.scrollspy"),i="object"==typeof n&&n;t||e.data("bs.scrollspy",t=new a(this,i)),"string"==typeof n&&t[n]()})}a.VERSION="3.3.7",a.DEFAULTS={offset:10},a.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},a.prototype.refresh=function(){var e=this,n="offset",a=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),o.isWindow(this.$scrollElement[0])||(n="position",a=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var e=o(this),t=e.data("target")||e.attr("href"),i=/^#./.test(t)&&o(t);return i&&i.length&&i.is(":visible")&&[[i[n]().top+a,t]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){e.offsets.push(this[0]),e.targets.push(this[1])})},a.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),a=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),n<=t)return s!=(e=o[o.length-1])&&this.activate(e);if(s&&t<a[0])return this.activeTarget=null,this.clear();for(e=a.length;e--;)s!=o[e]&&t>=a[e]&&(void 0===a[e+1]||t<a[e+1])&&this.activate(o[e])},a.prototype.activate=function(e){this.activeTarget=e,this.clear();var t=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=o(t).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},a.prototype.clear=function(){o(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var e=o.fn.scrollspy;o.fn.scrollspy=t,o.fn.scrollspy.Constructor=a,o.fn.scrollspy.noConflict=function(){return o.fn.scrollspy=e,this},o(window).on("load.bs.scrollspy.data-api",function(){o('[data-spy="scroll"]').each(function(){var e=o(this);t.call(e,e.data())})})}(jQuery),function(r){"use strict";var s=function(e){this.element=r(e)};function t(i){return this.each(function(){var e=r(this),t=e.data("bs.tab");t||e.data("bs.tab",t=new s(this)),"string"==typeof i&&t[i]()})}s.VERSION="3.3.7",s.TRANSITION_DURATION=150,s.prototype.show=function(){var e=this.element,t=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=(i=e.attr("href"))&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var n=t.find(".active:last a"),a=r.Event("hide.bs.tab",{relatedTarget:e[0]}),o=r.Event("show.bs.tab",{relatedTarget:n[0]});if(n.trigger(a),e.trigger(o),!o.isDefaultPrevented()&&!a.isDefaultPrevented()){var s=r(i);this.activate(e.closest("li"),t),this.activate(s,s.parent(),function(){n.trigger({type:"hidden.bs.tab",relatedTarget:e[0]}),e.trigger({type:"shown.bs.tab",relatedTarget:n[0]})})}}},s.prototype.activate=function(e,t,i){var n=t.find("> .active"),a=i&&r.support.transition&&(n.length&&n.hasClass("fade")||!!t.find("> .fade").length);function o(){n.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),e.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu").length&&e.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),i&&i()}n.length&&a?n.one("bsTransitionEnd",o).emulateTransitionEnd(s.TRANSITION_DURATION):o(),n.removeClass("in")};var e=r.fn.tab;r.fn.tab=t,r.fn.tab.Constructor=s,r.fn.tab.noConflict=function(){return r.fn.tab=e,this};var i=function(e){e.preventDefault(),t.call(r(this),"show")};r(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',i).on("click.bs.tab.data-api",'[data-toggle="pill"]',i)}(jQuery),function(l){"use strict";var d=function(e,t){this.options=l.extend({},d.DEFAULTS,t),this.$target=l(this.options.target).on("scroll.bs.affix.data-api",l.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",l.proxy(this.checkPositionWithEventLoop,this)),this.$element=l(e),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};function i(n){return this.each(function(){var e=l(this),t=e.data("bs.affix"),i="object"==typeof n&&n;t||e.data("bs.affix",t=new d(this,i)),"string"==typeof n&&t[n]()})}d.VERSION="3.3.7",d.RESET="affix affix-top affix-bottom",d.DEFAULTS={offset:0,target:window},d.prototype.getState=function(e,t,i,n){var a=this.$target.scrollTop(),o=this.$element.offset(),s=this.$target.height();if(null!=i&&"top"==this.affixed)return a<i&&"top";if("bottom"==this.affixed)return null!=i?!(a+this.unpin<=o.top)&&"bottom":!(a+s<=e-n)&&"bottom";var r=null==this.affixed,l=r?a:o.top;return null!=i&&a<=i?"top":null!=n&&e-n<=l+(r?s:t)&&"bottom"},d.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(d.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},d.prototype.checkPositionWithEventLoop=function(){setTimeout(l.proxy(this.checkPosition,this),1)},d.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=this.$element.height(),t=this.options.offset,i=t.top,n=t.bottom,a=Math.max(l(document).height(),l(document.body).height());"object"!=typeof t&&(n=i=t),"function"==typeof i&&(i=t.top(this.$element)),"function"==typeof n&&(n=t.bottom(this.$element));var o=this.getState(a,e,i,n);if(this.affixed!=o){null!=this.unpin&&this.$element.css("top","");var s="affix"+(o?"-"+o:""),r=l.Event(s+".bs.affix");if(this.$element.trigger(r),r.isDefaultPrevented())return;this.affixed=o,this.unpin="bottom"==o?this.getPinnedOffset():null,this.$element.removeClass(d.RESET).addClass(s).trigger(s.replace("affix","affixed")+".bs.affix")}"bottom"==o&&this.$element.offset({top:a-e-n})}};var e=l.fn.affix;l.fn.affix=i,l.fn.affix.Constructor=d,l.fn.affix.noConflict=function(){return l.fn.affix=e,this},l(window).on("load",function(){l('[data-spy="affix"]').each(function(){var e=l(this),t=e.data();t.offset=t.offset||{},null!=t.offsetBottom&&(t.offset.bottom=t.offsetBottom),null!=t.offsetTop&&(t.offset.top=t.offsetTop),i.call(e,t)})})}(jQuery),function($){var settings={content:"",close:!0,monitor:"body",iframe:!0,iframeHeight:function(){return $(".content-wrapper").height()-42},target:".menu-tabs",contextmenu:!0,popupspeed:"fast",loadbar:!1,ajax:{async:!0,dataType:"html",type:"get"},local:{refreshLabel:" 刷新此标签",closeThisLabel:" 关闭此标签",closeOtherLabel:" 关闭其他标签",closeLeftLabel:" 关闭左侧标签",closeRightLabel:" 关闭右侧标签",lockLabel:" 锁定当前标签",unlockLabel:" 解锁当前标签",loadBarText:'<div class="loaderbox"><div class="loading-activity"></div> 加载中......</div>',lockedMsg:"已锁定，请先解除锁定!"},callback:function(){}},target;_click=function(e){var t;(t="object"==typeof e.data("addtab")?e.data("addtab"):e.data()).id||t.addtab||(t.id=Math.random().toString(36).substring(3,35),e.data("id",t.id)),$.addtabs.add({target:t.target?t.target:target,id:t.id?t.id:t.addtab,title:t.title?t.title:e.html(),content:settings.content?settings.content:t.content,url:t.url,ajax:!!t.ajax&&t.ajax,nav:t.nav?t.nav:""})},_createMenu=function(e,t,i){return $("<a>",{href:"javascript:void(0);",class:"list-group-item","data-right":e}).append($("<i>",{class:"fa "+t})).append(i)},_pop=function(e,t,i){$("body").find("#popMenu").remove();var n=t.attr("id")?_createMenu("refresh","fa-refresh",settings.local.refreshLabel):"",a=t.attr("id")?_createMenu("remove","fa-remove",settings.local.closeThisLabel):"",o=t.prev("li").attr("id")?_createMenu("remove-left","fa-chevron-left",settings.local.closeLeftLabel):"",s=t.next("li").attr("id")?_createMenu("remove-right","fa-chevron-right",settings.local.closeRightLabel):"",r=t.attr("id")?_createMenu("lock","fa-lock",settings.local.lockLabel):"",l=t.attr("id")?_createMenu("unlock","fa-unlock-alt",settings.local.unlockLabel):"",d=$("<ul>",{"aria-controls":e,class:"rightMenu list-group",id:"popMenu","aria-url":t.attr("aria-url"),"aria-ajax":t.attr("aria-ajax")}).append(n).append(a).append(_createMenu("remove-circle","fa-times-circle-o",settings.local.closeOtherLabel)).append(o).append(s);t.hasClass("locked")?d.append(l):d.append(r),d.css({top:i.pageY,left:i.pageX}),d.appendTo($("body")).fadeIn(settings.popupspeed),$("ul.rightMenu a[data-right=lock]").on("click",function(){$("#tab_"+$(this).parent("ul").attr("aria-controls")).addClass("locked")}),$("ul.rightMenu a[data-right=unlock]").on("click",function(){$("#tab_"+$(this).parent("ul").attr("aria-controls")).removeClass("locked")}),$("ul.rightMenu a[data-right=refresh]").on("click",function(){var e=$(this).parent("ul").attr("aria-controls"),t=$(this).parent("ul").attr("aria-url"),i=$(this).parent("ul").attr("aria-ajax"),n=$(this).parent("ul").attr("aria-nav");$.addtabs.add({id:e,url:t,refresh:!0,ajax:i,nav:n})}),$("ul.rightMenu a[data-right=remove]").on("click",function(){var e=$(this).parent("ul").attr("aria-controls");$.addtabs.close({id:e}),$.addtabs.drop()}),$("ul.rightMenu a[data-right=remove-circle]").on("click",function(){var t=$(this).parent("ul").attr("aria-controls");target.find("li").each(function(){var e=$(this).attr("id");e&&e!="tab_"+t&&$.addtabs.close({id:$(this).children("a").attr("aria-controls")})}),$.addtabs.drop()}),$("ul.rightMenu a[data-right=remove-left]").on("click",function(){var t=$(this).parent("ul").attr("aria-controls");$("#tab_"+t).prevUntil().each(function(){var e=$(this).attr("id");e&&e!="tab_"+t&&$.addtabs.close({id:$(this).children("a").attr("aria-controls")})}),$.addtabs.drop()}),$("ul.rightMenu a[data-right=remove-right]").on("click",function(){var t=$(this).parent("ul").attr("aria-controls");(0<target.find("#tab_"+t).length?$("#tab_"+t):target.find("a[name="+t+"]").parent("li")).nextUntil().each(function(){var e=$(this).attr("id");e&&e!="tab_"+t&&$.addtabs.close({id:$(this).children("a").attr("aria-controls")})}),$.addtabs.drop()}),d.mouseleave(function(){$(this).fadeOut("slow")}),$("body").click(function(){d.fadeOut("slow")})},_listen=function(){var t;$(settings.monitor).on("click","[data-addtab]",function(){_click($(this)),$.addtabs.drop()}),$("body").on("click",".close-tab",function(){var e=$(this).prev("a").attr("aria-controls");$.addtabs.close({id:e}),$.addtabs.drop()}),settings.contextmenu&&$("body").on("contextmenu","li[role=presentation]",function(e){var t=$(this).children("a").attr("aria-controls");return _pop(t,$(this),e),!1}),$("body").on("dragstart.h5s",".nav-tabs li",function(e){t=$(this),e.originalEvent&&e.originalEvent.dataTransfer&&"function"==typeof e.originalEvent.dataTransfer.clearData&&e.originalEvent.dataTransfer.clearData()}).on("dragover.h5s dragenter.h5s drop.h5s",".nav-tabs li",function(e){t!=$(this)&&($(".dragBack").removeClass("dragBack"),$(this).addClass("dragBack"),t.index()<$(this).index()?t.insertAfter($(this)):$(this).insertAfter(t))}).on("dragend.h5s",".nav-tabs li",function(){$(".dragBack").removeClass("dragBack")}),$(window).on("resize",function(){$.addtabs.drop()})},$.addtabs=function(e){$.addtabs.set(e),_listen()},$.addtabs.set=function(){arguments[0]&&("object"==typeof arguments[0]?settings=$.extend(settings,arguments[0]||{}):settings[arguments[0]]=arguments[1]),target="object"==typeof settings.target?settings.target:0<$("body").find(settings.target).length?$(settings.target).first():$("body").find(".nav-tabs").first()},$.addtabs.add=function(e){var t;e.id=e.id?e.id:Math.random().toString(36).substring(3,35),t="object"==typeof e.target?e.target:"string"==typeof e.target?$("body").find(e.target).first():target;var i=e.id,n=t,a=n.next(".tab-content");if(n.find('li[role = "presentation"].active').removeClass("active"),a.find('div[role = "tabpanel"].active').removeClass("active"),n.find("#tab_"+i).length<1){var o=$("<li>",{role:"presentation",id:"tab_"+i,"aria-url":e.url,"aria-ajax":!!e.ajax,"aria-nav":e.nav,class:"nav-tabs-header"}).append($("<a>",{href:"#"+i,"aria-controls":i,role:"tab","data-toggle":"tab",name:i,"data-nav":e.nav}).html(e.title));o.on("dblclick",function(){var e=$(this);$.addtabs.add({id:e.attr("id").substring(4,e.attr("id").length),url:e.attr("aria-url"),refresh:!0,ajax:e.attr("aria-ajax"),nav:e.attr("aria-nav")})}),o.on("click","a",function(e){$('[data-widget="tree"]').data("lte.tree")&&($('[role="customer-navigation"] li.active a').attr("data-nav")&&$('[role="customer-navigation"] li.active a').attr("data-nav")!=$(this).attr("data-nav")&&$('[role="customer-navigation"] li a[data-nav="'+$(this).attr("data-nav")+'"]').trigger("click"),$('[data-widget="tree"]').data("lte.tree").NavClientListeners($('[data-addtab="'+i+'"]'),e))}),settings.close&&o.append($("<i>",{class:"close-tab"}));var s=$("<div>",{class:"tab-pane",id:i,role:"tabpanel",height:settings.iframeHeight()});n.append(o),a.append(s)}else{if(!e.refresh)return $("#tab_"+i).addClass("active"),void $("#"+i).addClass("active");(s=$("#"+i)).html("")}if(settings.loadbar&&s.append($("<div>",{class:"loadbar"}).append($("<div>",{class:"loadbar-overlay"})).append($("<div>",{class:"loadbar-blockPage"}).html(settings.local.loadBarText))),e.content)s.append(e.content);else if(1!=settings.iframe||"false"!=e.ajax&&e.ajax){var r=$.extend(settings.ajax,e.ajax||{});r.url=e.url,r.error=function(e,t){s.html(e.responseText)},r.success=function(e){s.html(e)},$.ajax(r),settings.loadbar&&a.find("#"+i).find(".loadbar").fadeOut("slow").remove()}else{var l=$("<iframe>",{class:"iframeClass",height:settings.iframeHeight(),frameborder:"no",border:"0",src:e.url,allowfullscreen:!0,webkitallowfullscreen:!0,mozallowfullscreen:!0,seamless:"seamless"});settings.loadbar&&l.on("load",function(){a.find("#"+i).find(".loadbar").fadeOut("slow").remove()}),s.append(l)}n.find("#tab_"+i).addClass("active"),a.find("#"+i).addClass("active"),$.addtabs.drop(),settings.callback()},$.addtabs.close=function(opts){eval($("#tab_"+opts.id).hasClass("locked"))?"undefined"!=typeof toastr?toastr.info('"'+$("#tab_"+opts.id+">a").html()+'"'+settings.local.lockedMsg):alert('"'+$("#tab_"+opts.id+">a").html()+'"'+settings.local.lockedMsg):($("#tab_"+opts.id).hasClass("active")&&(0<$("#tab_"+opts.id).parents("li.tabdrop").length&&!$("#tab_"+opts.id).parents("li.tabdrop").hasClass("hide")?($('[data-widget="tree"]').data("lte.tree")&&($('[role="customer-navigation"] li.active a').attr("data-nav")!=$("#tab_"+opts.id).parents(".nav-tabs").find("li").last().children("a:first").attr("data-nav")&&$('[role="customer-navigation"] li a[data-nav="'+$("#tab_"+opts.id).parents(".nav-tabs").find("li").last().children("a:first").attr("data-nav")+'"]').trigger("click"),$('[data-widget="tree"]').data("lte.tree").NavClientListeners($('[data-addtab="'+$("#tab_"+opts.id).parents(".nav-tabs").find("li").last().children("a:first").attr("aria-controls")+'"]'),$.Event("click"))),$("#tab_"+opts.id).parents(".nav-tabs").find("li").last().addClass("active")):($('[data-widget="tree"]').data("lte.tree")&&($('[role="customer-navigation"] li.active a').attr("data-nav")!=$("#tab_"+opts.id).prev("li").children("a:first").attr("data-nav")&&$('[role="customer-navigation"] li a[data-nav="'+$("#tab_"+opts.id).prev("li").children("a:first").attr("data-nav")+'"]').trigger("click"),$('[data-widget="tree"]').data("lte.tree").NavClientListeners($('[data-addtab="'+$("#tab_"+opts.id).prev("li").children("a:first").attr("aria-controls")+'"]'),$.Event("click"))),$("#tab_"+opts.id).prev("li").addClass("active")),$("#"+opts.id).prev().addClass("active")),$("#tab_"+opts.id).remove(),$("#"+opts.id).remove(),$.addtabs.drop(),settings.callback())},$.addtabs.closeself=function(){var e={id:target.find("li.active").children("a:last").attr("aria-controls")};$.addtabs.close(e)},$.addtabs.closeTo=function(e){var t=target.find("li.active").children("a:last").attr("aria-controls");if(0<$("#tab_"+e).length){$("#tab_"+t).remove(),$("#"+t).remove();var i=$($("#tab_"+e)).children("a").attr("aria-controls"),n=$($("#tab_"+e)).attr("aria-url"),a=$($("#tab_"+e)).attr("aria-ajax");$.addtabs.add({id:i,url:n,refresh:!0,ajax:a})}else $.addtabs.close({id:t})},$.addtabs.closeAll=function(e){"string"==typeof e&&(e=$("body").find(e)),$.each(e.find("li[id]"),function(){var e=$(this).children("a").attr("aria-controls");$("#tab_"+e).remove(),$("#"+e).remove()}),e.find('li[role = "presentation"]').first().addClass("active");var t=e.find('li[role = "presentation"]').first().children("a").attr("aria-controls");$("#"+t).addClass("active"),$.addtabs.drop()},$.addtabs.drop=function(){var e=$('[role="tablist"]'),t=$(".tabdrop",e);t&&t.length<=0&&(t=$("<li>",{class:"dropdown pull-right hide tabdrop tab-drop nav-tabs-header"}).append($("<a>",{class:"dropdown-toggle","data-toggle":"dropdown",href:"#"}).append($("<i>",{class:"fa fa-align-justify"})).append($("<b>",{class:"caret"}))).append($("<ul>",{class:"dropdown-menu"}))).prependTo(e),e.parent().is(".tabs-below")&&t.addClass("dropup");var i=e.innerWidth()-95,n=0,a=0,o=e.append(t.find("li")).find(">li").not(".tabdrop"),s=0;o.each(function(){s+=$(this).outerWidth(!0)}),e.innerWidth()<s?(o.each(function(){n+=$(this).outerWidth(!0),(i<n||0<this.offsetTop||0<$(this).position().top)&&(t.find(">ul").append($(this)),a++)}),0<a&&(t.removeClass("hide"),1===t.find(".active").length?t.addClass("active"):t.removeClass("active"))):t.addClass("hide")}}(jQuery),function(_,s){function D(){return new Date(Date.UTC.apply(Date,arguments))}"indexOf"in Array.prototype||(Array.prototype.indexOf=function(e,t){t===s&&(t=0),t<0&&(t+=this.length),t<0&&(t=0);for(var i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1});var b=function(e,o){var t=this;this.element=_(e),this.container=o.container||"body",this.language=o.language||this.element.data("date-language")||"cn",this.language=this.language in I?this.language:this.language.split("-")[0],this.language=this.language in I?this.language:"en",this.isRTL=I[this.language].rtl||!1,this.formatType=o.formatType||this.element.data("format-type")||"standard",this.format=$.parseFormat(o.format||this.element.data("date-format")||I[this.language].format||$.getDefaultFormat(this.formatType,"input"),this.formatType),this.isInline=!1,this.isVisible=!1,this.isInput=this.element.is("input"),this.fontAwesome=o.fontAwesome||this.element.data("font-awesome")||!1,this.bootcssVer=o.bootcssVer||(this.isInput?this.element.is(".form-control")?3:2:this.bootcssVer=this.element.is(".input-group")?3:2),this.component=!!this.element.is(".date")&&(3===this.bootcssVer?this.element.find(".input-group-addon .fa-th, .input-group-addon .fa-clock-o, .input-group-addon .fa-remove, .input-group-addon .fa-calendar, .input-group-addon .fa-calendar, .input-group-addon .fa-clock-o").parent():this.element.find(".add-on .icon-th, .add-on .icon-time, .add-on .icon-calendar, .add-on .fa-calendar, .add-on .fa-clock-o").parent()),this.componentReset=!!this.element.is(".date")&&(3===this.bootcssVer?this.element.find(".input-group-addon .fa-remove, .input-group-addon .fa-times").parent():this.element.find(".add-on .icon-remove, .add-on .fa-times").parent()),this.hasInput=this.component&&this.element.find("input").length,this.component&&0===this.component.length&&(this.component=!1),this.linkField=o.linkField||this.element.data("link-field")||!1,this.linkFormat=$.parseFormat(o.linkFormat||this.element.data("link-format")||$.getDefaultFormat(this.formatType,"link"),this.formatType),this.minuteStep=o.minuteStep||this.element.data("minute-step")||5,this.pickerPosition=o.pickerPosition||this.element.data("picker-position")||"bottom-right",this.showMeridian=o.showMeridian||this.element.data("show-meridian")||!1,this.initialDate=o.initialDate||new Date,this.zIndex=o.zIndex||this.element.data("z-index")||s,this.title=void 0!==o.title&&o.title,this.timezone=o.timezone||function(){var e,t,i,n,a;if((i=(null!=(a=(t=(new Date).toString()).split("(")[1])?a.slice(0,-1):0)||t.split(" "))instanceof Array){n=[];for(var o=0,s=i.length;o<s;o++)(e=null!==(a=i[o].match(/\b[A-Z]+\b/)))&&a[0]&&n.push(e);i=n.pop()}return i}(),this.icons={leftArrow:this.fontAwesome?"fa-arrow-left":3===this.bootcssVer?"glyphicon-arrow-left":"icon-arrow-left",rightArrow:this.fontAwesome?"fa-arrow-right":3===this.bootcssVer?"glyphicon-arrow-right":"icon-arrow-right"},this.icontype=this.fontAwesome?"fa":"glyphicon",this._attachEvents(),this.clickedOutside=function(e){0===_(e.target).closest(".datetimepicker").length&&t.hide()},this.formatViewType="datetime","formatViewType"in o?this.formatViewType=o.formatViewType:"formatViewType"in this.element.data()&&(this.formatViewType=this.element.data("formatViewType")),this.minView=0,"minView"in o?this.minView=o.minView:"minView"in this.element.data()&&(this.minView=this.element.data("min-view")),this.minView=$.convertViewMode(this.minView),this.maxView=$.modes.length-1,"maxView"in o?this.maxView=o.maxView:"maxView"in this.element.data()&&(this.maxView=this.element.data("max-view")),this.maxView=$.convertViewMode(this.maxView),this.wheelViewModeNavigation=!1,"wheelViewModeNavigation"in o?this.wheelViewModeNavigation=o.wheelViewModeNavigation:"wheelViewModeNavigation"in this.element.data()&&(this.wheelViewModeNavigation=this.element.data("view-mode-wheel-navigation")),this.wheelViewModeNavigationInverseDirection=!1,"wheelViewModeNavigationInverseDirection"in o?this.wheelViewModeNavigationInverseDirection=o.wheelViewModeNavigationInverseDirection:"wheelViewModeNavigationInverseDirection"in this.element.data()&&(this.wheelViewModeNavigationInverseDirection=this.element.data("view-mode-wheel-navigation-inverse-dir")),this.wheelViewModeNavigationDelay=100,"wheelViewModeNavigationDelay"in o?this.wheelViewModeNavigationDelay=o.wheelViewModeNavigationDelay:"wheelViewModeNavigationDelay"in this.element.data()&&(this.wheelViewModeNavigationDelay=this.element.data("view-mode-wheel-navigation-delay")),this.startViewMode=2,"startView"in o?this.startViewMode=o.startView:"startView"in this.element.data()&&(this.startViewMode=this.element.data("start-view")),this.startViewMode=$.convertViewMode(this.startViewMode),this.viewMode=this.startViewMode,this.viewSelect=this.minView,"viewSelect"in o?this.viewSelect=o.viewSelect:"viewSelect"in this.element.data()&&(this.viewSelect=this.element.data("view-select")),this.viewSelect=$.convertViewMode(this.viewSelect),this.forceParse=!0,"forceParse"in o?this.forceParse=o.forceParse:"dateForceParse"in this.element.data()&&(this.forceParse=this.element.data("date-force-parse"));for(var i=3===this.bootcssVer?$.templateV3:$.template;-1!==i.indexOf("{iconType}");)i=i.replace("{iconType}",this.icontype);for(;-1!==i.indexOf("{leftArrow}");)i=i.replace("{leftArrow}",this.icons.leftArrow);for(;-1!==i.indexOf("{rightArrow}");)i=i.replace("{rightArrow}",this.icons.rightArrow);if(this.picker=_(i).appendTo(this.isInline?this.element:this.container).on({click:_.proxy(this.click,this),mousedown:_.proxy(this.mousedown,this)}),this.wheelViewModeNavigation&&(_.fn.mousewheel?this.picker.on({mousewheel:_.proxy(this.mousewheel,this)}):console.log("Mouse Wheel event is not supported. Please include the jQuery Mouse Wheel plugin before enabling this option")),this.isInline?this.picker.addClass("datetimepicker-inline"):this.picker.addClass("datetimepicker-dropdown-"+this.pickerPosition+" dropdown-menu"),this.isRTL){this.picker.addClass("datetimepicker-rtl");var n=3===this.bootcssVer?".prev span, .next span":".prev i, .next i";this.picker.find(n).toggleClass(this.icons.leftArrow+" "+this.icons.rightArrow)}_(document).on("mousedown touchend",this.clickedOutside),this.autoclose=!1,"autoclose"in o?this.autoclose=o.autoclose:"dateAutoclose"in this.element.data()&&(this.autoclose=this.element.data("date-autoclose")),this.keyboardNavigation=!0,"keyboardNavigation"in o?this.keyboardNavigation=o.keyboardNavigation:"dateKeyboardNavigation"in this.element.data()&&(this.keyboardNavigation=this.element.data("date-keyboard-navigation")),this.todayBtn=o.todayBtn||this.element.data("date-today-btn")||!1,this.clearBtn=o.clearBtn||this.element.data("date-clear-btn")||!1,this.todayHighlight=o.todayHighlight||this.element.data("date-today-highlight")||!1,void(this.weekStart=0)!==o.weekStart?this.weekStart=o.weekStart:void 0!==this.element.data("date-weekstart")?this.weekStart=this.element.data("date-weekstart"):void 0!==I[this.language].weekStart&&(this.weekStart=I[this.language].weekStart),this.weekStart=this.weekStart%7,this.weekEnd=(this.weekStart+6)%7,this.onRenderDay=function(e){var t=(o.onRenderDay||function(){return[]})(e);"string"==typeof t&&(t=[t]);return["day"].concat(t||[])},this.onRenderHour=function(e){var t=(o.onRenderHour||function(){return[]})(e);return"string"==typeof t&&(t=[t]),["hour"].concat(t||[])},this.onRenderMinute=function(e){var t=(o.onRenderMinute||function(){return[]})(e),i=["minute"];return"string"==typeof t&&(t=[t]),e<this.startDate||e>this.endDate?i.push("disabled"):Math.floor(this.date.getUTCMinutes()/this.minuteStep)===Math.floor(e.getUTCMinutes()/this.minuteStep)&&i.push("active"),i.concat(t||[])},this.onRenderYear=function(e){var t=(o.onRenderYear||function(){return[]})(e),i=["year"];"string"==typeof t&&(t=[t]),this.date.getUTCFullYear()===e.getUTCFullYear()&&i.push("active");var n=e.getUTCFullYear(),a=this.endDate.getUTCFullYear();return(e<this.startDate||a<n)&&i.push("disabled"),i.concat(t||[])},this.onRenderMonth=function(e){var t=(o.onRenderMonth||function(){return[]})(e);return"string"==typeof t&&(t=[t]),["month"].concat(t||[])},this.startDate=new Date(-8639968443048e3),this.endDate=new Date(8639968443048e3),this.datesDisabled=[],this.daysOfWeekDisabled=[],this.setStartDate(o.startDate||this.element.data("date-startdate")),this.setEndDate(o.endDate||this.element.data("date-enddate")),this.setDatesDisabled(o.datesDisabled||this.element.data("date-dates-disabled")),this.setDaysOfWeekDisabled(o.daysOfWeekDisabled||this.element.data("date-days-of-week-disabled")),this.setMinutesDisabled(o.minutesDisabled||this.element.data("date-minute-disabled")),this.setHoursDisabled(o.hoursDisabled||this.element.data("date-hour-disabled")),this.fillDow(),this.fillMonths(),this.update(),this.showMode(),this.isInline&&this.show()};b.prototype={constructor:b,_events:[],_attachEvents:function(){this._detachEvents(),this.isInput?this._events=[[this.element,{focus:_.proxy(this.show,this),keyup:_.proxy(this.update,this),keydown:_.proxy(this.keydown,this)}]]:this.component&&this.hasInput?(this._events=[[this.element.find("input"),{focus:_.proxy(this.show,this),keyup:_.proxy(this.update,this),keydown:_.proxy(this.keydown,this)}],[this.component,{click:_.proxy(this.show,this)}]],this.componentReset&&this._events.push([this.componentReset,{click:_.proxy(this.reset,this)}])):this.element.is("div")?this.isInline=!0:this._events=[[this.element,{click:_.proxy(this.show,this)}]];for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.on(t)},_detachEvents:function(){for(var e,t,i=0;i<this._events.length;i++)e=this._events[i][0],t=this._events[i][1],e.off(t);this._events=[]},show:function(e){this.picker.show(),this.height=this.component?this.component.outerHeight():this.element.outerHeight(),this.forceParse&&this.update(),this.place(),_(window).on("resize",_.proxy(this.place,this)),e&&(e.stopPropagation(),e.preventDefault()),this.isVisible=!0,this.element.trigger({type:"show",date:this.date})},hide:function(){this.isVisible&&(this.isInline||(this.picker.hide(),_(window).off("resize",this.place),this.viewMode=this.startViewMode,this.showMode(),this.isInput||_(document).off("mousedown",this.hide),this.forceParse&&(this.isInput&&this.element.val()||this.hasInput&&this.element.find("input").val())&&this.setValue(),this.isVisible=!1,this.element.trigger({type:"hide",date:this.date})))},remove:function(){this._detachEvents(),_(document).off("mousedown",this.clickedOutside),this.picker.remove(),delete this.picker,delete this.element.data().datetimepicker},getDate:function(){var e=this.getUTCDate();return null===e?null:new Date(e.getTime()+6e4*e.getTimezoneOffset())},getUTCDate:function(){return this.date},getInitialDate:function(){return this.initialDate},setInitialDate:function(e){this.initialDate=e},setDate:function(e){this.setUTCDate(new Date(e.getTime()-6e4*e.getTimezoneOffset()))},setUTCDate:function(e){e>=this.startDate&&e<=this.endDate?(this.date=e,this.setValue(),this.viewDate=this.date,this.fill()):this.element.trigger({type:"outOfRange",date:e,startDate:this.startDate,endDate:this.endDate})},setFormat:function(e){var t;this.format=$.parseFormat(e,this.formatType),this.isInput?t=this.element:this.component&&(t=this.element.find("input")),t&&t.val()&&this.setValue()},setValue:function(){var e=this.getFormattedDate();this.isInput?this.element.val(e):(this.component&&this.element.find("input").val(e),this.element.data("date",e)),this.linkField&&_("#"+this.linkField).val(this.getFormattedDate(this.linkFormat))},getFormattedDate:function(e){return e=e||this.format,$.formatDate(this.date,e,this.language,this.formatType,this.timezone)},setStartDate:function(e){this.startDate=e||this.startDate,8639968443048e3!==this.startDate.valueOf()&&(this.startDate=$.parseDate(this.startDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setEndDate:function(e){this.endDate=e||this.endDate,8639968443048e3!==this.endDate.valueOf()&&(this.endDate=$.parseDate(this.endDate,this.format,this.language,this.formatType,this.timezone)),this.update(),this.updateNavArrows()},setDatesDisabled:function(e){this.datesDisabled=e||[],_.isArray(this.datesDisabled)||(this.datesDisabled=this.datesDisabled.split(/,\s*/));var t=this;this.datesDisabled=_.map(this.datesDisabled,function(e){return $.parseDate(e,t.format,t.language,t.formatType,t.timezone).toDateString()}),this.update(),this.updateNavArrows()},setTitle:function(e,t){return this.picker.find(e).find("th:eq(1)").text(!1===this.title?t:this.title)},setDaysOfWeekDisabled:function(e){this.daysOfWeekDisabled=e||[],_.isArray(this.daysOfWeekDisabled)||(this.daysOfWeekDisabled=this.daysOfWeekDisabled.split(/,\s*/)),this.daysOfWeekDisabled=_.map(this.daysOfWeekDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setMinutesDisabled:function(e){this.minutesDisabled=e||[],_.isArray(this.minutesDisabled)||(this.minutesDisabled=this.minutesDisabled.split(/,\s*/)),this.minutesDisabled=_.map(this.minutesDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},setHoursDisabled:function(e){this.hoursDisabled=e||[],_.isArray(this.hoursDisabled)||(this.hoursDisabled=this.hoursDisabled.split(/,\s*/)),this.hoursDisabled=_.map(this.hoursDisabled,function(e){return parseInt(e,10)}),this.update(),this.updateNavArrows()},place:function(){if(!this.isInline){if(!this.zIndex){var t=0;_("div").each(function(){var e=parseInt(_(this).css("zIndex"),10);t<e&&(t=e)}),this.zIndex=t+10}var e,i,n,a;a=this.container instanceof _?this.container.offset():_(this.container).offset(),this.component?(n=(e=this.component.offset()).left,"bottom-left"!==this.pickerPosition&&"top-left"!==this.pickerPosition||(n+=this.component.outerWidth()-this.picker.outerWidth())):(n=(e=this.element.offset()).left,"bottom-left"!==this.pickerPosition&&"top-left"!==this.pickerPosition||(n+=this.element.outerWidth()-this.picker.outerWidth()));var o=document.body.clientWidth||window.innerWidth;o<n+220&&(n=o-220),i="top-left"===this.pickerPosition||"top-right"===this.pickerPosition?e.top-this.picker.outerHeight():e.top+this.height,i-=a.top,n-=a.left,this.picker.css({top:i,left:n,zIndex:this.zIndex})}},hour_minute:"^([0-9]|0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]",update:function(){var e,t=!1;arguments&&arguments.length&&("string"==typeof arguments[0]||arguments[0]instanceof Date)?(e=arguments[0],t=!0):"string"==typeof(e=(this.isInput?this.element.val():this.element.find("input").val())||this.element.data("date")||this.initialDate)&&(e=e.replace(/^\s+|\s+$/g,"")),e||(e=new Date,t=!1),"string"==typeof e&&(new RegExp(this.hour_minute).test(e)||new RegExp(this.hour_minute+":[0-5][0-9]").test(e))&&(e=this.getDate()),this.date=$.parseDate(e,this.format,this.language,this.formatType,this.timezone),t&&this.setValue(),this.date<this.startDate?this.viewDate=new Date(this.startDate):this.date>this.endDate?this.viewDate=new Date(this.endDate):this.viewDate=new Date(this.date),this.fill()},fillDow:function(){for(var e=this.weekStart,t="<tr>";e<this.weekStart+7;)t+='<th class="dow">'+I[this.language].daysMin[e++%7]+"</th>";t+="</tr>",this.picker.find(".datetimepicker-days thead").append(t)},fillMonths:function(){for(var e="",t=new Date(this.viewDate),i=0;i<12;i++){t.setUTCMonth(i),e+='<span class="'+this.onRenderMonth(t).join(" ")+'">'+I[this.language].monthsShort[i]+"</span>"}this.picker.find(".datetimepicker-months td").html(e)},fill:function(){if(this.date&&this.viewDate){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),a=e.getUTCHours(),o=this.startDate.getUTCFullYear(),s=this.startDate.getUTCMonth(),r=this.endDate.getUTCFullYear(),l=this.endDate.getUTCMonth()+1,d=new D(this.date.getUTCFullYear(),this.date.getUTCMonth(),this.date.getUTCDate()).valueOf(),c=new Date;if(this.setTitle(".datetimepicker-days",I[this.language].months[i]+" "+t),"time"===this.formatViewType){var h=this.getFormattedDate();this.setTitle(".datetimepicker-hours",h),this.setTitle(".datetimepicker-minutes",h)}else this.setTitle(".datetimepicker-hours",n+" "+I[this.language].months[i]+" "+t),this.setTitle(".datetimepicker-minutes",n+" "+I[this.language].months[i]+" "+t);this.picker.find("tfoot th.today").text(I[this.language].today||I.en.today).toggle(!1!==this.todayBtn),this.picker.find("tfoot th.clear").text(I[this.language].clear||I.en.clear).toggle(!1!==this.clearBtn),this.updateNavArrows(),this.fillMonths();var u=D(t,i-1,28,0,0,0,0),p=$.getDaysInMonth(u.getUTCFullYear(),u.getUTCMonth());u.setUTCDate(p),u.setUTCDate(p-(u.getUTCDay()-this.weekStart+7)%7);var f=new Date(u);f.setUTCDate(f.getUTCDate()+42),f=f.valueOf();for(var g,m=[];u.valueOf()<f;)u.getUTCDay()===this.weekStart&&m.push("<tr>"),g=this.onRenderDay(u),u.getUTCFullYear()<t||u.getUTCFullYear()===t&&u.getUTCMonth()<i?g.push("old"):(u.getUTCFullYear()>t||u.getUTCFullYear()===t&&u.getUTCMonth()>i)&&g.push("new"),this.todayHighlight&&u.getUTCFullYear()===c.getFullYear()&&u.getUTCMonth()===c.getMonth()&&u.getUTCDate()===c.getDate()&&g.push("today"),u.valueOf()===d&&g.push("active"),(u.valueOf()+864e5<=this.startDate||u.valueOf()>this.endDate||-1!==_.inArray(u.getUTCDay(),this.daysOfWeekDisabled)||-1!==_.inArray(u.toDateString(),this.datesDisabled))&&g.push("disabled"),m.push('<td class="'+g.join(" ")+'">'+u.getUTCDate()+"</td>"),u.getUTCDay()===this.weekEnd&&m.push("</tr>"),u.setUTCDate(u.getUTCDate()+1);this.picker.find(".datetimepicker-days tbody").empty().append(m.join("")),m=[];var v="",b="",w="",y=this.hoursDisabled||[];e=new Date(this.viewDate);for(var C=0;C<24;C++){e.setUTCHours(C),g=this.onRenderHour(e),-1!==y.indexOf(C)&&g.push("disabled");var k=D(t,i,n,C);k.valueOf()+36e5<=this.startDate||k.valueOf()>this.endDate?g.push("disabled"):a===C&&g.push("active"),this.showMeridian&&2===I[this.language].meridiem.length?((b=C<12?I[this.language].meridiem[0]:I[this.language].meridiem[1])!==w&&(""!==w&&m.push("</fieldset>"),m.push('<fieldset class="hour"><legend>'+b.toUpperCase()+"</legend>")),w=b,v=C%12?C%12:12,C<12?g.push("hour_am"):g.push("hour_pm"),m.push('<span class="'+g.join(" ")+'">'+v+"</span>"),23===C&&m.push("</fieldset>")):(v=C+":00",m.push('<span class="'+g.join(" ")+'">'+v+"</span>"))}this.picker.find(".datetimepicker-hours td").html(m.join("")),m=[],w=b=v="";var T=this.minutesDisabled||[];e=new Date(this.viewDate);for(C=0;C<60;C+=this.minuteStep)-1===T.indexOf(C)&&(e.setUTCMinutes(C),e.setUTCSeconds(0),g=this.onRenderMinute(e),this.showMeridian&&2===I[this.language].meridiem.length?((b=a<12?I[this.language].meridiem[0]:I[this.language].meridiem[1])!==w&&(""!==w&&m.push("</fieldset>"),m.push('<fieldset class="minute"><legend>'+b.toUpperCase()+"</legend>")),w=b,v=a%12?a%12:12,m.push('<span class="'+g.join(" ")+'">'+v+":"+(C<10?"0"+C:C)+"</span>"),59===C&&m.push("</fieldset>")):(v=C+":00",m.push('<span class="'+g.join(" ")+'">'+a+":"+(C<10?"0"+C:C)+"</span>")));this.picker.find(".datetimepicker-minutes td").html(m.join(""));var x=this.date.getUTCFullYear(),N=this.setTitle(".datetimepicker-months",t).end().find(".month").removeClass("active");x===t&&N.eq(this.date.getUTCMonth()).addClass("active"),(t<o||r<t)&&N.addClass("disabled"),t===o&&N.slice(0,s).addClass("disabled"),t===r&&N.slice(l).addClass("disabled"),m="",t=10*parseInt(t/10,10);var E=this.setTitle(".datetimepicker-years",t+"-"+(t+9)).end().find("td");t-=1,e=new Date(this.viewDate);for(C=-1;C<11;C++)e.setUTCFullYear(t),g=this.onRenderYear(e),-1!==C&&10!==C||g.push(S),m+='<span class="'+g.join(" ")+'">'+t+"</span>",t+=1;E.html(m),this.place()}},updateNavArrows:function(){var e=new Date(this.viewDate),t=e.getUTCFullYear(),i=e.getUTCMonth(),n=e.getUTCDate(),a=e.getUTCHours();switch(this.viewMode){case 0:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()&&a<=this.startDate.getUTCHours()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()&&a>=this.endDate.getUTCHours()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()&&n<=this.startDate.getUTCDate()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()&&n>=this.endDate.getUTCDate()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 2:t<=this.startDate.getUTCFullYear()&&i<=this.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()&&i>=this.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 3:case 4:t<=this.startDate.getUTCFullYear()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),t>=this.endDate.getUTCFullYear()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}},mousewheel:function(e){if(e.preventDefault(),e.stopPropagation(),!this.wheelPause){this.wheelPause=!0;var t=e.originalEvent.wheelDelta,i=0<t?1:0===t?0:-1;this.wheelViewModeNavigationInverseDirection&&(i=-i),this.showMode(i),setTimeout(_.proxy(function(){this.wheelPause=!1},this),this.wheelViewModeNavigationDelay)}},click:function(e){e.stopPropagation(),e.preventDefault();var t=_(e.target).closest("span, td, th, legend");if(t.is("."+this.icontype)&&(t=_(t).parent().closest("span, td, th, legend")),1===t.length){if(t.is(".disabled"))return void this.element.trigger({type:"outOfRange",date:this.viewDate,startDate:this.startDate,endDate:this.endDate});switch(t[0].nodeName.toLowerCase()){case"th":switch(t[0].className){case"switch":this.showMode(1);break;case"prev":case"next":var i=$.modes[this.viewMode].navStep*("prev"===t[0].className?-1:1);switch(this.viewMode){case 0:this.viewDate=this.moveHour(this.viewDate,i);break;case 1:this.viewDate=this.moveDate(this.viewDate,i);break;case 2:this.viewDate=this.moveMonth(this.viewDate,i);break;case 3:case 4:this.viewDate=this.moveYear(this.viewDate,i)}this.fill(),this.element.trigger({type:t[0].className+":"+this.convertViewModeText(this.viewMode),date:this.viewDate,startDate:this.startDate,endDate:this.endDate});break;case"clear":this.reset(),this.autoclose&&this.hide();break;case"today":var n=new Date;(n=D(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),0))<this.startDate?n=this.startDate:n>this.endDate&&(n=this.endDate),this.viewMode=this.startViewMode,this.showMode(0),this._setDate(n),this.fill(),this.autoclose&&this.hide()}break;case"span":if(!t.is(".disabled")){var a=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),s=this.viewDate.getUTCDate(),r=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();if(t.is(".month")?(this.viewDate.setUTCDate(1),o=t.parent().find("span").index(t),s=this.viewDate.getUTCDate(),this.viewDate.setUTCMonth(o),this.element.trigger({type:"changeMonth",date:this.viewDate}),3<=this.viewSelect&&this._setDate(D(a,o,s,r,l,d,0))):t.is(".year")?(this.viewDate.setUTCDate(1),a=parseInt(t.text(),10)||0,this.viewDate.setUTCFullYear(a),this.element.trigger({type:"changeYear",date:this.viewDate}),4<=this.viewSelect&&this._setDate(D(a,o,s,r,l,d,0))):t.is(".hour")?(r=parseInt(t.text(),10)||0,(t.hasClass("hour_am")||t.hasClass("hour_pm"))&&(12===r&&t.hasClass("hour_am")?r=0:12!==r&&t.hasClass("hour_pm")&&(r+=12)),this.viewDate.setUTCHours(r),this.element.trigger({type:"changeHour",date:this.viewDate}),1<=this.viewSelect&&this._setDate(D(a,o,s,r,l,d,0))):t.is(".minute")&&(l=parseInt(t.text().substr(t.text().indexOf(":")+1),10)||0,this.viewDate.setUTCMinutes(l),this.element.trigger({type:"changeMinute",date:this.viewDate}),0<=this.viewSelect&&this._setDate(D(a,o,s,r,l,d,0))),0!==this.viewMode){var c=this.viewMode;this.showMode(-1),this.fill(),c===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide()}break;case"td":if(t.is(".day")&&!t.is(".disabled")){s=parseInt(t.text(),10)||1,a=this.viewDate.getUTCFullYear(),o=this.viewDate.getUTCMonth(),r=this.viewDate.getUTCHours(),l=this.viewDate.getUTCMinutes(),d=this.viewDate.getUTCSeconds();t.is(".old")?0===o?(o=11,a-=1):o-=1:t.is(".new")&&(11===o?(o=0,a+=1):o+=1),this.viewDate.setUTCFullYear(a),this.viewDate.setUTCMonth(o,s),this.element.trigger({type:"changeDay",date:this.viewDate}),2<=this.viewSelect&&this._setDate(D(a,o,s,r,l,d,0))}c=this.viewMode;this.showMode(-1),this.fill(),c===this.viewMode&&this.autoclose&&this.hide()}}},_setDate:function(e,t){var i;t&&"date"!==t||(this.date=e),t&&"view"!==t||(this.viewDate=e),this.fill(),this.setValue(),this.isInput?i=this.element:this.component&&(i=this.element.find("input")),i&&i.change(),this.element.trigger({type:"changeDate",date:this.getDate()}),null===e&&(this.date=this.viewDate)},moveMinute:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCMinutes(i.getUTCMinutes()+t*this.minuteStep),i},moveHour:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCHours(i.getUTCHours()+t),i},moveDate:function(e,t){if(!t)return e;var i=new Date(e.valueOf());return i.setUTCDate(i.getUTCDate()+t),i},moveMonth:function(e,t){if(!t)return e;var i,n,a=new Date(e.valueOf()),o=a.getUTCDate(),s=a.getUTCMonth(),r=Math.abs(t);if(t=0<t?1:-1,1===r)n=-1===t?function(){return a.getUTCMonth()===s}:function(){return a.getUTCMonth()!==i},i=s+t,a.setUTCMonth(i),(i<0||11<i)&&(i=(i+12)%12);else{for(var l=0;l<r;l++)a=this.moveMonth(a,t);i=a.getUTCMonth(),a.setUTCDate(o),n=function(){return i!==a.getUTCMonth()}}for(;n();)a.setUTCDate(--o),a.setUTCMonth(i);return a},moveYear:function(e,t){return this.moveMonth(e,12*t)},dateWithinRange:function(e){return e>=this.startDate&&e<=this.endDate},keydown:function(e){if(this.picker.is(":not(:visible)"))27===e.keyCode&&this.show();else{var t,i,n,a,o=!1;switch(e.keyCode){case 27:this.hide(),e.preventDefault();break;case 37:case 39:if(!this.keyboardNavigation)break;t=37===e.keyCode?-1:1;var s=this.viewMode;e.ctrlKey?s+=2:e.shiftKey&&(s+=1),4===s?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3===s?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2===s?(i=this.moveDate(this.date,t),n=this.moveDate(this.viewDate,t)):1===s?(i=this.moveHour(this.date,t),n=this.moveHour(this.viewDate,t)):0===s&&(i=this.moveMinute(this.date,t),n=this.moveMinute(this.viewDate,t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 38:case 40:if(!this.keyboardNavigation)break;t=38===e.keyCode?-1:1,s=this.viewMode,e.ctrlKey?s+=2:e.shiftKey&&(s+=1),4===s?(i=this.moveYear(this.date,t),n=this.moveYear(this.viewDate,t)):3===s?(i=this.moveMonth(this.date,t),n=this.moveMonth(this.viewDate,t)):2===s?(i=this.moveDate(this.date,7*t),n=this.moveDate(this.viewDate,7*t)):1===s?n=this.showMeridian?(i=this.moveHour(this.date,6*t),this.moveHour(this.viewDate,6*t)):(i=this.moveHour(this.date,4*t),this.moveHour(this.viewDate,4*t)):0===s&&(i=this.moveMinute(this.date,4*t),n=this.moveMinute(this.viewDate,4*t)),this.dateWithinRange(i)&&(this.date=i,this.viewDate=n,this.setValue(),this.update(),e.preventDefault(),o=!0);break;case 13:if(0!==this.viewMode){var r=this.viewMode;this.showMode(-1),this.fill(),r===this.viewMode&&this.autoclose&&this.hide()}else this.fill(),this.autoclose&&this.hide();e.preventDefault();break;case 9:this.hide()}if(o)this.isInput?a=this.element:this.component&&(a=this.element.find("input")),a&&a.change(),this.element.trigger({type:"changeDate",date:this.getDate()})}},showMode:function(e){if(e){var t=Math.max(0,Math.min($.modes.length-1,this.viewMode+e));t>=this.minView&&t<=this.maxView&&(this.element.trigger({type:"changeMode",date:this.viewDate,oldViewMode:this.viewMode,newViewMode:t}),this.viewMode=t)}this.picker.find(">div").hide().filter(".datetimepicker-"+$.modes[this.viewMode].clsName).css("display","block"),this.updateNavArrows()},reset:function(){this._setDate(null,"date")},convertViewModeText:function(e){switch(e){case 4:return"decade";case 3:return"year";case 2:return"month";case 1:return"day";case 0:return"hour"}}};var S=_.fn.datetimepicker;_.fn.datetimepicker=function(n){var a,o=Array.apply(null,arguments);return o.shift(),this.each(function(){var e=_(this),t=e.data("datetimepicker"),i="object"==typeof n&&n;if(t||e.data("datetimepicker",t=new b(this,_.extend({},_.fn.datetimepicker.defaults,i))),"string"==typeof n&&"function"==typeof t[n]&&(a=t[n].apply(t,o))!==s)return!1}),a!==s?a:this},_.fn.datetimepicker.defaults={},_.fn.datetimepicker.Constructor=b;var I=_.fn.datetimepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sun"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa","Su"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"Today",clear:"Clear"},cn:{days:["星期日","星期一","星期二","星期三","星期四","星期五","星期六"],daysShort:["周日","周一","周二","周三","周四","周五","周六"],daysMin:["日","一","二","三","四","五","六"],months:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],monthsShort:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],meridiem:["am","pm"],suffix:["st","nd","rd","th"],today:"今日",clear:"清除",format:"yyyy年mm月dd日",titleFormat:"yyyy年mm月",weekStart:1}},$={modes:[{clsName:"minutes",navFnc:"Hours",navStep:1},{clsName:"hours",navFnc:"Date",navStep:1},{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,$.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},getDefaultFormat:function(e,t){if("standard"===e)return"input"===t?"yyyy-mm-dd hh:ii":"yyyy-mm-dd hh:ii:ss";if("php"===e)return"input"===t?"Y-m-d H:i":"Y-m-d H:i:s";throw new Error("Invalid format type.")},validParts:function(e){if("standard"===e)return/t|hh?|HH?|p|P|z|Z|ii?|ss?|dd?|DD?|mm?|MM?|yy(?:yy)?/g;if("php"===e)return/[dDjlNwzFmMnStyYaABgGhHis]/g;throw new Error("Invalid format type.")},nonpunctuation:/[^ -\/:-@\[-`{-~\t\n\rTZ]+/g,parseFormat:function(e,t){var i=e.replace(this.validParts(t),"\0").split("\0"),n=e.match(this.validParts(t));if(!i||!i.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:i,parts:n}},parseDate:function(e,t,i,n,a){if(e instanceof Date){var o=new Date(e.valueOf()-6e4*e.getTimezoneOffset());return o.setMilliseconds(0),o}if(/^\d{4}\-\d{1,2}\-\d{1,2}$/.test(e)&&(t=this.parseFormat("yyyy-mm-dd",n)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}$/.test(e)&&(t=this.parseFormat("yyyy-mm-dd hh:ii",n)),/^\d{4}\-\d{1,2}\-\d{1,2}[T ]\d{1,2}\:\d{1,2}\:\d{1,2}[Z]{0,1}$/.test(e)&&(t=this.parseFormat("yyyy-mm-dd hh:ii:ss",n)),/^[-+]\d+[dmwy]([\s,]+[-+]\d+[dmwy])*$/.test(e)){var s,r=/([-+]\d+)([dmwy])/,l=e.match(/([-+]\d+)([dmwy])/g);e=new Date;for(var d=0;d<l.length;d++)switch(u=r.exec(l[d]),s=parseInt(u[1]),u[2]){case"d":e.setUTCDate(e.getUTCDate()+s);break;case"m":e=b.prototype.moveMonth.call(b.prototype,e,s);break;case"w":e.setUTCDate(e.getUTCDate()+7*s);break;case"y":e=b.prototype.moveYear.call(b.prototype,e,s)}return D(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),0)}l=e&&e.toString().match(this.nonpunctuation)||[],e=new Date(0,0,0,0,0,0,0);var c,h,u,p={},f=["hh","h","ii","i","ss","s","yyyy","yy","M","MM","m","mm","D","DD","d","dd","H","HH","p","P","z","Z"],g={hh:function(e,t){return e.setUTCHours(t)},h:function(e,t){return e.setUTCHours(t)},HH:function(e,t){return e.setUTCHours(12===t?0:t)},H:function(e,t){return e.setUTCHours(12===t?0:t)},ii:function(e,t){return e.setUTCMinutes(t)},i:function(e,t){return e.setUTCMinutes(t)},ss:function(e,t){return e.setUTCSeconds(t)},s:function(e,t){return e.setUTCSeconds(t)},yyyy:function(e,t){return e.setUTCFullYear(t)},yy:function(e,t){return e.setUTCFullYear(2e3+t)},m:function(e,t){for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;){if(isNaN(e.getUTCMonth()))return e;e.setUTCDate(e.getUTCDate()-1)}return e},d:function(e,t){return e.setUTCDate(t)},p:function(e,t){return e.setUTCHours(1===t?e.getUTCHours()+12:e.getUTCHours())},z:function(){return a}};if(g.M=g.MM=g.mm=g.m,g.dd=g.d,g.P=g.p,g.Z=g.z,e=D(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()),l.length===t.parts.length){d=0;for(var m=t.parts.length;d<m;d++){if(c=parseInt(l[d],10),u=t.parts[d],isNaN(c))switch(u){case"MM":h=_(I[i].months).filter(function(){var e=this.slice(0,l[d].length);return e===l[d].slice(0,e.length)}),c=_.inArray(h[0],I[i].months)+1;break;case"M":h=_(I[i].monthsShort).filter(function(){var e=this.slice(0,l[d].length),t=l[d].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}),c=_.inArray(h[0],I[i].monthsShort)+1;break;case"p":case"P":c=_.inArray(l[d].toLowerCase(),I[i].meridiem)}p[u]=c}var v;for(d=0;d<f.length;d++)(v=f[d])in p&&!isNaN(p[v])&&g[v](e,p[v])}return e},formatDate:function(e,t,i,n,a){if(null===e)return"";var o;if("standard"===n)o={t:e.getTime(),yy:e.getUTCFullYear().toString().substring(2),yyyy:e.getUTCFullYear(),m:e.getUTCMonth()+1,M:I[i].monthsShort[e.getUTCMonth()],MM:I[i].months[e.getUTCMonth()],d:e.getUTCDate(),D:I[i].daysShort[e.getUTCDay()],DD:I[i].days[e.getUTCDay()],p:2===I[i].meridiem.length?I[i].meridiem[e.getUTCHours()<12?0:1]:"",h:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds(),z:a},2===I[i].meridiem.length?o.H=o.h%12==0?12:o.h%12:o.H=o.h,o.HH=(o.H<10?"0":"")+o.H,o.P=o.p.toUpperCase(),o.Z=o.z,o.hh=(o.h<10?"0":"")+o.h,o.ii=(o.i<10?"0":"")+o.i,o.ss=(o.s<10?"0":"")+o.s,o.dd=(o.d<10?"0":"")+o.d,o.mm=(o.m<10?"0":"")+o.m;else{if("php"!==n)throw new Error("Invalid format type.");(o={y:e.getUTCFullYear().toString().substring(2),Y:e.getUTCFullYear(),F:I[i].months[e.getUTCMonth()],M:I[i].monthsShort[e.getUTCMonth()],n:e.getUTCMonth()+1,t:$.getDaysInMonth(e.getUTCFullYear(),e.getUTCMonth()),j:e.getUTCDate(),l:I[i].days[e.getUTCDay()],D:I[i].daysShort[e.getUTCDay()],w:e.getUTCDay(),N:0===e.getUTCDay()?7:e.getUTCDay(),S:e.getUTCDate()%10<=I[i].suffix.length?I[i].suffix[e.getUTCDate()%10-1]:"",a:2===I[i].meridiem.length?I[i].meridiem[e.getUTCHours()<12?0:1]:"",g:e.getUTCHours()%12==0?12:e.getUTCHours()%12,G:e.getUTCHours(),i:e.getUTCMinutes(),s:e.getUTCSeconds()}).m=(o.n<10?"0":"")+o.n,o.d=(o.j<10?"0":"")+o.j,o.A=o.a.toString().toUpperCase(),o.h=(o.g<10?"0":"")+o.g,o.H=(o.G<10?"0":"")+o.G,o.i=(o.i<10?"0":"")+o.i,o.s=(o.s<10?"0":"")+o.s}e=[];for(var s=_.extend([],t.separators),r=0,l=t.parts.length;r<l;r++)s.length&&e.push(s.shift()),e.push(o[t.parts[r]]);return s.length&&e.push(s.shift()),e.join("")},convertViewMode:function(e){switch(e){case 4:case"decade":e=4;break;case 3:case"year":e=3;break;case 2:case"month":e=2;break;case 1:case"day":e=1;break;case 0:case"hour":e=0}return e},headTemplate:'<thead><tr><th class="prev"><i class="{iconType} {leftArrow}"/></th><th colspan="5" class="switch"></th><th class="next"><i class="{iconType} {rightArrow}"/></th></tr></thead>',headTemplateV3:'<thead><tr><th class="prev"><span class="{iconType} {leftArrow}"></span> </th><th colspan="5" class="switch"></th><th class="next"><span class="{iconType} {rightArrow}"></span> </th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};$.template='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+$.headTemplate+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+$.headTemplate+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+$.headTemplate+"<tbody></tbody>"+$.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+$.headTemplate+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+$.headTemplate+$.contTemplate+$.footTemplate+"</table></div></div>",$.templateV3='<div class="datetimepicker"><div class="datetimepicker-minutes"><table class=" table-condensed">'+$.headTemplateV3+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-hours"><table class=" table-condensed">'+$.headTemplateV3+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-days"><table class=" table-condensed">'+$.headTemplateV3+"<tbody></tbody>"+$.footTemplate+'</table></div><div class="datetimepicker-months"><table class="table-condensed">'+$.headTemplateV3+$.contTemplate+$.footTemplate+'</table></div><div class="datetimepicker-years"><table class="table-condensed">'+$.headTemplateV3+$.contTemplate+$.footTemplate+"</table></div></div>",_.fn.datetimepicker.DPGlobal=$,_.fn.datetimepicker.noConflict=function(){return _.fn.datetimepicker=S,this},_(document).on("focus.datetimepicker.data-api click.datetimepicker.data-api",'[data-provide="datetimepicker"]',function(e){var t=_(this);t.data("datetimepicker")||(e.preventDefault(),t.datetimepicker("show"))}),_(function(){_('[data-provide="datetimepicker-inline"]').datetimepicker()})}(jQuery),function(L){"use strict";var o,n,e,t,i,U,R,h,b,k,z,a,s,r,w,l,d,c,u,p,f,g,m,v,y,C,j,H,B,V,T,Y,x,N,E,_,D,S,I;L.fn.fileinputLocales={},L.fn.fileinputThemes={},o=".fileinput",n="kvFileinputModal",e='style="width:{width};height:{height};"',t='<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',i='<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',U=window.URL||window.webkitURL,R=function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},h=function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var t,i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",t=i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),t},b=function(e,t,i,n){var a=n?t:t.split(" ").join(o+" ")+o;e.off(a).on(a,i)},k={data:{},init:function(r){var e=r.initialPreview,t=r.id;0<e.length&&!B(e)&&(e=e.split(r.initialPreviewDelimiter)),k.data[t]={content:e,config:r.initialPreviewConfig,tags:r.initialPreviewThumbTags,delimiter:r.initialPreviewDelimiter,previewFileType:r.initialPreviewFileType,previewAsData:r.initialPreviewAsData,template:r.previewGenericTemplate,showZoom:r.fileActionSettings.showZoom,showDrag:r.fileActionSettings.showDrag,getSize:function(e){return r._getSize(e)},parseTemplate:function(e,t,i,n,a,o,s){return r._generatePreviewTemplate(e,t,i,n,a,!1,null," file-preview-initial",o,s)},msg:function(e){return r._getMsgSelected(e)},initId:r.previewInitId,footer:r._getLayoutTemplate("footer").replace(/\{progress}/g,r._renderThumbProgress()),isDelete:r.initialPreviewShowDelete,caption:r.initialCaption,actions:function(e,t,i,n,a,o,s){return r._renderFileActions(e,t,i,n,a,o,s,!0)}}},fetch:function(e){return k.data[e].content.filter(function(e){return null!==e})},count:function(e,t){return k.data[e]&&k.data[e].content?t?k.data[e].content.length:k.fetch(e).length:0},get:function(e,t,i){var n,a,o,s,r,l,d="init_"+t,c=k.data[e],h=c.config[t],u=c.content[t],p=c.initId+"-"+d,f=" file-preview-initial",g=V("previewAsData",h,c.previewAsData);return i=void 0===i||i,u?(h&&h.frameClass&&(f+=" "+h.frameClass),n=g?(o=c.previewAsData?V("type",h,c.previewFileType||"generic"):"generic",s=V("caption",h),r=k.footer(e,t,i,h&&h.size||null),l=V("filetype",h,o),c.parseTemplate(o,u,s,l,p,r,d,null)):c.template.replace(/\{previewId}/g,p).replace(/\{frameClass}/g,f).replace(/\{fileindex}/g,d).replace(/\{content}/g,c.content[t]).replace(/\{template}/g,V("type",h,c.previewFileType)).replace(/\{footer}/g,k.footer(e,t,i,h&&h.size||null)),c.tags.length&&c.tags[t]&&(n=x(n,c.tags[t])),H(h)||H(h.frameAttr)||((a=L(document.createElement("div")).html(n)).find(".file-preview-initial").attr(h.frameAttr),n=a.html(),a.remove()),n):""},add:function(e,t,i,n,a){var o,s=L.extend(!0,{},k.data[e]);return B(t)||(t=t.split(s.delimiter)),a?(o=s.content.push(t)-1,s.config[o]=i,s.tags[o]=n):(o=t.length-1,s.content=t,s.config=i,s.tags=n),k.data[e]=s,o},set:function(e,t,i,n,a){var o,s=L.extend(!0,{},k.data[e]);if(t&&t.length&&(B(t)||(t=t.split(s.delimiter)),t.filter(function(e){return null!==e}).length)){if(void 0===s.content&&(s.content=[]),void 0===s.config&&(s.config=[]),void 0===s.tags&&(s.tags=[]),a){for(o=0;o<t.length;o++)t[o]&&s.content.push(t[o]);for(o=0;o<i.length;o++)i[o]&&s.config.push(i[o]);for(o=0;o<n.length;o++)n[o]&&s.tags.push(n[o])}else s.content=t,s.config=i,s.tags=n;k.data[e]=s}},unset:function(e,t){var i=k.count(e.id);if(i){if(1===i)return k.data[e.id].content=[],k.data[e.id].config=[],k.data[e.id].tags=[],e.initialPreview=[],e.initialPreviewConfig=[],void(e.initialPreviewThumbTags=[]);k.data[e.id].content[t]=null,k.data[e.id].config[t]=null,k.data[e.id].tags[t]=null}},out:function(e){var t="",i=k.data[e],n=k.count(e,!0);if(0===n)return{content:"",caption:""};for(var a=0;a<n;a++)t+=k.get(e,a);return{content:'<div class="file-initial-thumbs">'+t+"</div>",caption:i.msg(k.count(e))}},footer:function(e,t,i,n){var a=k.data[e];if(i=void 0===i||i,0===a.config.length||H(a.config[t]))return"";var o=a.config[t],s=V("caption",o),r=V("width",o,"auto"),l=V("url",o,!1),d=V("key",o,null),c=V("showDelete",o,!0),h=V("showZoom",o,a.showZoom),u=V("showDrag",o,a.showDrag),p=!1===l&&i,f=a.isDelete?a.actions(!1,c,h,u,p,l,d):"";return a.footer.replace(/\{actions}/g,f).replace(/\{caption}/g,s).replace(/\{size}/g,a.getSize(n)).replace(/\{width}/g,r).replace(/\{indicator}/g,"").replace(/\{indicatorTitle}/g,"")}},z=function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},a=function(){return!(!window.File||!window.FileReader)},s=function(){var e=document.createElement("div");return!h(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},r=function(){return a()&&window.FormData},w=function(e,t){e.removeClass(t).addClass(t)},p={showRemove:!0,showUpload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="fa fa-trash text-danger"></i>',removeClass:"btn btn-xs btn-default",removeTitle:"Remove file",uploadIcon:'<i class="fa fa-upload text-info"></i>',uploadClass:"btn btn-xs btn-default",uploadTitle:"Upload file",zoomIcon:'<i class="fa fa-zoom-in"></i>',zoomClass:"btn btn-xs btn-default",zoomTitle:"View Details",dragIcon:'<i class="fa fa-bars"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="fa fa-hand-o-down text-warning"></i>',indicatorSuccess:'<i class="fa fa-check-circle text-success"></i>',indicatorError:'<i class="fa fa-exclamation-circle text-danger"></i>',indicatorLoading:'<i class="fa fa-hand-o-up text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."},f={main1:'{preview}\n<div class="kv-upload-progress hide"></div>\n<div class="input-group {class}">\n   {caption}\n   <div class="input-group-btn">\n       {remove}\n       {cancel}\n       {upload}\n       {browse}\n   </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress hide"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',close:'<div class="close fileinput-remove">&times;</div>\n',fileIcon:'<i class="fa fa-file kv-caption-icon"></i>',caption:'<div tabindex="500" class="form-control file-caption {class}">\n   <div class="file-caption-name"></div>\n</div>\n',modalMain:'<div id="kvFileinputModal" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="kvFileinputModalLabel"></div>',modal:'<div class="modal-dialog modal-lg" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <div class="kv-zoom-actions pull-right">{toggleheader}{fullscreen}{borderless}{close}</div>\n      <h3 class="modal-title">{heading} <small><span class="kv-zoom-title"></span></small></h3>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {percent}%\n     </div>\n</div>',size:" <br><samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">{caption}{size}</div>\n    {progress} {actions}\n</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {upload} {delete} {zoom} {other}    </div>\n    {drag}\n    <div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>\n    <div class="clearfix"></div>\n</div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>'},g={generic:(d=(l='<div class="file-preview-frame{frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"')+'><div class="kv-file-content">\n')+"{content}\n"+(u="</div>{footer}\n</div>\n"),html:d+'<div class="kv-preview-data file-preview-html" title="{caption}" style="width:{width};height:{height};">{data}</div>\n'+u,image:d+'<img src="{data}" class="kv-preview-data file-preview-image" title="{caption}" alt="{caption}" style="width:{width};height:{height};">\n'+u,text:d+'<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly style="width:{width};height:{height};">{data}</textarea>\n'+u,video:(c=l+' title="{caption}" '+e+'><div class="kv-file-content">\n')+'<video class="kv-preview-data" width="{width}" height="{height}" controls>\n<source src="{data}" type="{type}">\n<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>\n</video>\n'+u,audio:c+'<audio class="kv-preview-data" controls>\n<source src="{data}" type="{type}">\n<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>\n</audio>\n'+u,flash:c+'<object class="kv-preview-data file-object" type="application/x-shockwave-flash" width="{width}" height="{height}" data="{data}">\n<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n <div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>\n</object>\n'+u,object:c+'<object class="kv-preview-data file-object" data="{data}" type="{type}" width="{width}" height="{height}">\n<param name="movie" value="{caption}" />\n<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n <div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>\n</object>\n'+u,pdf:c+'<embed class="kv-preview-data" src="{data}" width="{width}" height="{height}" type="application/pdf">\n'+u,other:c+'<div class="kv-preview-data file-preview-other-frame">\n<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>\n</div>\n'+u},v=["image","html","text","video","audio","flash","pdf","object"],C={image:{width:"auto",height:"160px"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"213px",height:"80px"},flash:{width:"213px",height:"160px"},object:{width:"160px",height:"160px"},pdf:{width:"160px",height:"160px"},other:{width:"160px",height:"160px"}},m={image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"100%","min-height":"480px"},text:{width:"100%",height:"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","min-height":"480px"},pdf:{width:"100%",height:"100%","min-height":"480px"},other:{width:"auto",height:"100%","min-height":"480px"}},j={image:function(e,t){return R(e,"image.*")||R(t,/\.(gif|png|jpe?g)$/i)},html:function(e,t){return R(e,"text/html")||R(t,/\.(htm|html)$/i)},text:function(e,t){return R(e,"text.*")||R(t,/\.(xml|javascript)$/i)||R(t,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,t){return R(e,"video.*")&&(R(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||R(t,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,t){return R(e,"audio.*")&&(R(t,/(ogg|mp3|mp?g|wav)$/i)||R(t,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,t){return R(e,"application/x-shockwave-flash",!0)||R(t,/\.(swf)$/i)},pdf:function(e,t){return R(e,"application/pdf",!0)||R(t,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},H=function(e,t){return null==e||0===e.length||t&&""===L.trim(e)},B=function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},V=function(e,t,i){return i=i||"",t&&"object"==typeof t&&e in t?t[e]:i},y=function(e,t,i){return H(e)||H(e[t])?i:L(e[t])},T=function(){return Math.round((new Date).getTime()+100*Math.random())},Y=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},x=function(e,t){var i=e;return t&&L.each(t,function(e,t){"function"==typeof t&&(t=t()),i=i.split(e).join(t)}),i},N=function(e){var t=e.is("img")?e.attr("src"):e.find("source").attr("src");U.revokeObjectURL(t)},E=function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},_=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},D=function(e){e&&!_()?document.documentElement.requestFullscreen?document.documentElement.requestFullscreen():document.documentElement.msRequestFullscreen?document.documentElement.msRequestFullscreen():document.documentElement.mozRequestFullScreen?document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullscreen&&document.documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},S=function(e,t,i){if(i>=e.length)for(var n=i-e.length;1+n--;)e.push(void 0);return e.splice(i,0,e.splice(t,1)[0]),e},(I=function(e,t){var i=this;i.$element=L(e),i._validate()&&(i.isPreviewable=a(),i.isIE9=h(9),i.isIE10=h(10),i.isPreviewable||i.isIE9?(i._init(t),i._listen()):i.$element.removeClass("file-loading"))}).prototype={constructor:I,_init:function(e){var t,i=this,n=i.$element;L.each(e,function(e,t){switch(e){case"minFileCount":case"maxFileCount":case"maxFileSize":i[e]=z(t);break;default:i[e]=t}}),i.fileInputCleared=!1,i.fileBatchCompleted=!0,i.isPreviewable||(i.showPreview=!1),i.uploadFileAttr=H(n.attr("name"))?"file_data":n.attr("name"),i.reader=null,i.formdata={},i.clearStack(),i.uploadCount=0,i.uploadStatus={},i.uploadLog=[],i.uploadAsyncCount=0,i.loadedImages=[],i.totalImagesCount=0,i.ajaxRequests=[],i.isError=!1,i.ajaxAborted=!1,i.cancelling=!1,t=i._getLayoutTemplate("progress"),i.progressTemplate=t.replace("{class}",i.progressClass),i.progressCompleteTemplate=t.replace("{class}",i.progressCompleteClass),i.progressErrorTemplate=t.replace("{class}",i.progressErrorClass),i.dropZoneEnabled=s()&&i.dropZoneEnabled,i.isDisabled=i.$element.attr("disabled")||i.$element.attr("readonly"),i.isUploadable=r()&&!H(i.uploadUrl),i.isClickable=i.browseOnZoneClick&&i.showPreview&&(i.isUploadable&&i.dropZoneEnabled||!H(i.defaultPreviewContent)),i.slug="function"==typeof e.slugCallback?e.slugCallback:i._slugDefault,i.mainTemplate=i.showCaption?i._getLayoutTemplate("main1"):i._getLayoutTemplate("main2"),i.captionTemplate=i._getLayoutTemplate("caption"),i.previewGenericTemplate=i._getPreviewTemplate("generic"),i.resizeImage&&(i.maxImageWidth||i.maxImageHeight)&&(i.imageCanvas=document.createElement("canvas"),i.imageCanvasContext=i.imageCanvas.getContext("2d")),H(i.$element.attr("id"))&&i.$element.attr("id",T()),void 0===i.$container?i.$container=i._createContainer():i._refreshContainer(),i.$dropZone=i.$container.find(".file-drop-zone"),i.$progress=i.$container.find(".kv-upload-progress"),i.$btnUpload=i.$container.find(".fileinput-upload"),i.$captionContainer=y(e,"elCaptionContainer",i.$container.find(".file-caption")),i.$caption=y(e,"elCaptionText",i.$container.find(".file-caption-name")),i.$previewContainer=y(e,"elPreviewContainer",i.$container.find(".file-preview")),i.$preview=y(e,"elPreviewImage",i.$container.find(".file-preview-thumbnails")),i.$previewStatus=y(e,"elPreviewStatus",i.$container.find(".file-preview-status")),i.$errorContainer=y(e,"elErrorContainer",i.$previewContainer.find(".kv-fileinput-error")),H(i.msgErrorClass)||w(i.$errorContainer,i.msgErrorClass),i.$errorContainer.hide(),i.fileActionSettings=L.extend(!0,p,e.fileActionSettings),i.previewInitId="preview-"+T(),i.id=i.$element.attr("id"),k.init(i),i._initPreview(!0),i._initPreviewActions(),i.options=e,i._setFileDropZoneTitle(),i.$element.removeClass("file-loading"),i.$element.attr("disabled")&&i.disable(),i._initZoom()},_validate:function(){return"file"===this.$element.attr("type")||('<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>',this.$element.after('<div class="help-block alert alert-warning"><h4>Invalid Input Type</h4>You must set an input <code>type = file</code> for <b>bootstrap-fileinput</b> plugin to initialize.</div>'),!1)},_errorsExist:function(){var e;return!!this.$errorContainer.find("li").length||((e=L(document.createElement("div")).html(this.$errorContainer.html())).find("span.kv-error-close").remove(),e.find("ul").remove(),!!L.trim(e.text()).length)},_errorHandler:function(e,t){var i=this,n=e.target.error;n.code===n.NOT_FOUND_ERR?i._showError(i.msgFileNotFound.replace("{name}",t)):n.code===n.SECURITY_ERR?i._showError(i.msgFileSecured.replace("{name}",t)):n.code===n.NOT_READABLE_ERR?i._showError(i.msgFileNotReadable.replace("{name}",t)):n.code===n.ABORT_ERR?i._showError(i.msgFilePreviewAborted.replace("{name}",t)):i._showError(i.msgFilePreviewError.replace("{name}",t))},_addError:function(e){var t=this.$errorContainer;e&&t.length&&(t.html(this.errorCloseButton+e),b(t.find(".kv-error-close"),"click",function(){t.fadeOut("slow")}))},_resetErrors:function(e){var t=this.$errorContainer;this.isError=!1,this.$container.removeClass("has-error"),t.html(""),e?t.fadeOut("slow"):t.hide()},_showFolderError:function(e){var t,i=this,n=i.$errorContainer;e&&(t=i.msgFoldersNotAllowed.replace(/\{n}/g,e),i._addError(t),w(i.$container,"has-error"),n.fadeIn(800),i._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,i){var n=this,a=n.$errorContainer,o=i||"fileuploaderror",s=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===a.find("ul").length?n._addError("<ul>"+s+"</ul>"):a.find("ul").append(s),a.fadeIn(800),n._raise(o,[t,e]),n.$container.removeClass("file-input-new"),w(n.$container,"has-error"),!0},_showError:function(e,t,i){var n=this,a=n.$errorContainer,o=i||"fileerror";return(t=t||{}).reader=n.reader,n._addError(e),a.fadeIn(800),n._raise(o,[t,e]),n.isUploadable||n._clearFileInput(),n.$container.removeClass("file-input-new"),w(n.$container,"has-error"),n.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,i=1<t.minFileCount?t.filePlural:t.fileSingle,n=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),a=t.$errorContainer;t._addError(n),t.isError=!0,t._updateFileDetails(0),a.fadeIn(800),t._raise("fileerror",[e,n]),t._clearFileInput(),w(t.$container,"has-error")},_parseError:function(e,t,i){var n=this,a=L.trim(t+""),o="."===a.slice(-1)?"":".",s=void 0!==e.responseJSON&&void 0!==e.responseJSON.error?e.responseJSON.error:e.responseText;return n.cancelling&&n.msgUploadAborted&&(a=n.msgUploadAborted),n.showAjaxErrorDetails&&s?a+=o+(s=0<(s=L.trim(s.replace(/\n\s*\n/g,"\n"))).length?"<pre>"+s+"</pre>":""):a+=o,n.cancelling=!1,i?"<b>"+i+": </b>"+a:a},_parseFileType:function(e){var t,i,n;for(n=0;n<v.length;n+=1)if(t=V(i=v[n],this.fileTypeSettings,j[i])(e.type,e.name)?i:"",!H(t))return t;return"other"},_parseFilePreviewIcon:function(e,t){var i,n=this,a=n.previewFileIcon;return t&&-1<t.indexOf(".")&&(i=t.split(".").pop(),n.previewFileIconSettings&&n.previewFileIconSettings[i]&&(a=n.previewFileIconSettings[i]),n.previewFileExtSettings&&L.each(n.previewFileExtSettings,function(e,t){n.previewFileIconSettings[e]&&t(i)?a=n.previewFileIconSettings[e]:!0})),-1<e.indexOf("{previewFileIcon}")?e.replace(/\{previewFileIconClass}/g,n.previewFileIconClass).replace(/\{previewFileIcon}/g,a):e},_raise:function(e,t){var i=L.Event(e);if(void 0!==t?this.$element.trigger(i,t):this.$element.trigger(i),i.isDefaultPrevented())return!1;if(!i.result)return i.result;switch(e){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:this.ajaxAborted=i.result}return!0},_listenFullScreen:function(e){var t,i,n=this.$modal;n&&n.length&&(t=n&&n.find(".btn-fullscreen"),i=n&&n.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),n.hasClass("file-zoom-fullscreen")?this._maximizeZoomDialog():e?this._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var e=this,t=e.$element,i=t.closest("form"),n=e.$container;b(t,"change",L.proxy(e._change,e)),e.showBrowse&&b(e.$btnFile,"click",L.proxy(e._browse,e)),b(i,"reset",L.proxy(e.reset,e)),b(n.find(".fileinput-remove:not([disabled])"),"click",L.proxy(e.clear,e)),b(n.find(".fileinput-cancel"),"click",L.proxy(e.cancel,e)),e._initDragDrop(),e.isUploadable||b(i,"submit",L.proxy(e._submitForm,e)),b(e.$container.find(".fileinput-upload"),"click",L.proxy(e._uploadClick,e)),b(L(window),"resize",function(){e._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),b(L(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){e._listenFullScreen(_())}),e._initClickable()},_initClickable:function(){var i,n=this;n.isClickable&&(i=n.isUploadable?n.$dropZone:n.$preview.find(".file-default-preview"),w(i,"clickable"),i.attr("tabindex",-1),b(i,"click",function(e){var t=L(e.target);t.parents(".file-preview-thumbnails").length&&!t.parents(".file-default-preview").length||(n.$element.trigger("click"),i.blur())}))},_initDragDrop:function(){var e=this,t=e.$dropZone;e.isUploadable&&e.dropZoneEnabled&&e.showPreview&&(b(t,"dragenter dragover",L.proxy(e._zoneDragEnter,e)),b(t,"dragleave",L.proxy(e._zoneDragLeave,e)),b(t,"drop",L.proxy(e._zoneDrop,e)),b(L(document),"dragenter dragover drop",e._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(e){var t=-1<L.inArray("Files",e.originalEvent.dataTransfer.types);if(this._zoneDragDropInit(e),this.isDisabled||!t)return e.originalEvent.dataTransfer.effectAllowed="none",void(e.originalEvent.dataTransfer.dropEffect="none");w(this.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){this._zoneDragDropInit(e),this.isDisabled||this.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){e.preventDefault(),this.isDisabled||H(e.originalEvent.dataTransfer.files)||(this._change(e,"dragdrop"),this.$dropZone.removeClass("file-highlighted"))},_uploadClick:function(e){var t,i=this.$container.find(".fileinput-upload"),n=!i.hasClass("disabled")&&H(i.attr("disabled"));e&&e.isDefaultPrevented()||(this.isUploadable?(e.preventDefault(),n&&this.upload()):n&&"submit"!==i.attr("type")&&((t=i.closest("form")).length&&t.trigger("submit"),e.preventDefault()))},_submitForm:function(){var e=this,t=e.$element.get(0).files;return t&&0<e.minFileCount&&e._getFileCount(t.length)<e.minFileCount?(e._noFilesError({}),!1):!e._abort({})},_clearPreview:function(){var e=this;(e.showUploadedThumbs?e.$preview.find(".file-preview-frame:not(.file-preview-success)"):e.$preview.find(".file-preview-frame")).remove(),e.$preview.find(".file-preview-frame").length&&e.showPreview||e._resetUpload(),e._validateDefaultPreview()},_initSortable:function(){var e,t,s=this,i=s.$preview;window.KvSortable&&(t={handle:".drag-handle-init",dataIdAttr:"data-preview-id",draggable:".file-preview-initial",onSort:function(e){var t=e.oldIndex,i=e.newIndex;s.initialPreview=S(s.initialPreview,t,i),s.initialPreviewConfig=S(s.initialPreviewConfig,t,i),k.init(s);for(var n=0;n<s.initialPreviewConfig.length;n++)if(null!==s.initialPreviewConfig[n]){var a=s.initialPreviewConfig[n].key,o=L(".kv-file-remove[data-key='"+a+"']");(o=o.closest(".file-preview-frame")).attr("data-fileindex","init_"+n),o.data("fileindex","init_"+n)}s._raise("filesorted",{previewId:L(e.item).attr("id"),oldIndex:t,newIndex:i,stack:s.initialPreviewConfig})}},(e=i.find(".file-initial-thumbs")).data("kvsortable")&&e.kvsortable("destroy"),L.extend(!0,t,s.fileActionSettings.dragSettings),e.kvsortable(t))},_initPreview:function(e){var t,i=this,n=i.initialCaption||"";if(!k.count(i.id))return i._clearPreview(),void(e?i._setCaption(n):i._initCaption());t=k.out(i.id),n=e&&i.initialCaption?i.initialCaption:t.caption,i.$preview.html(t.content),i._setCaption(n),i._initSortable(),H(t.content)||i.$container.removeClass("file-input-new")},_getZoomButton:function(e){var t=this.previewZoomButtonIcons[e],i=this.previewZoomButtonClasses[e],n=' title="'+(this.previewZoomButtonTitles[e]||"")+'" '+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(n+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+i+" btn-"+e+'"'+n+">"+t+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").replace(/\{heading}/g,e.msgZoomModalHeading).replace(/\{prev}/g,e._getZoomButton("prev")).replace(/\{next}/g,e._getZoomButton("next")).replace(/\{toggleheader}/g,e._getZoomButton("toggleheader")).replace(/\{fullscreen}/g,e._getZoomButton("fullscreen")).replace(/\{borderless}/g,e._getZoomButton("borderless")).replace(/\{close}/g,e._getZoomButton("close"))},_listenModalEvent:function(n){var a=this,o=a.$modal;o.on(n+".bs.modal",function(e){var t=o.find(".btn-fullscreen"),i=o.find(".btn-borderless");a._raise("filezoom"+n,{sourceEvent:e,previewId:o.data("previewId"),modal:o}),"shown"===n&&(i.removeClass("active").attr("aria-pressed","false"),t.removeClass("active").attr("aria-pressed","false"),o.hasClass("file-zoom-fullscreen")&&(a._maximizeZoomDialog(),_()?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var e,t=this,i=t._getLayoutTemplate("modalMain");t.$modal=L("#kvFileinputModal"),t.$modal&&t.$modal.length||(e=L(document.createElement("div")).html(i).insertAfter(t.$container),t.$modal=L("#"+n).insertBefore(e),e.remove()),t.$modal.html(t._getModalContent()),t._listenModalEvent("show"),t._listenModalEvent("shown"),t._listenModalEvent("hide"),t._listenModalEvent("hidden"),t._listenModalEvent("loaded")},_initZoomButtons:function(){var e,t,i=this.$modal.data("previewId")||"",n=this.$preview.find(".file-preview-frame").toArray(),a=n.length,o=this.$modal.find(".btn-prev"),s=this.$modal.find(".btn-next");a&&(e=L(n[0]),t=L(n[a-1]),o.removeAttr("disabled"),s.removeAttr("disabled"),e.length&&e.attr("id")===i&&o.attr("disabled",!0),t.length&&t.attr("id")===i&&s.attr("disabled",!0))},_maximizeZoomDialog:function(){var e=this.$modal,t=e.find(".modal-header:visible"),i=e.find(".modal-footer:visible"),n=e.find(".modal-body"),a=L(window).height();e.addClass("file-zoom-fullscreen"),t&&t.length&&(a-=t.outerHeight(!0)),i&&i.length&&(a-=i.outerHeight(!0)),n&&n.length&&(a-=n.outerHeight(!0)-n.height()),e.find(".kv-zoom-body").height(a)},_resizeZoomDialog:function(e){var t=this,i=t.$modal,n=i.find(".btn-fullscreen"),a=i.find(".btn-borderless");if(i.hasClass("file-zoom-fullscreen"))D(!1),e?n.hasClass("active")||(i.removeClass("file-zoom-fullscreen"),t._resizeZoomDialog(!0),a.hasClass("active")&&a.removeClass("active").attr("aria-pressed","false")):n.hasClass("active")?n.removeClass("active").attr("aria-pressed","false"):(i.removeClass("file-zoom-fullscreen"),t.$modal.find(".kv-zoom-body").css("height",t.zoomModalHeight));else{if(!e)return void t._maximizeZoomDialog();D(!0)}i.focus()},_setZoomContent:function(e,t){var i,n,a,o,s,r,l,d,c=this,h=e.attr("id"),u=c.$modal,p=u.find(".btn-prev"),f=u.find(".btn-next"),g=u.find(".btn-fullscreen"),m=u.find(".btn-borderless"),v=u.find(".btn-toggleheader");n=e.data("template")||"generic",a=(i=e.find(".kv-file-content")).length?i.html():"",o=e.find(".file-footer-caption").text()||"",u.find(".kv-zoom-title").html(o),s=u.find(".kv-zoom-body"),t?(d=s.clone().insertAfter(s),s.html(a).hide(),d.fadeOut("fast",function(){s.fadeIn("fast"),d.remove()})):s.html(a),(l=c.previewZoomSettings[n])&&(r=s.find(".kv-preview-data"),w(r,"file-zoom-detail"),L.each(l,function(e,t){r.css(e,t),(r.attr("width")&&"width"===e||r.attr("height")&&"height"===e)&&r.removeAttr(e)})),u.data("previewId",h),b(p,"click",function(){c._zoomSlideShow("prev",h)}),b(f,"click",function(){c._zoomSlideShow("next",h)}),b(g,"click",function(){c._resizeZoomDialog(!0)}),b(m,"click",function(){c._resizeZoomDialog(!1)}),b(v,"click",function(){var e,n=u.find(".modal-header"),t=u.find(".modal-body .floating-buttons"),i=n.find(".kv-zoom-actions"),a=function(e){var t=c.$modal.find(".kv-zoom-body"),i=c.zoomModalHeight;u.hasClass("file-zoom-fullscreen")&&(i=t.outerHeight(!0),e||(i-=n.outerHeight(!0))),t.css("height",e?i+e:i)};n.is(":visible")?(e=n.outerHeight(!0),n.slideUp("slow",function(){i.find(".btn").appendTo(t),a(e)})):(t.find(".btn").appendTo(i),n.slideDown("slow",function(){a()})),u.focus()}),b(u,"keydown",function(e){var t=e.which||e.keyCode;37!==t||p.attr("disabled")||c._zoomSlideShow("prev",h),39!==t||f.attr("disabled")||c._zoomSlideShow("next",h)})},_zoomPreview:function(e){var t,i=this;if(!e.length)throw"Cannot zoom to detailed preview!";i.$modal.html(i._getModalContent()),t=e.closest(".file-preview-frame"),i._setZoomContent(t),i.$modal.modal("show"),i._initZoomButtons()},_zoomSlideShow:function(e,t){var i,n,a,o=this,s=o.$modal.find(".kv-zoom-actions .btn-"+e),r=o.$preview.find(".file-preview-frame").toArray(),l=r.length;if(!s.attr("disabled")){for(n=0;n<l;n++)if(L(r[n]).attr("id")===t){a="prev"===e?n-1:n+1;break}a<0||l<=a||!r[a]||((i=L(r[a])).length&&o._setZoomContent(i,!0),o._initZoomButtons(),o._raise("filezoom"+e,{previewId:t,modal:o.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var e=L(this);b(e,"click",function(){t._zoomPreview(e)})})},_initPreviewActions:function(){var h=this,a=h.deleteExtraData||{},u=function(){var e=h.isUploadable?k.count(h.id):h.$element.get(0).files.length;0!==h.$preview.find(".kv-file-remove").length||e||(h.reset(),h.initialCaption="")};h._initZoomButton(),h.$preview.find(".kv-file-remove").each(function(){var o=L(this),e=o.data("url")||h.deleteUrl,s=o.data("key");if(!H(e)&&void 0!==s){var t,r,i,l,d=o.closest(".file-preview-frame"),n=k.data[h.id],c=d.data("fileindex");c=parseInt(c.replace("init_","")),i=H(n.config)&&H(n.config[c])?null:n.config[c],"function"==typeof(l=H(i)||H(i.extra)?a:i.extra)&&(l=l()),r={id:o.attr("id"),key:s,extra:l},t=L.extend(!0,{},{url:e,type:"POST",dataType:"json",data:L.extend(!0,{},{key:s},l),beforeSend:function(e){h.ajaxAborted=!1,h._raise("filepredelete",[s,e,l]),h.ajaxAborted?e.abort():(w(d,"file-uploading"),w(o,"disabled"))},success:function(e,t,i){var n,a;if(!H(e)&&!H(e.error))return r.jqXHR=i,r.response=e,h._showError(e.error,r,"filedeleteerror"),d.removeClass("file-uploading"),o.removeClass("disabled"),void u();k.init(h),c=parseInt(d.data("fileindex").replace("init_","")),k.unset(h,c),a=0<(n=k.count(h.id))?h._getMsgSelected(n):"",h._raise("filedeleted",[s,i,l]),h._setCaption(a),d.removeClass("file-uploading").addClass("file-deleted"),d.fadeOut("slow",function(){h._clearObjects(d),d.remove(),u(),n||0!==h.getFileStack().length||(h._setCaption(""),h.reset())})},error:function(e,t,i){var n=h._parseError(e,i);r.jqXHR=e,r.response={},h._showError(n,r,"filedeleteerror"),d.removeClass("file-uploading"),u()}},h.ajaxDeleteSettings),b(o,"click",function(){if(!h._validateMinCount())return!1;L.ajax(t)})}})},_clearObjects:function(e){e.find("video audio").each(function(){this.pause(),L(this).remove()}),e.find("img object div").each(function(){L(this).remove()})},_clearFileInput:function(){var e,t,i,n=this.$element;this.fileInputCleared=!0,H(n.val())||(this.isIE9||this.isIE10?(e=n.closest("form"),t=L(document.createElement("form")),i=L(document.createElement("div")),n.before(i),e.length?e.after(t):i.after(t),t.append(n).trigger("reset"),i.before(n).remove(),t.remove()):n.val(""))},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),w(e.$progress,"hide"),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas()},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&k.count(this.id)},_resetPreview:function(){var e,t,i=this;k.count(i.id)?(e=k.out(i.id),i.$preview.html(e.content),t=i.initialCaption?i.initialCaption:e.caption,i._setCaption(t)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!H(e.defaultPreviewContent)&&(e.$preview.html('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,i=this;if(e)return i._clearPreview(),void i.clearStack();i._hasInitialPreview()?(t=k.out(i.id),i.$preview.html(t.content),i._setCaption(t.caption),i._initPreviewActions()):i._clearPreview()},_getLayoutTemplate:function(e){var t=V(e,this.layoutTemplates,f[e]);return H(this.customLayoutTags)?t:x(t,this.customLayoutTags)},_getPreviewTemplate:function(e){var t=V(e,this.previewTemplates,g[e]);return H(this.customPreviewTags)?t:x(t,this.customPreviewTags)},_getOutData:function(e,t,i){var n=this;return e=e||{},t=t||{},i=i||n.filestack.slice(0)||{},{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=1===e?this.fileSingle:this.filePlural;return 0<e?this.msgSelected.replace("{n}",e).replace("{files}",t):this.msgNoFilesSelected},_getThumbs:function(e){return e=e||"",this.$preview.find(".file-preview-frame:not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this.uploadExtraData;return"function"==typeof this.uploadExtraData&&(i=this.uploadExtraData(e,t)),i},_initXhr:function(e,a,o){var s=this;return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,i=e.total,n=e.loaded||e.position;e.lengthComputable&&(t=Math.floor(n/i*100)),a?s._setAsyncUploadStatus(a,t,o):s._setProgress(t)},!1),e},_ajaxSubmit:function(e,t,i,n,a,o){var s,r=this;r._raise("filepreajax",[a,o]),r._uploadExtra(a,o),s=L.extend(!0,{},{xhr:function(){var e=L.ajaxSettings.xhr();return r._initXhr(e,a,r.getFileStack().length)},url:r.uploadUrl,type:"POST",dataType:"json",data:r.formdata,cache:!1,processData:!1,contentType:!1,beforeSend:e,success:t,complete:i,error:n},r.ajaxSettings),r.ajaxRequests.push(L.ajax(s))},_initUploadSuccess:function(e,t,i){var n,a,o,s,r,l,d,c,h=this,u=function(e,t){h[e]instanceof Array||(h[e]=[]),t&&t.length&&(h[e]=h[e].concat(t))};h.showPreview&&"object"==typeof e&&!L.isEmptyObject(e)&&void 0!==e.initialPreview&&0<e.initialPreview.length&&(h.hasInitData=!0,r=e.initialPreview||[],l=e.initialPreviewConfig||[],d=e.initialPreviewThumbTags||[],n=!(void 0!==e.append&&!e.append),0<r.length&&!B(r)&&(r=r.split(h.initialPreviewDelimiter)),h.overwriteInitial=!1,u("initialPreview",r),u("initialPreviewConfig",l),u("initialPreviewThumbTags",d),void 0!==t?i?(c=t.attr("data-fileindex"),h.uploadCache.content[c]=r[0],h.uploadCache.config[c]=l[0]||[],h.uploadCache.tags[c]=d[0]||[],h.uploadCache.append=n):(o=k.add(h.id,r,l[0],d[0],n),a=k.get(h.id,o,!1),s=L(a).hide(),t.after(s).fadeOut("slow",function(){s.fadeIn("slow").css("display:inline-block"),h._initPreviewActions(),h._clearFileInput(),t.remove()})):(k.set(h.id,r,l,d,n),h._initPreview(),h._initPreviewActions()))},_initSuccessThumbs:function(){var i=this;i.showPreview&&i._getThumbs(".file-preview-success").each(function(){var t=L(this),e=t.find(".kv-file-remove");e.removeAttr("disabled"),b(e,"click",function(){var e=i._raise("filesuccessremove",[t.attr("id"),t.data("fileindex")]);N(t),!1!==e&&t.fadeOut("slow",function(){t.remove(),i.$preview.find(".file-preview-frame").length||i.reset()})})})},_checkAsyncComplete:function(){var e,t,i=this;for(t=0;t<i.filestack.length;t++)if(i.filestack[t]&&(e=i.previewInitId+"-"+t,-1===L.inArray(e,i.uploadLog)))return!1;return i.uploadAsyncCount===i.uploadLog.length},_uploadExtra:function(e,t){var i=this,n=i._getExtraData(e,t);0!==n.length&&L.each(n,function(e,t){i.formdata.append(e,t)})},_uploadSingle:function(a,o,s){var r,l,e,d,t,i,n,c,h,u,p=this,f=p.getFileStack().length,g=new FormData,m=p.previewInitId+"-"+a,v=0<p.filestack.length||!L.isEmptyObject(p.uploadExtraData),b={id:m,index:a};p.formdata=g,p.showPreview&&(l=L("#"+m+":not(.file-preview-initial)"),d=l.find(".kv-file-upload"),t=l.find(".kv-file-remove"),L("#"+m).find(".file-thumb-progress").removeClass("hide")),0===f||!v||d&&d.hasClass("disabled")||p._abort(b)||(u=function(e,t){p.updateStack(e,void 0),p.uploadLog.push(t),p._checkAsyncComplete()&&(p.fileBatchCompleted=!0)},e=function(){var e=p.uploadCache;p.fileBatchCompleted&&setTimeout(function(){p.showPreview&&(k.set(p.id,e.content,e.config,e.tags,e.append),p.hasInitData&&(p._initPreview(),p._initPreviewActions())),p.unlock(),p._clearFileInput(),p._raise("filebatchuploadcomplete",[p.filestack,p._getExtraData()]),p.uploadCount=0,p.uploadStatus={},p.uploadLog=[],p._setProgress(101)},100)},i=function(e){r=p._getOutData(e),p.fileBatchCompleted=!1,p.showPreview&&(l.hasClass("file-preview-success")||(p._setThumbStatus(l,"Loading"),w(l,"file-uploading")),d.attr("disabled",!0),t.attr("disabled",!0)),s||p.lock(),p._raise("filepreupload",[r,m,a]),L.extend(!0,b,r),p._abort(b)&&(e.abort(),p._setProgressCancelled())},n=function(e,t,i){var n=p.showPreview&&l.attr("id")?l.attr("id"):m;r=p._getOutData(i,e),L.extend(!0,b,r),setTimeout(function(){H(e)||H(e.error)?(p.showPreview&&(p._setThumbStatus(l,"Success"),d.hide(),p._initUploadSuccess(e,l,s)),p._raise("fileuploaded",[r,n,a]),s?u(a,n):p.updateStack(a,void 0)):(p._showUploadError(e.error,b),p._setPreviewError(l,a),s&&u(a,n))},100)},c=function(){setTimeout(function(){p.showPreview&&(d.removeAttr("disabled"),t.removeAttr("disabled"),l.removeClass("file-uploading"),p._setProgress(101,L("#"+m).find(".file-thumb-progress"))),s?e():(p.unlock(!1),p._clearFileInput()),p._initSuccessThumbs()},100)},h=function(e,t,i){var n=p._parseError(e,i,s?o[a].name:null);setTimeout(function(){s&&u(a,m),p.uploadStatus[m]=100,p._setPreviewError(l,a),L.extend(!0,b,p._getOutData(e)),p._showUploadError(n,b)},100)},g.append(p.uploadFileAttr,o[a],p.filenames[a]),g.append("file_id",a),p._ajaxSubmit(i,n,c,h,m,a))},_uploadBatch:function(){var e,t,i,n,r,l=this,a=l.filestack,o=a.length,s=0<l.filestack.length||!L.isEmptyObject(l.uploadExtraData);l.formdata=new FormData,0!==o&&s&&!l._abort({})&&(r=function(){L.each(a,function(e){l.updateStack(e,void 0)}),l._clearFileInput()},e=function(e){l.lock();var t=l._getOutData(e);l.showPreview&&l._getThumbs().each(function(){var e=L(this),t=e.find(".kv-file-upload"),i=e.find(".kv-file-remove");e.hasClass("file-preview-success")||(l._setThumbStatus(e,"Loading"),w(e,"file-uploading")),t.attr("disabled",!0),i.attr("disabled",!0)}),l._raise("filebatchpreupload",[t]),l._abort(t)&&(e.abort(),l._setProgressCancelled())},t=function(e,t,i){var n=l._getOutData(i,e),a=l._getThumbs(":not(.file-preview-error)"),o=0,s=H(e)||H(e.errorkeys)?[]:e.errorkeys;H(e)||H(e.error)?(l._raise("filebatchuploadsuccess",[n]),r(),l.showPreview?(a.each(function(){var e=L(this),t=e.find(".kv-file-upload");e.find(".kv-file-upload").hide(),l._setThumbStatus(e,"Success"),e.removeClass("file-uploading"),t.removeAttr("disabled")}),l._initUploadSuccess(e)):l.reset()):(l.showPreview&&(a.each(function(){var e=L(this),t=e.find(".kv-file-remove"),i=e.find(".kv-file-upload");e.removeClass("file-uploading"),i.removeAttr("disabled"),t.removeAttr("disabled"),0!==s.length?(-1!==L.inArray(o,s)?l._setPreviewError(e):(e.find(".kv-file-upload").hide(),l._setThumbStatus(e,"Success"),l.updateStack(o,void 0)),o++):l._setPreviewError(e)}),l._initUploadSuccess(e)),l._showUploadError(e.error,n,"filebatchuploaderror"))},n=function(){l._setProgress(101),l.unlock(),l._initSuccessThumbs(),l._clearFileInput(),l._raise("filebatchuploadcomplete",[l.filestack,l._getExtraData()])},i=function(e,t,i){var n=l._getOutData(e),a=l._parseError(e,i);l._showUploadError(a,n,"filebatchuploaderror"),l.uploadFileCount=o-1,l.showPreview&&(l._getThumbs().each(function(){var e=L(this),t=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==l.filestack[t]&&l._setPreviewError(e)}),l._getThumbs().removeClass("file-uploading"),l._getThumbs(" .kv-file-upload").removeAttr("disabled"),l._getThumbs(" .kv-file-delete").removeAttr("disabled"))},L.each(a,function(e,t){H(a[e])||l.formdata.append(l.uploadFileAttr,t,l.filenames[e])}),l._ajaxSubmit(e,t,n,i))},_uploadExtraOnly:function(){var e,t,i,n,o=this,s={};o.formdata=new FormData,o._abort(s)||(e=function(e){o.lock();var t=o._getOutData(e);o._raise("filebatchpreupload",[t]),o._setProgress(50),s.data=t,s.xhr=e,o._abort(s)&&(e.abort(),o._setProgressCancelled())},t=function(e,t,i){var n=o._getOutData(i,e);H(e)||H(e.error)?(o._raise("filebatchuploadsuccess",[n]),o._clearFileInput(),o._initUploadSuccess(e)):o._showUploadError(e.error,n,"filebatchuploaderror")},i=function(){o._setProgress(101),o.unlock(),o._clearFileInput(),o._raise("filebatchuploadcomplete",[o.filestack,o._getExtraData()])},n=function(e,t,i){var n=o._getOutData(e),a=o._parseError(e,i);s.data=n,o._showUploadError(a,n,"filebatchuploaderror")},o._ajaxSubmit(e,t,i,n))},_initFileActions:function(){var c=this;c.showPreview&&(c._initZoomButton(),c.$preview.find(".kv-file-remove").each(function(){var a,o,s,e=L(this),r=e.closest(".file-preview-frame"),l=r.attr("id"),d=r.attr("data-fileindex");b(e,"click",function(){if(!1===c._raise("filepreremove",[l,d])||!c._validateMinCount())return!1;a=r.hasClass("file-preview-error"),N(r),r.fadeOut("slow",function(){c.updateStack(d,void 0),c._clearObjects(r),r.remove(),l&&a&&c.$errorContainer.find('li[data-file-id="'+l+'"]').fadeOut("fast",function(){L(this).remove(),c._errorsExist()||c._resetErrors()}),c._clearFileInput();var e=c.getFileStack(!0),t=k.count(c.id),i=e.length,n=c.showPreview&&c.$preview.find(".file-preview-frame").length;0!==i||0!==t||n?(s=1<(o=t+i)?c._getMsgSelected(o):e[0]?c._getFileNames()[0]:"",c._setCaption(s)):c.reset(),c._raise("fileremoved",[l,d])})})}),c.$preview.find(".kv-file-upload").each(function(){var i=L(this);b(i,"click",function(){var e=i.closest(".file-preview-frame"),t=e.attr("data-fileindex");e.hasClass("file-preview-error")||c._uploadSingle(t,c.filestack,!1)})}))},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.find(".kv-caption-icon").hide()},_showFileIcon:function(){this.$captionContainer.find(".kv-caption-icon").show()},_getSize:function(e){var t=parseFloat(e);if(!e||!t||isNaN(e)||isNaN(t))return this._getLayoutTemplate("size").replace("{sizeText}","0.00 KB");var i,n,a,o=this.fileSizeGetter;return a="function"==typeof o?o(e):(i=Math.floor(Math.log(t)/Math.log(1024)),n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],1*(t/Math.pow(1024,i)).toFixed(2)+" "+n[i]),this._getLayoutTemplate("size").replace("{sizeText}",a)},_generatePreviewTemplate:function(e,t,i,n,a,o,s,r,l,d){var c,h=this,u=h._getPreviewTemplate(e),p=r||"",f=V(e,h.previewSettings,C[e]),g=h.slug(i),m=l||h._renderFileFooter(g,s,f.width,o);return d=d||a.slice(a.lastIndexOf("-")+1),u=h._parseFilePreviewIcon(u,i),"text"===e||"html"===e?(c="text"===e?Y(t):t,u.replace(/\{previewId}/g,a).replace(/\{caption}/g,g).replace(/\{width}/g,f.width).replace(/\{height}/g,f.height).replace(/\{frameClass}/g,p).replace(/\{cat}/g,n).replace(/\{footer}/g,m).replace(/\{fileindex}/g,d).replace(/\{data}/g,c).replace(/\{template}/g,e)):u.replace(/\{previewId}/g,a).replace(/\{caption}/g,g).replace(/\{frameClass}/g,p).replace(/\{type}/g,n).replace(/\{fileindex}/g,d).replace(/\{width}/g,f.width).replace(/\{height}/g,f.height).replace(/\{footer}/g,m).replace(/\{data}/g,t).replace(/\{template}/g,e)},_previewDefault:function(e,t,i){var n=this,a=n.$preview,o=a.find(".file-live-thumbs");if(n.showPreview){var s,r=e?e.name:"",l=e?e.type:"",d=!0===i&&!n.isUploadable,c=U.createObjectURL(e);n._clearDefaultPreview(),s=n._generatePreviewTemplate("other",c,r,l,t,d,e.size),o.length||(o=L(document.createElement("div")).addClass("file-live-thumbs").appendTo(a)),o.append("\n"+s),!0===i&&n.isUploadable&&n._setThumbStatus(L("#"+t),"Error")}},_previewFile:function(e,t,i,n,a){if(this.showPreview){var o,s=this,r=s._parseFileType(t),l=t?t.name:"",d=s.slug(l),c=s.allowedPreviewTypes,h=s.allowedPreviewMimeTypes,u=s.$preview,p=c&&0<=c.indexOf(r),f=u.find(".file-live-thumbs"),g="text"===r||"html"===r||"image"===r?i.target.result:a,m=h&&-1!==h.indexOf(t.type);f.length||(f=L(document.createElement("div")).addClass("file-live-thumbs").appendTo(u)),"html"===r&&s.purifyHtml&&window.DOMPurify&&(g=window.DOMPurify.sanitize(g)),p||m?(o=s._generatePreviewTemplate(r,g,l,t.type,n,!1,t.size),s._clearDefaultPreview(),f.append("\n"+o),s._validateImage(e,n,d,t.type)):s._previewDefault(t,n),s._initSortable()}},_slugDefault:function(e){return H(e)?"":String(e).replace(/[\-\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_readFiles:function(y){this.reader=new FileReader;var C,k=this,T=k.$element,x=k.$preview,N=k.reader,E=k.$previewContainer,_=k.$previewStatus,D=k.msgLoading,S=k.msgProgress,I=k.previewInitId,$=y.length,P=k.fileTypeSettings,F=k.filestack.length,A=k.maxFilePreviewSize&&parseFloat(k.maxFilePreviewSize),O=x.length&&(!A||isNaN(A)),M=function(e,t,i,n){var a=L.extend(!0,{},k._getOutData({},{},y),{id:i,index:n}),o={id:i,index:n,file:t,files:y};return k._previewDefault(t,i,!0),k.isUploadable&&(k.addToStack(void 0),setTimeout(function(){C(n+1)},100)),k._initFileActions(),k.removeFromPreviewOnError&&L("#"+i).remove(),k.isUploadable?k._showUploadError(e,a):k._showError(e,o)};k.loadedImages=[],k.totalImagesCount=0,L.each(y,function(e,t){var i=k.fileTypeSettings.image||j.image;i&&i(t.type)&&k.totalImagesCount++}),(C=function(n){if(H(T.attr("multiple"))&&($=1),$<=n)return k.isUploadable&&0<k.filestack.length?k._raise("filebatchselected",[k.getFileStack()]):k._raise("filebatchselected",[y]),E.removeClass("file-thumb-loading"),void _.html("");var e,t,i,a,o,s,r,l,d=I+"-"+(F+n),c=y[n],h=c.name?k.slug(c.name):"",u=(c.size||0)/1e3,p="",f=U.createObjectURL(c),g=0,m=k.allowedFileTypes,v=H(m)?"":m.join(", "),b=k.allowedFileExtensions,w=H(b)?"":b.join(", ");if(!1!==h){if(0===h.length)return s=k.msgInvalidFileName.replace("{name}",Y(c.name)),void(k.isError=M(s,c,d,n));if(H(b)||(p=new RegExp("\\.("+b.join("|")+")$","i")),i=u.toFixed(2),0<k.maxFileSize&&u>k.maxFileSize)return s=k.msgSizeTooLarge.replace("{name}",h).replace("{size}",i).replace("{maxSize}",k.maxFileSize),void(k.isError=M(s,c,d,n));if(null!==k.minFileSize&&u<=z(k.minFileSize))return s=k.msgSizeTooSmall.replace("{name}",h).replace("{size}",i).replace("{minSize}",k.minFileSize),void(k.isError=M(s,c,d,n));if(!H(m)&&B(m)){for(o=0;o<m.length;o+=1)r=m[o],l=void 0!==(a=P[r])&&a(c.type,h),g+=H(l)?0:l.length;if(0===g)return s=k.msgInvalidFileType.replace("{name}",h).replace("{types}",v),void(k.isError=M(s,c,d,n))}if(0===g&&!H(b)&&B(b)&&!H(p)&&(l=R(h,p),0===(g+=H(l)?0:l.length)))return s=k.msgInvalidFileExtension.replace("{name}",h).replace("{extensions}",w),void(k.isError=M(s,c,d,n));if(!k.showPreview)return k.addToStack(c),setTimeout(function(){C(n+1)},100),void k._raise("fileloaded",[c,d,n,N]);if(!O&&A<u)return k.addToStack(c),E.addClass("file-thumb-loading"),k._previewDefault(c,d),k._initFileActions(),k._updateFileDetails($),void C(n+1);x.length&&void 0!==FileReader?(_.html(D.replace("{index}",n+1).replace("{files}",$)),E.addClass("file-thumb-loading"),N.onerror=function(e){k._errorHandler(e,h)},N.onload=function(e){k._previewFile(n,c,e,d,f),k._initFileActions()},N.onloadend=function(){s=S.replace("{index}",n+1).replace("{files}",$).replace("{percent}",50).replace("{name}",h),setTimeout(function(){_.html(s),k._updateFileDetails($),C(n+1)},100),k._raise("fileloaded",[c,d,n,N])},N.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);s=S.replace("{index}",n+1).replace("{files}",$).replace("{percent}",i).replace("{name}",h),setTimeout(function(){_.html(s)},100)}},e=V("text",P,j.text),t=V("image",P,j.image),e(c.type,h)?N.readAsText(c,k.textEncoding):t(c.type,h)?N.readAsDataURL(c):N.readAsArrayBuffer(c)):(k._previewDefault(c,d),setTimeout(function(){C(n+1),k._updateFileDetails($)},100),k._raise("fileloaded",[c,d,n,N])),k.addToStack(c)}else C(n+1)})(0),k._updateFileDetails($,!1)},_updateFileDetails:function(e){var t=this,i=t.$element,n=t.getFileStack(),a=h(9)&&E(i.val())||i[0].files[0]&&i[0].files[0].name||n.length&&n[0].name||"",o=t.slug(a),s=t.isUploadable?n.length:e,r=k.count(t.id)+s,l=1<s?t._getMsgSelected(r):o;t.isError?(t.$previewContainer.removeClass("file-thumb-loading"),t.$previewStatus.html(""),t.$captionContainer.find(".kv-caption-icon").hide()):t._showFileIcon(),t._setCaption(l,t.isError),t.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&t._raise("fileselect",[e,o]),k.count(t.id)&&t._initPreviewActions()},_setThumbStatus:function(e,t){if(this.showPreview){var i="indicator"+t,n=i+"Title",a="file-preview-"+t.toLowerCase(),o=e.find(".file-upload-indicator"),s=this.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Error"===t&&e.find(".kv-file-upload").attr("disabled",!0),"Success"===t&&(e.find(".file-drag-handle").remove(),o.css("margin-left",0)),o.html(s[i]),o.attr("title",s[n]),e.addClass(a)}},_setProgressCancelled:function(){this._setProgress(101,this.$progress,this.msgCancelled)},_setProgress:function(e,t,i){var n=this,a=Math.min(e,100),o=a<100?n.progressTemplate:i?n.progressErrorTemplate:e<=100?n.progressTemplate:n.progressCompleteTemplate,s=n.progressUploadThreshold;if(t=t||n.$progress,!H(o)){if(s&&s<a&&e<=100){var r=o.replace("{percent}",s).replace("{percent}",s).replace("{percent}%",n.msgUploadThreshold);t.html(r)}else t.html(o.replace(/\{percent}/g,a));i&&t.find('[role="progressbar"]').html(i)}},_setFileDropZoneTitle:function(){var e,t=this,i=t.$container.find(".file-drop-zone"),n=t.dropZoneTitle;t.isClickable&&(e=H(t.$element.attr("multiple"))?t.fileSingle:t.filePlural,n+=t.dropZoneClickTitle.replace("{files}",e)),i.find("."+t.dropZoneTitleClass).remove(),t.isUploadable&&t.showPreview&&0!==i.length&&!(0<t.getFileStack().length)&&t.dropZoneEnabled&&(0===i.find(".file-preview-frame").length&&H(t.defaultPreviewContent)&&i.prepend('<div class="'+t.dropZoneTitleClass+'">'+n+"</div>"),t.$container.removeClass("file-input-new"),w(t.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(e,t,i){var n=0;this._setProgress(t,L("#"+e).find(".file-thumb-progress")),this.uploadStatus[e]=t,L.each(this.uploadStatus,function(e,t){n+=t}),this._setProgress(Math.floor(n/i))},_validateMinCount:function(){var e=this,t=e.isUploadable?e.getFileStack().length:e.$element.get(0).files.length;return!(e.validateInitialCount&&0<e.minFileCount&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){return this.validateInitialCount&&!this.overwriteInitial&&(e+=k.count(this.id)),e},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileNames:function(t){return this.filenames.filter(function(e){return t?void 0!==e:null!=e})},_setPreviewError:function(e,t,i){void 0!==t&&this.updateStack(t,i),this.removeFromPreviewOnError?e.remove():this._setThumbStatus(e,"Error")},_checkDimensions:function(e,t,i,n,a,o,s){var r,l,d,c=this[("Small"===t?"min":"max")+"Image"+o];!H(c)&&i.length&&(d=i[0],l="Width"===o?d.naturalWidth||d.width:d.naturalHeight||d.height,("Small"===t?c<=l:l<=c)||(r=this["msgImage"+o+t].replace("{name}",a).replace("{size}",c),this._showUploadError(r,s),this._setPreviewError(n,e,null)))},_validateImage:function(e,t,i,n){var a,o,s=this,r=s.$preview,l=r.find("#"+t),d=l.find("img");i=i||"Untitled",d.length&&b(d,"load",function(){o=l.width(),r.width()<o&&(d.css("width","100%"),l.css("width","97%")),a={ind:e,id:t},s._checkDimensions(e,"Small",d,l,i,"Width",a),s._checkDimensions(e,"Small",d,l,i,"Height",a),s.resizeImage||(s._checkDimensions(e,"Large",d,l,i,"Width",a),s._checkDimensions(e,"Large",d,l,i,"Height",a)),s._raise("fileimageloaded",[t]),s.loadedImages.push({ind:e,img:d,thumb:l,pid:t,typ:n}),s._validateAllImages()})},_validateAllImages:function(){var e,t,i,n,a,o,s,r=this,l={};if(r.loadedImages.length===r.totalImagesCount&&(r._raise("fileimagesloaded"),r.resizeImage)){s=r.isUploadable?r._showUploadError:r._showError;var d={val:0};for(e=0;e<r.loadedImages.length;e++)i=(t=r.loadedImages[e]).img,n=t.thumb,l={id:a=t.pid,index:o=t.ind},r._getResizedImage(i[0],t.typ,a,o,d,r.loadedImages.length)||(s(r.msgImageResizeError,l,"fileimageresizeerror"),r._setPreviewError(n,o))}},_getResizedImage:function(e,t,i,n,a,o){var s,r,l=this,d=e.naturalWidth,c=e.naturalHeight,h=1,u=l.maxImageWidth||d,p=l.maxImageHeight||c,f=d&&c,g=l.imageCanvas,m=l.imageCanvasContext;if(!f)return a.val++,a.val===o&&l._raise("fileimagesresized"),!1;if(d===u&&c===p)return l._raise("fileimageresized",[i,n]),a.val++,a.val===o&&l._raise("fileimagesresized"),!0;t=t||l.resizeDefaultImageType,s=u<d,r=p<c,h="width"===l.resizePreference?s?u/d:r?p/c:1:r?p/c:s?u/d:1,l._resetCanvas(),d*=h,c*=h,g.width=d,g.height=c;try{return m.drawImage(e,0,0,d,c),g.toBlob(function(e){l.filestack[n]=e,l._raise("fileimageresized",[i,n]),a.val++,a.val===o&&l._raise("fileimagesresized",[void 0,void 0])},t,l.resizeQuality),!0}catch(e){return a.val++,a.val===o&&l._raise("fileimagesresized",[void 0,void 0]),!1}},_initBrowse:function(e){var t=this;t.showBrowse?(t.$btnFile=e.find(".btn-file"),t.$btnFile.append(t.$element)):t.$element.hide()},_initCaption:function(){var e=this.initialCaption||"";return this.overwriteInitial||H(e)?(this.$caption.html(""),!1):(this._setCaption(e),!0)},_setCaption:function(e,t){var i,n,a,o,s=this,r=s.getFileStack();if(s.$caption.length){if(t)i=L("<div>"+s.msgValidationError+"</div>").text(),o=(a=r.length)?1===a&&r[0]?s._getFileNames()[0]:s._getMsgSelected(a):s._getMsgSelected(s.msgNo),n='<span class="'+s.msgValidationErrorClass+'">'+s.msgValidationErrorIcon+(H(e)?o:e)+"</span>";else{if(H(e))return;i=L("<div>"+e+"</div>").text(),n=s._getLayoutTemplate("fileIcon")+i}s.$caption.html(n),s.$caption.attr("title",i),s.$captionContainer.find(".file-caption-ellipsis").attr("title",i)}},_createContainer:function(){var e=this,t=L(document.createElement("div")).attr({class:"file-input file-input-new"}).html(e._renderMain());return e.noRadius&&t.addClass("no-radius"),e.$element.before(t),e._initBrowse(t),e.theme&&t.addClass("theme-"+e.theme),t},_refreshContainer:function(){var e=this.$container;e.before(this.$element),e.html(this._renderMain()),this._initBrowse(e)},_renderMain:function(){var e=this,t=e.isUploadable&&e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=e.showClose?e._getLayoutTemplate("close"):"",n=e.showPreview?e._getLayoutTemplate("preview").replace(/\{class}/g,e.previewClass).replace(/\{dropClass}/g,t):"",a=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,o=e.captionTemplate.replace(/\{class}/g,a+" kv-fileinput-caption");return e.mainTemplate.replace(/\{class}/g,e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":"")).replace(/\{preview}/g,n).replace(/\{close}/g,i).replace(/\{caption}/g,o).replace(/\{upload}/g,e._renderButton("upload")).replace(/\{remove}/g,e._renderButton("remove")).replace(/\{cancel}/g,e._renderButton("cancel")).replace(/\{browse}/g,e._renderButton("browse"))},_renderButton:function(e){var t=this,i=t._getLayoutTemplate("btnDefault"),n=t[e+"Class"],a=t[e+"Title"],o=t[e+"Icon"],s=t[e+"Label"],r=t.isDisabled?" disabled":"",l="button";switch(e){case"remove":if(!t.showRemove)return"";break;case"cancel":if(!t.showCancel)return"";n+=" hide";break;case"upload":if(!t.showUpload)return"";t.isUploadable&&!t.isDisabled?i=t._getLayoutTemplate("btnLink").replace("{href}",t.uploadUrl):l="submit";break;case"browse":if(!t.showBrowse)return"";i=t._getLayoutTemplate("btnBrowse");break;default:return""}return n+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",H(s)||(s=' <span class="'+t.buttonLabelClass+'">'+s+"</span>"),i.replace("{type}",l).replace("{css}",n).replace("{title}",a).replace("{status}",r).replace("{icon}",o).replace("{label}",s)},_renderThumbProgress:function(){return'<div class="file-thumb-progress hide">'+this.progressTemplate.replace(/\{percent}/g,"0")+"</div>"},_renderFileFooter:function(e,t,i,n){var a,o=this,s=o.fileActionSettings,r=s.showRemove,l=s.showDrag,d=s.showUpload,c=s.showZoom,h=o._getLayoutTemplate("footer"),u=n?s.indicatorError:s.indicatorNew,p=n?s.indicatorErrorTitle:s.indicatorNewTitle;return t=o._getSize(t),a=o.isUploadable?h.replace(/\{actions}/g,o._renderFileActions(d,r,c,l,!1,!1,!1)).replace(/\{caption}/g,e).replace(/\{size}/g,t).replace(/\{width}/g,i).replace(/\{progress}/g,o._renderThumbProgress()).replace(/\{indicator}/g,u).replace(/\{indicatorTitle}/g,p):h.replace(/\{actions}/g,o._renderFileActions(!1,!1,c,l,!1,!1,!1)).replace(/\{caption}/g,e).replace(/\{size}/g,t).replace(/\{width}/g,i).replace(/\{progress}/g,"").replace(/\{indicator}/g,u).replace(/\{indicatorTitle}/g,p),a=x(a,o.previewThumbTags)},_renderFileActions:function(e,t,i,n,a,o,s,r){if(!(e||t||i||n))return"";var l,d=this,c=!1===o?"":' data-url="'+o+'"',h=!1===s?"":' data-key="'+s+'"',u="",p="",f="",g="",m=d._getLayoutTemplate("actions"),v=d.fileActionSettings,b=d.otherActionButtons.replace(/\{dataKey}/g,h),w=a?v.removeClass+" disabled":v.removeClass;return t&&(u=d._getLayoutTemplate("actionDelete").replace(/\{removeClass}/g,w).replace(/\{removeIcon}/g,v.removeIcon).replace(/\{removeTitle}/g,v.removeTitle).replace(/\{dataUrl}/g,c).replace(/\{dataKey}/g,h)),e&&(p=d._getLayoutTemplate("actionUpload").replace(/\{uploadClass}/g,v.uploadClass).replace(/\{uploadIcon}/g,v.uploadIcon).replace(/\{uploadTitle}/g,v.uploadTitle)),i&&(f=d._getLayoutTemplate("actionZoom").replace(/\{zoomClass}/g,v.zoomClass).replace(/\{zoomIcon}/g,v.zoomIcon).replace(/\{zoomTitle}/g,v.zoomTitle)),n&&r&&(l="drag-handle-init "+v.dragClass,g=d._getLayoutTemplate("actionDrag").replace(/\{dragClass}/g,l).replace(/\{dragTitle}/g,v.dragTitle).replace(/\{dragIcon}/g,v.dragIcon)),m.replace(/\{delete}/g,u).replace(/\{upload}/g,p).replace(/\{zoom}/g,f).replace(/\{drag}/g,g).replace(/\{other}/g,b)},_browse:function(e){var t=this;t._raise("filebrowse"),e&&e.isDefaultPrevented()||(t.isError&&!t.isUploadable&&t.clear(),t.$captionContainer.focus())},_change:function(e){var t=this,i=t.$element;if(!t.isUploadable&&H(i.val())&&t.fileInputCleared)t.fileInputCleared=!1;else{t.fileInputCleared=!1;var n,a,o,s,r,l,d,c,h,u,p,f,g=1<arguments.length,m=t.isUploadable,v=0,b=g?e.originalEvent.dataTransfer.files:i.get(0).files,w=t.filestack.length,y=H(i.attr("multiple"))&&0<w,C=0;if(t.reader=null,t._resetUpload(),t._hideFileIcon(),t.isUploadable&&t.$container.find(".file-drop-zone ."+t.dropZoneTitleClass).remove(),g)for(n=[];b[v];)(s=b[v]).type||s.size%4096!=0?n.push(s):C++,v++;else n=void 0===e.target.files?e.target&&e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files;if(H(n)||0===n.length)return m||t.clear(),t._showFolderError(C),void t._raise("fileselectnone");if(t._resetErrors(),l=n.length,o=t._getFileCount(t.isUploadable?t.getFileStack().length+l:l),0<t.maxFileCount&&o>t.maxFileCount){if(!t.autoReplace||l>t.maxFileCount)return r=t.autoReplace&&l>t.maxFileCount?l:o,a=t.msgFilesTooMany.replace("{m}",t.maxFileCount).replace("{n}",r),t.isError=(d=a,u=h=c=null,p=L.extend(!0,{},t._getOutData({},{},b),{id:h,index:u}),f={id:h,index:u,file:c,files:b},t.isUploadable?t._showUploadError(d,p):t._showError(d,f)),t.$captionContainer.find(".kv-caption-icon").hide(),t._setCaption("",!0),void t.$container.removeClass("file-input-new file-input-ajax-new");o>t.maxFileCount&&t._resetPreviewThumbs(m)}else!m||y?(t._resetPreviewThumbs(!1),y&&t.clearStack()):!m||0!==w||k.count(t.id)&&!t.overwriteInitial||t._resetPreviewThumbs(!0);t.isPreviewable?t._readFiles(n):t._updateFileDetails(1),t._showFolderError(C)}},_abort:function(e){var t,i=this;return!(!i.ajaxAborted||"object"!=typeof i.ajaxAborted||void 0===i.ajaxAborted.message)&&((t=L.extend(!0,{},i._getOutData(),e)).abortData=i.ajaxAborted.data||{},t.abortMessage=i.ajaxAborted.message,i.cancel(),i._setProgress(101,i.$progress,i.msgCancelled),i._showUploadError(i.ajaxAborted.message,t,"filecustomerror"),!0)},_resetFileStack:function(){var n=this,a=0,o=[],s=[];n._getThumbs().each(function(){var e=L(this),t=e.attr("data-fileindex"),i=n.filestack[t];-1!==t&&(void 0!==i?(o[a]=i,s[a]=n._getFileName(i),e.attr({id:n.previewInitId+"-"+a,"data-fileindex":a}),a++):e.attr({id:"uploaded-"+T(),"data-fileindex":"-1"}))}),n.filestack=o,n.filenames=s},clearStack:function(){return this.filestack=[],this.filenames=[],this.$element},updateStack:function(e,t){return this.filestack[e]=t,this.filenames[e]=this._getFileName(t),this.$element},addToStack:function(e){return this.filestack.push(e),this.filenames.push(this._getFileName(e)),this.$element},getFileStack:function(t){return this.filestack.filter(function(e){return t?void 0!==e:null!=e})},getFilesCount:function(){var e=this.isUploadable?this.getFileStack().length:this.$element.get(0).files.length;return this._getFileCount(e)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&w(e.$container.find(".fileinput-remove"),"hide"),e.showCancel&&e.$container.find(".fileinput-cancel").removeClass("hide"),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var t=this;return void 0===e&&(e=!0),t.enable(),t.showCancel&&w(t.$container.find(".fileinput-cancel"),"hide"),t.showRemove&&t.$container.find(".fileinput-remove").removeClass("hide"),e&&t._resetFileStack(),t._raise("fileunlock",[t.filestack,t._getExtraData()]),t.$element},cancel:function(){var e,i=this,t=i.ajaxRequests,n=t.length;if(0<n)for(e=0;e<n;e+=1)i.cancelling=!0,t[e].abort();return i._setProgressCancelled(),i._getThumbs().each(function(){var e=L(this),t=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==i.filestack[t]&&(e.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),e.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),i.$element},clear:function(){var e,t=this;return t.$btnUpload.removeAttr("disabled"),t._getThumbs().find("video,audio,img").each(function(){N(L(this))}),t._resetUpload(),t.clearStack(),t._clearFileInput(),t._resetErrors(!0),t._raise("fileclear"),t._hasInitialPreview()?(t._showFileIcon(),t._resetPreview(),t._initPreviewActions(),t.$container.removeClass("file-input-new")):(t._getThumbs().each(function(){t._clearObjects(L(this))}),t.isUploadable&&(k.data[t.id]={}),t.$preview.html(""),e=!t.overwriteInitial&&0<t.initialCaption.length?t.initialCaption:"",t.$caption.html(e),t.$caption.attr("title",""),w(t.$container,"file-input-new"),t._validateDefaultPreview()),0===t.$container.find(".file-preview-frame").length&&(t._initCaption()||t.$captionContainer.find(".kv-caption-icon").hide()),t._hideFileIcon(),t._raise("filecleared"),t.$captionContainer.focus(),t._setFileDropZoneTitle(),t.$element},reset:function(){var e=this;return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),e._raise("filereset"),w(e.$container,"file-input-new"),(e.$preview.find(".file-preview-frame").length||e.isUploadable&&e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e._setFileDropZoneTitle(),e.clearStack(),e.formdata={},e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".btn-file, .fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e._initDragDrop(),e.$element},upload:function(){var e,t,i,n=this,a=n.getFileStack().length,o=!L.isEmptyObject(n._getExtraData());if(0<n.minFileCount&&n._getFileCount(a)<n.minFileCount)n._noFilesError({});else if(n.isUploadable&&!n.isDisabled&&(0!==a||o))if(n._resetUpload(),n.$progress.removeClass("hide"),n.uploadCount=0,n.uploadStatus={},n.uploadLog=[],n.lock(),n._setProgress(2),0===a&&o)n._uploadExtraOnly();else{if(i=n.filestack.length,n.hasInitData=!1,!n.uploadAsync)return n._uploadBatch(),n.$element;for(t=n._getOutData(),n._raise("filebatchpreupload",[t]),n.fileBatchCompleted=!1,n.uploadCache={content:[],config:[],tags:[],append:!0},n.uploadAsyncCount=n.getFileStack().length,e=0;e<i;e++)n.uploadCache.content[e]=null,n.uploadCache.config[e]=null,n.uploadCache.tags[e]=null;for(e=0;e<i;e++)void 0!==n.filestack[e]&&n._uploadSingle(e,n.filestack,!0)}},destroy:function(){var e=this.$container;return e.find(".file-drop-zone").off(),this.$element.insertBefore(e).off(o).removeData(),e.off().remove(),this.$element},refresh:function(e){var t=this.$element;return e=e?L.extend(!0,{},this.options,e):this.options,this.destroy(),t.fileinput(e),t.val()&&t.trigger("change.fileinput"),t}},L.fn.fileinput=function(l){if(a()||h(9)){var d=Array.apply(null,arguments),c=[];switch(d.shift(),this.each(function(){var e,t=L(this),i=t.data("fileinput"),n="object"==typeof l&&l,a=n.theme||t.data("theme"),o={},s={},r=n.language||t.data("language")||"en";i||(a&&(s=L.fn.fileinputThemes[a]||{}),"en"===r||H(L.fn.fileinputLocales[r])||(o=L.fn.fileinputLocales[r]||{}),e=L.extend(!0,{},L.fn.fileinput.defaults,s,L.fn.fileinputLocales.en,o,n,t.data()),i=new I(this,e),t.data("fileinput",i)),"string"==typeof l&&c.push(i[l].apply(i,d))}),c.length){case 0:return this;case 1:return c[0];default:return c}}},L.fn.fileinput.defaults={language:"en",noRadius:!1,showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,previewClass:"",captionClass:"",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,layoutTemplates:f,previewTemplates:g,previewZoomSettings:m,previewZoomButtonIcons:{prev:'<i class="fa fa-caret-left"></i>',next:'<i class="fa fa-caret-right"></i>',toggleheader:'<i class="fa fa-arrows-v"></i>',fullscreen:'<i class="fa fa-arrows-alt"></i>',borderless:'<i class="fa fa-expand"></i>',close:'<i class="fa fa-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-default btn-header-toggle",fullscreen:"btn btn-default",borderless:"btn btn-default",close:"btn btn-default"},allowedPreviewTypes:v,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewSettings:C,fileTypeSettings:j,previewFileIcon:'<i class="fa fa-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="fa fa-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="fa fa-trash"></i>',removeClass:"btn btn-default",cancelIcon:'<i class="fa fa-ban"></i>',cancelClass:"btn btn-default",uploadIcon:'<i class="fa fa-arrow-circle-o-up"></i>',uploadClass:"btn btn-default",uploadUrl:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="fa fa-exclamation-circle"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar progress-bar-success progress-bar-striped active",progressClass:"progress-bar progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar progress-bar-success",progressErrorClass:"progress-bar progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:'<span class="close kv-error-close">&times;</span>',slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0},L.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgZoomModalHeading:"Detailed Preview",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"}},L.fn.fileinput.Constructor=I,L(document).ready(function(){var e=L("input.file[type=file]");e.length&&e.fileinput()})}(jQuery),function(r,t,e,o){"use strict";var a="treeview",s={};s.settings={injectStyle:!0,levels:2,expandIcon:"fa fa-plus",collapseIcon:"fa fa-minus",emptyIcon:"fa",nodeIcon:"",selectedIcon:"",checkedIcon:"fa fa-check-square-o",uncheckedIcon:"fa fa-square-o",color:o,backColor:o,borderColor:o,onhoverColor:"#F5F5F5",selectedColor:"#FFFFFF",selectedBackColor:"#428bca",searchResultColor:"#D9534F",searchResultBackColor:o,enableLinks:!1,highlightSelected:!0,highlightSearchResults:!0,showBorder:!0,showIcon:!0,showCheckbox:!1,showTags:!1,multiSelect:!1,onNodeChecked:o,onNodeCollapsed:o,onNodeDisabled:o,onNodeEnabled:o,onNodeExpanded:o,onNodeSelected:o,onNodeUnchecked:o,onNodeUnselected:o,onSearchComplete:o,onSearchCleared:o},s.options={silent:!1,ignoreChildren:!1},s.searchOptions={ignoreCase:!0,exactMatch:!1,revealResults:!0};var l=function(e,t){return this.$element=r(e),this.elementId=e.id,this.styleId=this.elementId+"-style",this.init(t),{options:this.options,init:r.proxy(this.init,this),remove:r.proxy(this.remove,this),getNode:r.proxy(this.getNode,this),getParent:r.proxy(this.getParent,this),getSiblings:r.proxy(this.getSiblings,this),getSelected:r.proxy(this.getSelected,this),getUnselected:r.proxy(this.getUnselected,this),getExpanded:r.proxy(this.getExpanded,this),getCollapsed:r.proxy(this.getCollapsed,this),getChecked:r.proxy(this.getChecked,this),getUnchecked:r.proxy(this.getUnchecked,this),getDisabled:r.proxy(this.getDisabled,this),getEnabled:r.proxy(this.getEnabled,this),selectNode:r.proxy(this.selectNode,this),unselectNode:r.proxy(this.unselectNode,this),toggleNodeSelected:r.proxy(this.toggleNodeSelected,this),collapseAll:r.proxy(this.collapseAll,this),collapseNode:r.proxy(this.collapseNode,this),expandAll:r.proxy(this.expandAll,this),expandNode:r.proxy(this.expandNode,this),toggleNodeExpanded:r.proxy(this.toggleNodeExpanded,this),revealNode:r.proxy(this.revealNode,this),checkAll:r.proxy(this.checkAll,this),checkNode:r.proxy(this.checkNode,this),uncheckAll:r.proxy(this.uncheckAll,this),uncheckNode:r.proxy(this.uncheckNode,this),toggleNodeChecked:r.proxy(this.toggleNodeChecked,this),disableAll:r.proxy(this.disableAll,this),disableNode:r.proxy(this.disableNode,this),enableAll:r.proxy(this.enableAll,this),enableNode:r.proxy(this.enableNode,this),toggleNodeDisabled:r.proxy(this.toggleNodeDisabled,this),search:r.proxy(this.search,this),clearSearch:r.proxy(this.clearSearch,this)}};l.prototype.init=function(e){this.tree=[],this.nodes=[],e.data&&("string"==typeof e.data&&(e.data=r.parseJSON(e.data)),this.tree=r.extend(!0,[],e.data),delete e.data),this.options=r.extend({},s.settings,e),this.destroy(),this.subscribeEvents(),this.setInitialStates({nodes:this.tree},0),this.render()},l.prototype.remove=function(){this.destroy(),r.removeData(this,a),r("#"+this.styleId).remove()},l.prototype.destroy=function(){this.initialized&&(this.$wrapper.remove(),this.$wrapper=null,this.unsubscribeEvents(),this.initialized=!1)},l.prototype.unsubscribeEvents=function(){this.$element.off("click"),this.$element.off("nodeChecked"),this.$element.off("nodeCollapsed"),this.$element.off("nodeDisabled"),this.$element.off("nodeEnabled"),this.$element.off("nodeExpanded"),this.$element.off("nodeSelected"),this.$element.off("nodeUnchecked"),this.$element.off("nodeUnselected"),this.$element.off("searchComplete"),this.$element.off("searchCleared")},l.prototype.subscribeEvents=function(){this.unsubscribeEvents(),this.$element.on("click",r.proxy(this.clickHandler,this)),"function"==typeof this.options.onNodeChecked&&this.$element.on("nodeChecked",this.options.onNodeChecked),"function"==typeof this.options.onNodeCollapsed&&this.$element.on("nodeCollapsed",this.options.onNodeCollapsed),"function"==typeof this.options.onNodeDisabled&&this.$element.on("nodeDisabled",this.options.onNodeDisabled),"function"==typeof this.options.onNodeEnabled&&this.$element.on("nodeEnabled",this.options.onNodeEnabled),"function"==typeof this.options.onNodeExpanded&&this.$element.on("nodeExpanded",this.options.onNodeExpanded),"function"==typeof this.options.onNodeSelected&&this.$element.on("nodeSelected",this.options.onNodeSelected),"function"==typeof this.options.onNodeUnchecked&&this.$element.on("nodeUnchecked",this.options.onNodeUnchecked),"function"==typeof this.options.onNodeUnselected&&this.$element.on("nodeUnselected",this.options.onNodeUnselected),"function"==typeof this.options.onSearchComplete&&this.$element.on("searchComplete",this.options.onSearchComplete),"function"==typeof this.options.onSearchCleared&&this.$element.on("searchCleared",this.options.onSearchCleared)},l.prototype.setInitialStates=function(e,i){if(e.nodes){i+=1;var n=e,a=this;r.each(e.nodes,function(e,t){t.nodeId=a.nodes.length,t.parentId=n.nodeId,t.hasOwnProperty("selectable")||(t.selectable=!0),t.state=t.state||{},t.state.hasOwnProperty("checked")||(t.state.checked=!1),t.state.hasOwnProperty("disabled")||(t.state.disabled=!1),t.state.hasOwnProperty("expanded")||(!t.state.disabled&&i<a.options.levels&&t.nodes&&0<t.nodes.length?t.state.expanded=!0:t.state.expanded=!1),t.state.hasOwnProperty("selected")||(t.state.selected=!1),a.nodes.push(t),t.nodes&&a.setInitialStates(t,i)})}},l.prototype.clickHandler=function(e){this.options.enableLinks||e.preventDefault();var t=r(e.target),i=this.findNode(t);if(i&&!i.state.disabled){var n=t.attr("class")?t.attr("class").split(" "):[];-1!==n.indexOf("expand-icon")?this.toggleExpandedState(i,s.options):-1!==n.indexOf("check-icon")?this.toggleCheckedState(i,s.options):i.selectable?this.toggleSelectedState(i,s.options):this.toggleExpandedState(i,s.options),this.render()}},l.prototype.findNode=function(e){var t=e.closest("li.list-group-item").attr("data-nodeid"),i=this.nodes[t];return i||console.log("Error: node does not exist"),i},l.prototype.toggleExpandedState=function(e,t){e&&this.setExpandedState(e,!e.state.expanded,t)},l.prototype.setExpandedState=function(e,t,i){t!==e.state.expanded&&(t&&e.nodes?(e.state.expanded=!0,i.silent||this.$element.trigger("nodeExpanded",r.extend(!0,{},e))):t||(e.state.expanded=!1,i.silent||this.$element.trigger("nodeCollapsed",r.extend(!0,{},e)),e.nodes&&!i.ignoreChildren&&r.each(e.nodes,r.proxy(function(e,t){this.setExpandedState(t,!1,i)},this))))},l.prototype.toggleSelectedState=function(e,t){e&&this.setSelectedState(e,!e.state.selected,t)},l.prototype.setSelectedState=function(e,t,i){t!==e.state.selected&&(t?(this.options.multiSelect||r.each(this.findNodes("true","g","state.selected"),r.proxy(function(e,t){this.setSelectedState(t,!1,i)},this)),e.state.selected=!0,i.silent||this.$element.trigger("nodeSelected",r.extend(!0,{},e))):(e.state.selected=!1,i.silent||this.$element.trigger("nodeUnselected",r.extend(!0,{},e))))},l.prototype.toggleCheckedState=function(e,t){e&&this.setCheckedState(e,!e.state.checked,t)},l.prototype.setCheckedState=function(e,t,i){t!==e.state.checked&&(t?(e.state.checked=!0,i.silent||this.$element.trigger("nodeChecked",r.extend(!0,{},e))):(e.state.checked=!1,i.silent||this.$element.trigger("nodeUnchecked",r.extend(!0,{},e))))},l.prototype.setDisabledState=function(e,t,i){t!==e.state.disabled&&(t?(e.state.disabled=!0,this.setExpandedState(e,!1,i),this.setSelectedState(e,!1,i),this.setCheckedState(e,!1,i),i.silent||this.$element.trigger("nodeDisabled",r.extend(!0,{},e))):(e.state.disabled=!1,i.silent||this.$element.trigger("nodeEnabled",r.extend(!0,{},e))))},l.prototype.render=function(){this.initialized||(this.$element.addClass(a),this.$wrapper=r(this.template.list),this.injectStyle(),this.initialized=!0),this.$element.empty().append(this.$wrapper.empty()),this.buildTree(this.tree,0)},l.prototype.buildTree=function(e,o){if(e){o+=1;var s=this;r.each(e,function(e,t){for(var i=r(s.template.item).addClass("node-"+s.elementId).addClass(t.state.checked?"node-checked":"").addClass(t.state.disabled?"node-disabled":"").addClass(t.state.selected?"node-selected":"").addClass(t.searchResult?"search-result":"").attr("data-nodeid",t.nodeId).attr("style",s.buildStyleOverride(t)),n=0;n<o-1;n++)i.append(s.template.indent);var a=[];(t.nodes?(a.push("expand-icon"),t.state.expanded?a.push(s.options.collapseIcon):a.push(s.options.expandIcon)):a.push(s.options.emptyIcon),i.append(r(s.template.icon).addClass(a.join(" "))),s.options.showIcon)&&((a=["node-icon"]).push(t.icon||s.options.nodeIcon),t.state.selected&&(a.pop(),a.push(t.selectedIcon||s.options.selectedIcon||t.icon||s.options.nodeIcon)),i.append(r(s.template.icon).addClass(a.join(" "))));if(s.options.showCheckbox){a=["check-icon"];t.state.checked?a.push(s.options.checkedIcon):a.push(s.options.uncheckedIcon),i.append(r(s.template.icon).addClass(a.join(" ")))}if(s.options.enableLinks?i.append(r(s.template.link).attr("href",t.href).append(t.text)):i.append(t.text),s.options.showTags&&t.tags&&r.each(t.tags,function(e,t){i.append(r(s.template.badge).append(t))}),s.$wrapper.append(i),t.nodes&&t.state.expanded&&!t.state.disabled)return s.buildTree(t.nodes,o)})}},l.prototype.buildStyleOverride=function(e){if(e.state.disabled)return"";var t=e.color,i=e.backColor;return this.options.highlightSelected&&e.state.selected&&(this.options.selectedColor&&(t=this.options.selectedColor),this.options.selectedBackColor&&(i=this.options.selectedBackColor)),this.options.highlightSearchResults&&e.searchResult&&!e.state.disabled&&(this.options.searchResultColor&&(t=this.options.searchResultColor),this.options.searchResultBackColor&&(i=this.options.searchResultBackColor)),"color:"+t+";background-color:"+i+";"},l.prototype.injectStyle=function(){this.options.injectStyle&&!e.getElementById(this.styleId)&&r('<style type="text/css" id="'+this.styleId+'"> '+this.buildStyle()+" </style>").appendTo("head")},l.prototype.buildStyle=function(){var e=".node-"+this.elementId+"{";return this.options.color&&(e+="color:"+this.options.color+";"),this.options.backColor&&(e+="background-color:"+this.options.backColor+";"),this.options.showBorder?this.options.borderColor&&(e+="border:1px solid "+this.options.borderColor+";"):e+="border:none;",e+="}",this.options.onhoverColor&&(e+=".node-"+this.elementId+":not(.node-disabled):hover{background-color:"+this.options.onhoverColor+";}"),this.css+e},l.prototype.template={list:'<ul class="list-group"></ul>',item:'<li class="list-group-item"></li>',indent:'<span class="indent"></span>',icon:'<span class="icon"></span>',link:'<a href="#" style="color:inherit;"></a>',badge:'<span class="badge"></span>'},l.prototype.css=".treeview .list-group-item{cursor:pointer}.treeview span.indent{margin-left:10px;margin-right:10px}.treeview span.icon{width:12px;margin-right:5px}.treeview .node-disabled{color:silver;cursor:not-allowed}",l.prototype.getNode=function(e){return this.nodes[e]},l.prototype.getParent=function(e){var t=this.identifyNode(e);return this.nodes[t.parentId]},l.prototype.getSiblings=function(e){var t=this.identifyNode(e),i=this.getParent(t);return(i?i.nodes:this.tree).filter(function(e){return e.nodeId!==t.nodeId})},l.prototype.getSelected=function(){return this.findNodes("true","g","state.selected")},l.prototype.getUnselected=function(){return this.findNodes("false","g","state.selected")},l.prototype.getExpanded=function(){return this.findNodes("true","g","state.expanded")},l.prototype.getCollapsed=function(){return this.findNodes("false","g","state.expanded")},l.prototype.getChecked=function(){return this.findNodes("true","g","state.checked")},l.prototype.getUnchecked=function(){return this.findNodes("false","g","state.checked")},l.prototype.getDisabled=function(){return this.findNodes("true","g","state.disabled")},l.prototype.getEnabled=function(){return this.findNodes("false","g","state.disabled")},l.prototype.selectNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setSelectedState(e,!0,t)},this)),this.render()},l.prototype.unselectNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setSelectedState(e,!1,t)},this)),this.render()},l.prototype.toggleNodeSelected=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.toggleSelectedState(e,t)},this)),this.render()},l.prototype.collapseAll=function(e){var t=this.findNodes("true","g","state.expanded");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},l.prototype.collapseNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setExpandedState(e,!1,t)},this)),this.render()},l.prototype.expandAll=function(e){if((e=r.extend({},s.options,e))&&e.levels)this.expandLevels(this.tree,e.levels,e);else{var t=this.findNodes("false","g","state.expanded");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setExpandedState(e,!0,t)},this))}this.render()},l.prototype.expandNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setExpandedState(e,!0,t),e.nodes&&t&&t.levels&&this.expandLevels(e.nodes,t.levels-1,t)},this)),this.render()},l.prototype.expandLevels=function(e,i,n){n=r.extend({},s.options,n),r.each(e,r.proxy(function(e,t){this.setExpandedState(t,0<i,n),t.nodes&&this.expandLevels(t.nodes,i-1,n)},this))},l.prototype.revealNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){for(var i=this.getParent(e);i;)this.setExpandedState(i,!0,t),i=this.getParent(i)},this)),this.render()},l.prototype.toggleNodeExpanded=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.toggleExpandedState(e,t)},this)),this.render()},l.prototype.checkAll=function(e){var t=this.findNodes("false","g","state.checked");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},l.prototype.checkNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setCheckedState(e,!0,t)},this)),this.render()},l.prototype.uncheckAll=function(e){var t=this.findNodes("true","g","state.checked");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},l.prototype.uncheckNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setCheckedState(e,!1,t)},this)),this.render()},l.prototype.toggleNodeChecked=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.toggleCheckedState(e,t)},this)),this.render()},l.prototype.disableAll=function(e){var t=this.findNodes("false","g","state.disabled");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},l.prototype.disableNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setDisabledState(e,!0,t)},this)),this.render()},l.prototype.enableAll=function(e){var t=this.findNodes("true","g","state.disabled");this.forEachIdentifier(t,e,r.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},l.prototype.enableNode=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setDisabledState(e,!1,t)},this)),this.render()},l.prototype.toggleNodeDisabled=function(e,t){this.forEachIdentifier(e,t,r.proxy(function(e,t){this.setDisabledState(e,!e.state.disabled,t)},this)),this.render()},l.prototype.forEachIdentifier=function(e,i,n){i=r.extend({},s.options,i),e instanceof Array||(e=[e]),r.each(e,r.proxy(function(e,t){n(this.identifyNode(t),i)},this))},l.prototype.identifyNode=function(e){return"number"==typeof e?this.nodes[e]:e},l.prototype.search=function(e,t){t=r.extend({},s.searchOptions,t),this.clearSearch({render:!1});var i=[];if(e&&0<e.length){t.exactMatch&&(e="^"+e+"$");var n="g";t.ignoreCase&&(n+="i"),i=this.findNodes(e,n),r.each(i,function(e,t){t.searchResult=!0})}return t.revealResults?this.revealNode(i):this.render(),this.$element.trigger("searchComplete",r.extend(!0,{},i)),i},l.prototype.clearSearch=function(e){e=r.extend({},{render:!0},e);var t=r.each(this.findNodes("true","g","searchResult"),function(e,t){t.searchResult=!1});e.render&&this.render(),this.$element.trigger("searchCleared",r.extend(!0,{},t))},l.prototype.findNodes=function(i,n,a){n=n||"g",a=a||"text";var o=this;return r.grep(this.nodes,function(e){var t=o.getNodeValue(e,a);if("string"==typeof t)return t.match(new RegExp(i,n))})},l.prototype.getNodeValue=function(e,t){var i=t.indexOf(".");if(0<i){var n=e[t.substring(0,i)],a=t.substring(i+1,t.length);return this.getNodeValue(n,a)}return e.hasOwnProperty(t)?e[t].toString():o};var d=function(e){t.console&&t.console.error(e)};r.fn[a]=function(t,i){var n;return this.each(function(){var e=r.data(this,a);"string"==typeof t?e?r.isFunction(e[t])&&"_"!==t.charAt(0)?(i instanceof Array||(i=[i]),n=e[t].apply(e,i)):d("No such method : "+t):d("Not initialized, can not call method : "+t):"boolean"==typeof t?n=e:r.data(this,a,new l(this,r.extend(!0,{},t)))}),n||this}}(jQuery,window,document),("function"==typeof $&&$.amd?$:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.toastr=t(window.jQuery)})(["jquery"],function(k){return function(){var g,t,m,v=0,n="error",a="info",o="success",s="warning",e={clear:function(e,t){var i=y();g||b(i),r(e,i,t)||function(e){for(var t=g.children(),i=t.length-1;0<=i;i--)r(k(t[i]),e)}(i)},remove:function(e){var t=y();g||b(t),e&&0===k(":focus",e).length?C(e):g.children().length&&g.remove()},error:function(e,t,i){return l({type:n,iconClass:y().iconClasses.error,message:e,optionsOverride:i,title:t})},getContainer:b,info:function(e,t,i){return l({type:a,iconClass:y().iconClasses.info,message:e,optionsOverride:i,title:t})},options:{},subscribe:function(e){t=e},success:function(e,t,i){return l({type:o,iconClass:y().iconClasses.success,message:e,optionsOverride:i,title:t})},version:"2.1.1",warning:function(e,t,i){return l({type:s,iconClass:y().iconClasses.warning,message:e,optionsOverride:i,title:t})}};return e;function b(e,t){return e||(e=y()),(g=k("#"+e.containerId)).length||t&&(i=e,(g=k("<div/>").attr("id",i.containerId).addClass(i.positionClass).attr("aria-live","polite").attr("role","alert")).appendTo(k(i.target)),g=g),g;var i}function r(e,t,i){var n=!(!i||!i.force)&&i.force;return!(!e||!n&&0!==k(":focus",e).length||(e[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){C(e)}}),0))}function w(e){t&&t(e)}function l(e){var t=y(),i=e.iconClass||t.iconClass;if(void 0!==e.optionsOverride&&(t=k.extend(t,e.optionsOverride),i=e.optionsOverride.iconClass||i),!function(e,t){if(e.preventDuplicates){if(t.message===m)return!0;m=t.message}return!1}(t,e)){v++,g=b(t,!0);var n=null,a=k("<div/>"),o=k("<div/>"),s=k("<div/>"),r=k("<div/>"),l=k(t.closeHtml),d={intervalId:null,hideEta:null,maxHideTime:null},c={toastId:v,state:"visible",startTime:new Date,options:t,map:e};return e.iconClass&&a.addClass(t.toastClass).addClass(i),e.title&&(o.append(e.title).addClass(t.titleClass),a.append(o)),e.message&&(s.append(e.message).addClass(t.messageClass),a.append(s)),t.closeButton&&(l.addClass("toast-close-button").attr("role","button"),a.prepend(l)),t.progressBar&&(r.addClass("toast-progress"),a.prepend(r)),t.newestOnTop?g.prepend(a):g.append(a),a.hide(),a[t.showMethod]({duration:t.showDuration,easing:t.showEasing,complete:t.onShown}),0<t.timeOut&&(n=setTimeout(h,t.timeOut),d.maxHideTime=parseFloat(t.timeOut),d.hideEta=(new Date).getTime()+d.maxHideTime,t.progressBar&&(d.intervalId=setInterval(f,10))),a.hover(p,u),!t.onclick&&t.tapToDismiss&&a.click(h),t.closeButton&&l&&l.click(function(e){e.stopPropagation?e.stopPropagation():void 0!==e.cancelBubble&&!0!==e.cancelBubble&&(e.cancelBubble=!0),h(!0)}),t.onclick&&a.click(function(){t.onclick(),h()}),w(c),t.debug&&console&&console.log(c),a}function h(e){if(!k(":focus",a).length||e)return clearTimeout(d.intervalId),a[t.hideMethod]({duration:t.hideDuration,easing:t.hideEasing,complete:function(){C(a),t.onHidden&&"hidden"!==c.state&&t.onHidden(),c.state="hidden",c.endTime=new Date,w(c)}})}function u(){(0<t.timeOut||0<t.extendedTimeOut)&&(n=setTimeout(h,t.extendedTimeOut),d.maxHideTime=parseFloat(t.extendedTimeOut),d.hideEta=(new Date).getTime()+d.maxHideTime)}function p(){clearTimeout(n),d.hideEta=0,a.stop(!0,!0)[t.showMethod]({duration:t.showDuration,easing:t.showEasing})}function f(){var e=(d.hideEta-(new Date).getTime())/d.maxHideTime*100;r.width(e+"%")}}function y(){return k.extend({},{tapToDismiss:!0,toastClass:"toast",containerId:"toast-container",debug:!1,showMethod:"fadeIn",showDuration:300,showEasing:"swing",onShown:void 0,hideMethod:"fadeOut",hideDuration:1e3,hideEasing:"swing",onHidden:void 0,extendedTimeOut:1e3,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},iconClass:"toast-info",positionClass:"toast-top-center",timeOut:5e3,titleClass:"toast-title",messageClass:"toast-message",target:"body",closeHtml:'<button type="button">&times;</button>',newestOnTop:!0,preventDuplicates:!1,progressBar:!1},e.options)}function C(e){g||(g=b()),e.is(":visible")||(e.remove(),e=null,0===g.children().length&&(g.remove(),m=void 0))}}()}),function(e){"use strict";var o="undefined"!=typeof window&&void 0!==window.document?window.document:{},t="undefined"!=typeof module&&module.exports,i="undefined"!=typeof Element&&"ALLOW_KEYBOARD_INPUT"in Element,n=function(){for(var e,t=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitCurrentFullScreenElement","webkitCancelFullScreen","webkitfullscreenchange","webkitfullscreenerror"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError"]],i=0,n=t.length,a={};i<n;i++)if((e=t[i])&&e[1]in o){for(i=0;i<e.length;i++)a[t[0][i]]=e[i];return a}return!1}(),a={change:n.fullscreenchange,error:n.fullscreenerror},s={request:function(e){var t=n.requestFullscreen;e=e||o.documentElement,/ Version\/5\.1(?:\.\d+)? Safari\//.test(navigator.userAgent)?e[t]():i?e[t](Element.ALLOW_KEYBOARD_INPUT):e[t]({navigationUI:"auto"})},exit:function(){o[n.exitFullscreen]()},toggle:function(e){this.isFullscreen?this.exit():this.request(e)},onchange:function(e){this.on("change",e)},onerror:function(e){this.on("error",e)},on:function(e,t){var i=a[e];i&&o.addEventListener(i,t,!1)},off:function(e,t){var i=a[e];i&&o.removeEventListener(i,t,!1)},raw:n};n?(Object.defineProperties(s,{isFullscreen:{get:function(){return Boolean(o[n.fullscreenElement])}},element:{enumerable:!0,get:function(){return o[n.fullscreenElement]}},enabled:{enumerable:!0,get:function(){return Boolean(o[n.fullscreenEnabled])}}}),t?module.exports=s:window.screenfull=s):t?module.exports=!1:window.screenfull=!1}(jQuery),function(e){"use strict";function r(a,e){var t;if(e=e||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=e.touchBoundary||10,this.layer=a,this.tapDelay=e.tapDelay||200,this.tapTimeout=e.tapTimeout||700,!r.notNeeded(a)){for(var i=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],n=0,o=i.length;n<o;n++)this[i[n]]=s(this[i[n]],this);l&&(a.addEventListener("mouseover",this.onMouse,!0),a.addEventListener("mousedown",this.onMouse,!0),a.addEventListener("mouseup",this.onMouse,!0)),a.addEventListener("click",this.onClick,!0),a.addEventListener("touchstart",this.onTouchStart,!1),a.addEventListener("touchmove",this.onTouchMove,!1),a.addEventListener("touchend",this.onTouchEnd,!1),a.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(a.removeEventListener=function(e,t,i){var n=Node.prototype.removeEventListener;"click"===e?n.call(a,e,t.hijacked||t,i):n.call(a,e,t,i)},a.addEventListener=function(e,t,i){var n=Node.prototype.addEventListener;"click"===e?n.call(a,e,t.hijacked||(t.hijacked=function(e){e.propagationStopped||t(e)}),i):n.call(a,e,t,i)}),"function"==typeof a.onclick&&(t=a.onclick,a.addEventListener("click",function(e){t(e)},!1),a.onclick=null)}function s(e,t){return function(){return e.apply(t,arguments)}}}var t=0<=navigator.userAgent.indexOf("Windows Phone"),l=0<navigator.userAgent.indexOf("Android")&&!t,d=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,c=d&&/OS 4_\d(_\d)?/.test(navigator.userAgent),h=d&&/OS [6-7]_\d/.test(navigator.userAgent),a=0<navigator.userAgent.indexOf("BB10");r.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(d&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},r.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!l;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},r.prototype.sendClick=function(e,t){var i,n;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),n=t.changedTouches[0],(i=document.createEvent("MouseEvents")).initMouseEvent(this.determineEventType(e),!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),i.forwardedTouchEvent=!0,e.dispatchEvent(i)},r.prototype.determineEventType=function(e){return l&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},r.prototype.focus=function(e){var t;d&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},r.prototype.updateScrollParent=function(e){var t,i;if(!(t=e.fastClickScrollParent)||!t.contains(e)){i=e;do{if(i.scrollHeight>i.offsetHeight){t=i,e.fastClickScrollParent=i;break}i=i.parentElement}while(i)}t&&(t.fastClickLastScrollTop=t.scrollTop)},r.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},r.prototype.onTouchStart=function(e){var t,i,n;if(1<e.targetTouches.length)return!0;if(t=this.getTargetElementFromEventTarget(e.target),i=e.targetTouches[0],d){if((n=window.getSelection()).rangeCount&&!n.isCollapsed)return!0;if(!c){if(i.identifier&&i.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=i.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=i.pageX,this.touchStartY=i.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},r.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],i=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>i||Math.abs(t.pageY-this.touchStartY)>i},r.prototype.onTouchMove=function(e){return this.trackingClick&&(this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0},r.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},r.prototype.onTouchEnd=function(e){var t,i,n,a,o,s=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,i=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,h&&(o=e.changedTouches[0],(s=document.elementFromPoint(o.pageX-window.pageXOffset,o.pageY-window.pageYOffset)||s).fastClickScrollParent=this.targetElement.fastClickScrollParent),"label"===(n=s.tagName.toLowerCase())){if(t=this.findControl(s)){if(this.focus(s),l)return!1;s=t}}else if(this.needsFocus(s))return 100<e.timeStamp-i||d&&window.top!==window&&"input"===n?this.targetElement=null:(this.focus(s),this.sendClick(s,e),d&&"select"===n||(this.targetElement=null,e.preventDefault())),!1;return!(!d||c||!(a=s.fastClickScrollParent)||a.fastClickLastScrollTop===a.scrollTop)||(this.needsClick(s)||(e.preventDefault(),this.sendClick(s,e)),!1)},r.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},r.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},r.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,!(this.trackingClick=!1)):"submit"===e.target.type&&0===e.detail||((t=this.onMouse(e))||(this.targetElement=null),t)},r.prototype.destroy=function(){var e=this.layer;l&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},r.notNeeded=function(e){var t,i,n;if(void 0===window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!l)return!0;if(t=document.querySelector("meta[name=viewport]")){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(31<i&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&10<=(n=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/))[1]&&3<=n[2]&&(t=document.querySelector("meta[name=viewport]"))){if(-1!==t.content.indexOf("user-scalable=no"))return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(!!(27<=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]&&(t=document.querySelector("meta[name=viewport]"))&&(-1!==t.content.indexOf("user-scalable=no")||document.documentElement.scrollWidth<=window.outerWidth))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},r.attach=function(e,t){return new r(e,t)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return r}):"undefined"!=typeof module&&module.exports?(module.exports=r.attach,module.exports.FastClick=r):window.FastClick=r}(jQuery),function($){var settings={},roots={},caches={},_consts={className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_setting={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},_initRoot=function(e){var t=data.getRoot(e);t||(t={},data.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()},_initCache=function(e){var t=data.getCache(e);t||(t={},data.setCache(e,t)),t.nodes=[],t.doms=[]},_bindEvent=function(s){var e=s.treeObj,t=consts.event;e.bind(t.NODECREATED,function(e,t,i){tools.apply(s.callback.onNodeCreated,[e,t,i])}),e.bind(t.CLICK,function(e,t,i,n,a){tools.apply(s.callback.onClick,[t,i,n,a])}),e.bind(t.EXPAND,function(e,t,i){tools.apply(s.callback.onExpand,[e,t,i])}),e.bind(t.COLLAPSE,function(e,t,i){tools.apply(s.callback.onCollapse,[e,t,i])}),e.bind(t.ASYNC_SUCCESS,function(e,t,i,n){tools.apply(s.callback.onAsyncSuccess,[e,t,i,n])}),e.bind(t.ASYNC_ERROR,function(e,t,i,n,a,o){tools.apply(s.callback.onAsyncError,[e,t,i,n,a,o])}),e.bind(t.REMOVE,function(e,t,i){tools.apply(s.callback.onRemove,[e,t,i])})},_unbindEvent=function(e){var t=e.treeObj,i=consts.event;t.unbind(i.NODECREATED).unbind(i.CLICK).unbind(i.EXPAND).unbind(i.COLLAPSE).unbind(i.ASYNC_SUCCESS).unbind(i.ASYNC_ERROR).unbind(i.REMOVE)},_eventProxy=function(e){var t=e.target,i=data.getSetting(e.data.treeId),n="",a=null,o="",s="",r=null,l=null,d=null;if(tools.eqs(e.type,"mousedown")?s="mousedown":tools.eqs(e.type,"mouseup")?s="mouseup":tools.eqs(e.type,"contextmenu")?s="contextmenu":tools.eqs(e.type,"click")?tools.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+consts.id.SWITCH)?(n=tools.getNodeMainDom(t).id,o="switchNode"):(d=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id,o="clickNode"):tools.eqs(e.type,"dblclick")&&(s="dblclick",(d=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id,o="switchNode")),0<s.length&&0==n.length&&(d=tools.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+consts.id.A}]))&&(n=tools.getNodeMainDom(d).id),0<n.length)switch(a=data.getNodeCache(i,n),o){case"switchNode":a.isParent&&(tools.eqs(e.type,"click")||tools.eqs(e.type,"dblclick")&&tools.apply(i.view.dblClickExpand,[i.treeId,a],i.view.dblClickExpand))?r=handler.onSwitchNode:o="";break;case"clickNode":r=handler.onClickNode}switch(s){case"mousedown":l=handler.onZTreeMousedown;break;case"mouseup":l=handler.onZTreeMouseup;break;case"dblclick":l=handler.onZTreeDblclick;break;case"contextmenu":l=handler.onZTreeContextmenu}return{stop:!1,node:a,nodeEventType:o,nodeEventCallback:r,treeEventType:s,treeEventCallback:l}},_initNode=function(e,t,i,n,a,o,s){if(i){var r=data.getRoot(e),l=e.data.key.children;i.level=t,i.tId=e.treeId+"_"+ ++r.zId,i.parentTId=n?n.tId:null,i.open="string"==typeof i.open?tools.eqs(i.open,"true"):!!i.open,i[l]&&0<i[l].length?(i.isParent=!0,i.zAsync=!0):(i.isParent="string"==typeof i.isParent?tools.eqs(i.isParent,"true"):!!i.isParent,i.open=!(!i.isParent||e.async.enable)&&i.open,i.zAsync=!i.isParent),i.isFirstNode=a,i.isLastNode=o,i.getParentNode=function(){return data.getNodeCache(e,i.parentTId)},i.getPreNode=function(){return data.getPreNode(e,i)},i.getNextNode=function(){return data.getNextNode(e,i)},i.isAjaxing=!1,data.fixPIdKeyValue(e,i)}},_init={bind:[_bindEvent],unbind:[_unbindEvent],caches:[_initCache],nodes:[_initNode],proxys:[_eventProxy],roots:[_initRoot],beforeA:[],afterA:[],innerBeforeA:[],innerAfterA:[],zTreeTools:[]},data={addNodeCache:function(e,t){data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){_init.afterA.push(e)},addBeforeA:function(e){_init.beforeA.push(e)},addInnerAfterA:function(e){_init.innerAfterA.push(e)},addInnerBeforeA:function(e){_init.innerBeforeA.push(e)},addInitBind:function(e){_init.bind.push(e)},addInitUnBind:function(e){_init.unbind.push(e)},addInitCache:function(e){_init.caches.push(e)},addInitNode:function(e){_init.nodes.push(e)},addInitProxy:function(e,t){t?_init.proxys.splice(0,0,e):_init.proxys.push(e)},addInitRoot:function(e){_init.roots.push(e)},addNodesData:function(e,t,i){var n=e.data.key.children;t[n]||(t[n]=[]),0<t[n].length&&(t[n][t[n].length-1].isLastNode=!1,view.setNodeLineIcos(e,t[n][t[n].length-1])),t.isParent=!0,t[n]=t[n].concat(i)},addSelectedNode:function(e,t){var i=data.getRoot(e);data.isSelectedNode(e,t)||i.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&data.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){_init.zTreeTools.push(e)},exSetting:function(e){$.extend(!0,_setting,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,i){for(var n=0,a=_init.afterA.length;n<a;n++)_init.afterA[n].apply(this,arguments)},getBeforeA:function(e,t,i){for(var n=0,a=_init.beforeA.length;n<a;n++)_init.beforeA[n].apply(this,arguments)},getInnerAfterA:function(e,t,i){for(var n=0,a=_init.innerAfterA.length;n<a;n++)_init.innerAfterA[n].apply(this,arguments)},getInnerBeforeA:function(e,t,i){for(var n=0,a=_init.innerBeforeA.length;n<a;n++)_init.innerBeforeA[n].apply(this,arguments)},getCache:function(e){return caches[e.treeId]},getNextNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():data.getRoot(e),a=0,o=n[i].length-1;a<=o;a++)if(n[i][a]===t)return a==o?null:n[i][a+1];return null},getNodeByParam:function(e,t,i,n){if(!t||!i)return null;for(var a=e.data.key.children,o=0,s=t.length;o<s;o++){if(t[o][i]==n)return t[o];var r=data.getNodeByParam(e,t[o][a],i,n);if(r)return r}return null},getNodeCache:function(e,t){if(!t)return null;var i=caches[e.treeId].nodes[data.getNodeCacheId(t)];return i||null},getNodeName:function(e,t){return""+t[e.data.key.name]},getNodeTitle:function(e,t){return""+t[""===e.data.key.title?e.data.key.name:e.data.key.title]},getNodes:function(e){return data.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,i,n){if(!t||!i)return[];for(var a=e.data.key.children,o=[],s=0,r=t.length;s<r;s++)t[s][i]==n&&o.push(t[s]),o=o.concat(data.getNodesByParam(e,t[s][a],i,n));return o},getNodesByParamFuzzy:function(e,t,i,n){if(!t||!i)return[];var a=e.data.key.children,o=[];n=n.toLowerCase();for(var s=0,r=t.length;s<r;s++)"string"==typeof t[s][i]&&-1<t[s][i].toLowerCase().indexOf(n)&&o.push(t[s]),o=o.concat(data.getNodesByParamFuzzy(e,t[s][a],i,n));return o},getNodesByFilter:function(e,t,i,n,a){if(!t)return n?null:[];for(var o=e.data.key.children,s=n?null:[],r=0,l=t.length;r<l;r++){if(tools.apply(i,[t[r],a],!1)){if(n)return t[r];s.push(t[r])}var d=data.getNodesByFilter(e,t[r][o],i,n,a);if(n&&d)return d;s=n?d:s.concat(d)}return s},getPreNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():data.getRoot(e),a=0,o=n[i].length;a<o;a++)if(n[i][a]===t)return 0==a?null:n[i][a-1];return null},getRoot:function(e){return e?roots[e.treeId]:null},getRoots:function(){return roots},getSetting:function(e){return settings[e]},getSettings:function(){return settings},getZTreeTools:function(e){var t=this.getRoot(this.getSetting(e));return t?t.treeTools:null},initCache:function(e){for(var t=0,i=_init.caches.length;t<i;t++)_init.caches[t].apply(this,arguments)},initNode:function(e,t,i,n,a,o){for(var s=0,r=_init.nodes.length;s<r;s++)_init.nodes[s].apply(this,arguments)},initRoot:function(e){for(var t=0,i=_init.roots.length;t<i;t++)_init.roots[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,a=i.curSelectedList.length;n<a;n++)if(t===i.curSelectedList[n])return!0;return!1},removeNodeCache:function(e,t){var i=e.data.key.children;if(t[i])for(var n=0,a=t[i].length;n<a;n++)arguments.callee(e,t[i][n]);data.getCache(e).nodes[data.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var i=data.getRoot(e),n=0,a=i.curSelectedList.length;n<a;n++)t!==i.curSelectedList[n]&&data.getNodeCache(e,i.curSelectedList[n].tId)||(i.curSelectedList.splice(n,1),n--,a--)},setCache:function(e,t){caches[e.treeId]=t},setRoot:function(e,t){roots[e.treeId]=t},setZTreeTools:function(e,t){for(var i=0,n=_init.zTreeTools.length;i<n;i++)_init.zTreeTools[i].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var i=e.data.key.children,n=[];if(tools.isArray(t))for(var a=0,o=t.length;a<o;a++)n.push(t[a]),t[a][i]&&(n=n.concat(data.transformToArrayFormat(e,t[a][i])));else n.push(t),t[i]&&(n=n.concat(data.transformToArrayFormat(e,t[i])));return n},transformTozTreeFormat:function(e,t){var i,n,a=e.data.simpleData.idKey,o=e.data.simpleData.pIdKey,s=e.data.key.children;if(!a||""==a||!t)return[];if(tools.isArray(t)){var r=[],l=[];for(i=0,n=t.length;i<n;i++)l[t[i][a]]=t[i];for(i=0,n=t.length;i<n;i++)l[t[i][o]]&&t[i][a]!=t[i][o]?(l[t[i][o]][s]||(l[t[i][o]][s]=[]),l[t[i][o]][s].push(t[i])):r.push(t[i]);return r}return[t]}},event={bindEvent:function(e){for(var t=0,i=_init.bind.length;t<i;t++)_init.bind[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,i=_init.unbind.length;t<i;t++)_init.unbind[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},i=e.treeObj;e.view.txtSelectedEnable||i.bind("selectstart",function(e){var t=e.originalEvent.srcElement.nodeName.toLowerCase();return"input"===t||"textarea"===t}).css({"-moz-user-select":"-moz-none"}),i.bind("click",t,event.proxy),i.bind("dblclick",t,event.proxy),i.bind("mouseover",t,event.proxy),i.bind("mouseout",t,event.proxy),i.bind("mousedown",t,event.proxy),i.bind("mouseup",t,event.proxy),i.bind("contextmenu",t,event.proxy)},unbindTree:function(e){e.treeObj.unbind("click",event.proxy).unbind("dblclick",event.proxy).unbind("mouseover",event.proxy).unbind("mouseout",event.proxy).unbind("mousedown",event.proxy).unbind("mouseup",event.proxy).unbind("contextmenu",event.proxy)},doProxy:function(e){for(var t=[],i=0,n=_init.proxys.length;i<n;i++){var a=_init.proxys[i].apply(this,arguments);if(t.push(a),a.stop)break}return t},proxy:function(e){var t=data.getSetting(e.data.treeId);if(!tools.uCanDo(t,e))return!0;for(var i=event.doProxy(e),n=!0,a=0,o=i.length;a<o;a++){var s=i[a];s.nodeEventCallback&&(!0,n=s.nodeEventCallback.apply(s,[e,s.node])&&n),s.treeEventCallback&&(!0,n=s.treeEventCallback.apply(s,[e,s.node])&&n)}return n}},handler={onSwitchNode:function(e,t){var i=data.getSetting(e.data.treeId);if(t.open){if(0==tools.apply(i.callback.beforeCollapse,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}else{if(0==tools.apply(i.callback.beforeExpand,[i.treeId,t],!0))return!0;data.getRoot(i).expandTriggerFlag=!0,view.switchNode(i,t)}return!0},onClickNode:function(e,t){var i=data.getSetting(e.data.treeId),n=i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&data.isSelectedNode(i,t)?0:i.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&i.view.selectedMulti?2:1;return 0==tools.apply(i.callback.beforeClick,[i.treeId,t,n],!0)||(0===n?view.cancelPreSelectedNode(i,t):view.selectNode(i,t,2===n),i.treeObj.trigger(consts.event.CLICK,[e,i.treeId,t,n])),!0},onZTreeMousedown:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseDown,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseDown,[e,i.treeId,t]),!0},onZTreeMouseup:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeMouseUp,[i.treeId,t],!0)&&tools.apply(i.callback.onMouseUp,[e,i.treeId,t]),!0},onZTreeDblclick:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeDblClick,[i.treeId,t],!0)&&tools.apply(i.callback.onDblClick,[e,i.treeId,t]),!0},onZTreeContextmenu:function(e,t){var i=data.getSetting(e.data.treeId);return tools.apply(i.callback.beforeRightClick,[i.treeId,t],!0)&&tools.apply(i.callback.onRightClick,[e,i.treeId,t]),"function"!=typeof i.callback.onRightClick}},tools={apply:function(e,t,i){return"function"==typeof e?e.apply(zt,t||[]):i},canAsync:function(e,t){var i=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[i]&&0<t[i].length)},clone:function(e){if(null===e)return null;var t=tools.isArray(e)?[]:{};for(var i in e)t[i]=e[i]instanceof Date?new Date(e[i].getTime()):"object"==typeof e[i]?arguments.callee(e[i]):e[i];return t},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},$:function(e,t,i){return t&&"string"!=typeof t&&(i=t,t=""),"string"==typeof e?$(e,i?i.treeObj.get(0).ownerDocument:null):$("#"+e.tId+t,i?i.treeObj:null)},getMDom:function(e,t,i){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var n=0,a=i.length;t.tagName&&n<a;n++)if(tools.eqs(t.tagName,i[n].tagName)&&null!==t.getAttribute(i[n].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return $(e).parent("li").get(0)||$(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return 0<$(e).closest("#"+t).length},uCanDo:function(e,t){return!0}},view={addNodes:function(e,t,i,n){if(!e.data.keep.leaf||!t||t.isParent)if(tools.isArray(i)||(i=[i]),e.data.simpleData.enable&&(i=data.transformTozTreeFormat(e,i)),t){var a=$$(t,consts.id.SWITCH,e),o=$$(t,consts.id.ICON,e),s=$$(t,consts.id.UL,e);t.open||(view.replaceSwitchClass(t,a,consts.folder.CLOSE),view.replaceIcoClass(t,o,consts.folder.CLOSE),t.open=!1,s.css({display:"none"})),data.addNodesData(e,t,i),view.createNodes(e,t.level+1,i,t),n||view.expandCollapseParentNode(e,t,!0)}else data.addNodesData(e,data.getRoot(e),i),view.createNodes(e,0,i,null)},appendNodes:function(e,t,i,n,a,o){if(!i)return[];for(var s=[],r=e.data.key.children,l=0,d=i.length;l<d;l++){var c=i[l];if(a){var h=(n||data.getRoot(e))[r].length==i.length&&0==l,u=l==i.length-1;data.initNode(e,t,c,n,h,u,o),data.addNodeCache(e,c)}var p=[];c[r]&&0<c[r].length&&(p=view.appendNodes(e,t+1,c[r],c,a,o&&c.open)),o&&(view.makeDOMNodeMainBefore(s,e,c),view.makeDOMNodeLine(s,e,c),data.getBeforeA(e,c,s),view.makeDOMNodeNameBefore(s,e,c),data.getInnerBeforeA(e,c,s),view.makeDOMNodeIcon(s,e,c),data.getInnerAfterA(e,c,s),view.makeDOMNodeNameAfter(s,e,c),data.getAfterA(e,c,s),c.isParent&&c.open&&view.makeUlHtml(e,c,s,p.join("")),view.makeDOMNodeMainAfter(s,e,c),data.addCreatedNode(e,c))}return s},appendParentULDom:function(e,t){var i=[],n=$$(t,e);!n.get(0)&&t.parentTId&&(view.appendParentULDom(e,t.getParentNode()),n=$$(t,e));var a=$$(t,consts.id.UL,e);a.get(0)&&a.remove();var o=e.data.key.children,s=view.appendNodes(e,t.level+1,t[o],t,!1,!0);view.makeUlHtml(e,t,i,s.join("")),n.append(i.join(""))},asyncNode:function(setting,node,isSilent,callback){var i,l;if(node&&!node.isParent)return tools.apply(callback),!1;if(node&&node.isAjaxing)return!1;if(0==tools.apply(setting.callback.beforeAsync,[setting.treeId,node],!0))return tools.apply(callback),!1;if(node){node.isAjaxing=!0;var icoObj=$$(node,consts.id.ICON,setting);icoObj.attr({style:"",class:consts.className.BUTTON+" "+consts.className.ICO_LOADING})}var tmpParam={};for(i=0,l=setting.async.autoParam.length;node&&i<l;i++){var pKey=setting.async.autoParam[i].split("="),spKey=pKey;1<pKey.length&&(spKey=pKey[1],pKey=pKey[0]),tmpParam[spKey]=node[pKey]}if(tools.isArray(setting.async.otherParam))for(i=0,l=setting.async.otherParam.length;i<l;i+=2)tmpParam[setting.async.otherParam[i]]=setting.async.otherParam[i+1];else for(var p in setting.async.otherParam)tmpParam[p]=setting.async.otherParam[p];var _tmpV=data.getRoot(setting)._ver;return $.ajax({contentType:setting.async.contentType,type:setting.async.type,url:tools.apply(setting.async.url,[setting.treeId,node],setting.async.url),data:tmpParam,dataType:setting.async.dataType,success:function(msg){if(_tmpV==data.getRoot(setting)._ver){var newNodes=[];try{newNodes=msg&&0!=msg.length?"string"==typeof msg?eval("("+msg+")"):msg:[]}catch(e){newNodes=msg}node&&(node.isAjaxing=null,node.zAsync=!0),view.setNodeLineIcos(setting,node),newNodes&&""!==newNodes?(newNodes=tools.apply(setting.async.dataFilter,[setting.treeId,node,newNodes],newNodes),view.addNodes(setting,node,newNodes?tools.clone(newNodes):[],!!isSilent)):view.addNodes(setting,node,[],!!isSilent),setting.treeObj.trigger(consts.event.ASYNC_SUCCESS,[setting.treeId,node,msg]),tools.apply(callback)}},error:function(e,t,i){_tmpV==data.getRoot(setting)._ver&&(node&&(node.isAjaxing=null),view.setNodeLineIcos(setting,node),setting.treeObj.trigger(consts.event.ASYNC_ERROR,[setting.treeId,node,e,t,i]))}}),!0},cancelPreSelectedNode:function(e,t){for(var i=data.getRoot(e).curSelectedList,n=i.length-1;0<=n;n--)if((!t||t===i[n])&&($$(i[n],consts.id.A,e).removeClass(consts.node.CURSELECTED),t)){data.removeSelectedNode(e,t);break}t||(data.getRoot(e).curSelectedList=[])},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=data.getRoot(e);0<t.createdNodes.length;){var i=t.createdNodes.shift();tools.apply(e.view.addDiyDom,[e.treeId,i]),e.callback.onNodeCreated&&e.treeObj.trigger(consts.event.NODECREATED,[e.treeId,i])}},createNodes:function(e,t,i,n){if(i&&0!=i.length){var a=data.getRoot(e),o=e.data.key.children,s=!n||n.open||!!$$(n[o][0],e).get(0);a.createdNodes=[];var r=view.appendNodes(e,t,i,n,!0,s);if(n){var l=$$(n,consts.id.UL,e);l.get(0)&&l.append(r.join(""))}else e.treeObj.append(r.join(""));view.createNodeCallback(e)}},destroy:function(e){e&&(data.initCache(e),data.initRoot(e),event.unbindTree(e),event.unbindEvent(e),e.treeObj.empty(),delete settings[e.treeId])},expandCollapseNode:function(e,t,i,n,a){var o=data.getRoot(e),s=e.data.key.children;if(t){if(o.expandTriggerFlag){var r=a;a=function(){r&&r(),t.open?e.treeObj.trigger(consts.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(consts.event.COLLAPSE,[e.treeId,t])},o.expandTriggerFlag=!1}if(!t.open&&t.isParent&&(!$$(t,consts.id.UL,e).get(0)||t[s]&&0<t[s].length&&!$$(t[s][0],e).get(0))&&(view.appendParentULDom(e,t),view.createNodeCallback(e)),t.open!=i){var l=$$(t,consts.id.UL,e),d=$$(t,consts.id.SWITCH,e),c=$$(t,consts.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&c.attr("style",view.makeNodeIcoStyle(e,t)),t.open?(view.replaceSwitchClass(t,d,consts.folder.OPEN),view.replaceIcoClass(t,c,consts.folder.OPEN),0==n||""==e.view.expandSpeed?(l.show(),tools.apply(a,[])):t[s]&&0<t[s].length?l.slideDown(e.view.expandSpeed,a):(l.show(),tools.apply(a,[]))):(view.replaceSwitchClass(t,d,consts.folder.CLOSE),view.replaceIcoClass(t,c,consts.folder.CLOSE),0!=n&&""!=e.view.expandSpeed&&t[s]&&0<t[s].length?l.slideUp(e.view.expandSpeed,a):(l.hide(),tools.apply(a,[])))):tools.apply(a,[])}else tools.apply(a,[])}else tools.apply(a,[])},expandCollapseParentNode:function(e,t,i,n,a){t&&(t.parentTId?(view.expandCollapseNode(e,t,i,n),t.parentTId&&view.expandCollapseParentNode(e,t.getParentNode(),i,n,a)):view.expandCollapseNode(e,t,i,n,a))},expandCollapseSonNode:function(e,t,i,n,a){var o=data.getRoot(e),s=e.data.key.children,r=t?t[s]:o[s],l=!t&&n,d=data.getRoot(e).expandTriggerFlag;if(data.getRoot(e).expandTriggerFlag=!1,r)for(var c=0,h=r.length;c<h;c++)r[c]&&view.expandCollapseSonNode(e,r[c],i,l);data.getRoot(e).expandTriggerFlag=d,view.expandCollapseNode(e,t,i,n,a)},makeDOMNodeIcon:function(e,t,i){var n=data.getNodeName(t,i),a=t.view.nameIsHTML?n:n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",i.tId,consts.id.ICON,"' title='' treeNode",consts.id.ICON," class='",view.makeNodeIcoClass(t,i),"' style='",view.makeNodeIcoStyle(t,i),"'></span><span id='",i.tId,consts.id.SPAN,"'>",a,"</span>")},makeDOMNodeLine:function(e,t,i){e.push("<span id='",i.tId,consts.id.SWITCH,"' title='' class='",view.makeNodeLineClass(t,i),"' treeNode",consts.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e,t,i){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,i){e.push("<li id='",i.tId,"' class='",consts.className.LEVEL,i.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e,t,i){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,i){var n=data.getNodeTitle(t,i),a=view.makeNodeUrl(t,i),o=view.makeNodeFontCss(t,i),s=[];for(var r in o)s.push(r,":",o[r],";");e.push("<a id='",i.tId,consts.id.A,"' class='",consts.className.LEVEL,i.level,"' treeNode",consts.id.A,' onclick="',i.click||"",'" ',null!=a&&0<a.length?"href='"+a+"'":""," target='",view.makeNodeTarget(i),"' style='",s.join(""),"'"),tools.apply(t.view.showTitle,[t.treeId,i],t.view.showTitle)&&n&&e.push("title='",n.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var i=tools.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return i&&"function"!=typeof i?i:{}},makeNodeIcoClass:function(e,t){var i=["ico"];return t.isAjaxing||(i[0]=(t.iconSkin?t.iconSkin+"_":"")+i[0],t.isParent?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU)),consts.className.BUTTON+" "+i.join("_")},makeNodeIcoStyle:function(e,t){var i=[];if(!t.isAjaxing){var n=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t.icon;n&&i.push("background:url(",n,") 0 0 no-repeat;"),0!=e.view.showIcon&&tools.apply(e.view.showIcon,[e.treeId,t],!0)||i.push("width:0px;height:0px;")}return i.join("")},makeNodeLineClass:function(e,t){var i=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?i.push(consts.line.ROOT):0==t.level&&t.isFirstNode?i.push(consts.line.ROOTS):t.isLastNode?i.push(consts.line.BOTTOM):i.push(consts.line.CENTER):i.push(consts.line.NOLINE),t.isParent?i.push(t.open?consts.folder.OPEN:consts.folder.CLOSE):i.push(consts.folder.DOCU),view.makeNodeLineClassEx(t)+i.join("_")},makeNodeLineClassEx:function(e){return consts.className.BUTTON+" "+consts.className.LEVEL+e.level+" "+consts.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var i=e.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(e,t,i,n){i.push("<ul id='",t.tId,consts.id.UL,"' class='",consts.className.LEVEL,t.level," ",view.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),i.push(n),i.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?consts.line.LINE:""},removeChildNodes:function(e,t){if(t){var i=e.data.key.children,n=t[i];if(n){for(var a=0,o=n.length;a<o;a++)data.removeNodeCache(e,n[a]);if(data.removeSelectedNode(e),delete t[i],e.data.keep.parent)$$(t,consts.id.UL,e).empty();else{t.isParent=!1,t.open=!1;var s=$$(t,consts.id.SWITCH,e),r=$$(t,consts.id.ICON,e);view.replaceSwitchClass(t,s,consts.folder.DOCU),view.replaceIcoClass(t,r,consts.folder.DOCU),$$(t,consts.id.UL,e).remove()}}}},setFirstNode:function(e,t){var i=e.data.key.children;0<t[i].length&&(t[i][0].isFirstNode=!0)},setLastNode:function(e,t){var i=e.data.key.children,n=t[i].length;0<n&&(t[i][n-1].isLastNode=!0)},removeNode:function(e,t){var i=data.getRoot(e),n=e.data.key.children,a=t.parentTId?t.getParentNode():i;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},data.getNodeCache(e,t.tId)){$$(t,e).remove(),data.removeNodeCache(e,t),data.removeSelectedNode(e,t);for(var o=0,s=a[n].length;o<s;o++)if(a[n][o].tId==t.tId){a[n].splice(o,1);break}view.setFirstNode(e,a),view.setLastNode(e,a);var r,l,d,c=a[n].length;if(e.data.keep.parent||0!=c){if(e.view.showLine&&0<c){var h=a[n][c-1];if(r=$$(h,consts.id.UL,e),l=$$(h,consts.id.SWITCH,e),d=$$(h,consts.id.ICON,e),a==i)if(1==a[n].length)view.replaceSwitchClass(h,l,consts.line.ROOT);else{var u=$$(a[n][0],consts.id.SWITCH,e);view.replaceSwitchClass(a[n][0],u,consts.line.ROOTS),view.replaceSwitchClass(h,l,consts.line.BOTTOM)}else view.replaceSwitchClass(h,l,consts.line.BOTTOM);r.removeClass(consts.line.LINE)}}else a.isParent=!1,a.open=!1,r=$$(a,consts.id.UL,e),l=$$(a,consts.id.SWITCH,e),d=$$(a,consts.id.ICON,e),view.replaceSwitchClass(a,l,consts.folder.DOCU),view.replaceIcoClass(a,d,consts.folder.DOCU),r.css("display","none")}},replaceIcoClass:function(e,t,i){if(t&&!e.isAjaxing){var n=t.attr("class");if(null!=n){var a=n.split("_");switch(i){case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[a.length-1]=i}t.attr("class",a.join("_"))}}},replaceSwitchClass:function(e,t,i){if(t){var n=t.attr("class");if(null!=n){var a=n.split("_");switch(i){case consts.line.ROOT:case consts.line.ROOTS:case consts.line.CENTER:case consts.line.BOTTOM:case consts.line.NOLINE:a[0]=view.makeNodeLineClassEx(e)+i;break;case consts.folder.OPEN:case consts.folder.CLOSE:case consts.folder.DOCU:a[1]=i}t.attr("class",a.join("_")),i!==consts.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,i){i||view.cancelPreSelectedNode(e),$$(t,consts.id.A,e).addClass(consts.node.CURSELECTED),data.addSelectedNode(e,t)},setNodeFontCss:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeFontCss(e,t);n&&i.css(n)},setNodeLineIcos:function(e,t){if(t){var i=$$(t,consts.id.SWITCH,e),n=$$(t,consts.id.UL,e),a=$$(t,consts.id.ICON,e),o=view.makeUlLineClass(e,t);0==o.length?n.removeClass(consts.line.LINE):n.addClass(o),i.attr("class",view.makeNodeLineClass(e,t)),t.isParent?i.removeAttr("disabled"):i.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",view.makeNodeIcoStyle(e,t)),a.attr("class",view.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var i=data.getNodeTitle(e,t),n=$$(t,consts.id.SPAN,e);(n.empty(),e.view.nameIsHTML?n.html(data.getNodeName(e,t)):n.text(data.getNodeName(e,t)),tools.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle))&&$$(t,consts.id.A,e).attr("title",i||"")},setNodeTarget:function(e,t){$$(t,consts.id.A,e).attr("target",view.makeNodeTarget(t))},setNodeUrl:function(e,t){var i=$$(t,consts.id.A,e),n=view.makeNodeUrl(e,t);null==n||0==n.length?i.removeAttr("href"):i.attr("href",n)},switchNode:function(e,t){if(t.open||!tools.canAsync(e,t))view.expandCollapseNode(e,t,!t.open);else if(e.async.enable){if(!view.asyncNode(e,t))return void view.expandCollapseNode(e,t,!t.open)}else t&&view.expandCollapseNode(e,t,!t.open)}};$.fn.zTree={consts:_consts,_z:{tools:tools,view:view,event:event,data:data},getZTreeObj:function(e){var t=data.getZTreeTools(e);return t||null},destroy:function(e){if(e&&0<e.length)view.destroy(data.getSetting(e));else for(var t in settings)view.destroy(settings[t])},init:function(e,t,i){var r=tools.clone(_setting);$.extend(!0,r,t),r.treeId=e.attr("id"),r.treeObj=e,r.treeObj.empty(),settings[r.treeId]=r,void 0===document.body.style.maxHeight&&(r.view.expandSpeed=""),data.initRoot(r);var n=data.getRoot(r),a=r.data.key.children;i=i?tools.clone(tools.isArray(i)?i:[i]):[],r.data.simpleData.enable?n[a]=data.transformTozTreeFormat(r,i):n[a]=i,data.initCache(r),event.unbindTree(r),event.bindTree(r),event.unbindEvent(r),event.bindEvent(r);var o={setting:r,addNodes:function(e,t,i){if(!t)return null;if(e||(e=null),e&&!e.isParent&&r.data.keep.leaf)return null;var n=tools.clone(tools.isArray(t)?t:[t]);function a(){view.addNodes(r,e,n,1==i)}return tools.canAsync(r,e)?view.asyncNode(r,e,i,a):a(),n},cancelSelectedNode:function(e){view.cancelPreSelectedNode(r,e)},destroy:function(){view.destroy(r)},expandAll:function(e){return e=!!e,view.expandCollapseSonNode(r,null,e,!0),e},expandNode:function(e,t,i,n,a){if(!e||!e.isParent)return null;if(!0!==t&&!1!==t&&(t=!e.open),(a=!!a)&&t&&0==tools.apply(r.callback.beforeExpand,[r.treeId,e],!0))return null;if(a&&!t&&0==tools.apply(r.callback.beforeCollapse,[r.treeId,e],!0))return null;if(t&&e.parentTId&&view.expandCollapseParentNode(r,e.getParentNode(),t,!1),t===e.open&&!i)return null;if(data.getRoot(r).expandTriggerFlag=a,!tools.canAsync(r,e)&&i)view.expandCollapseSonNode(r,e,t,!0,function(){if(!1!==n)try{$$(e,r).focus().blur()}catch(e){}});else if(e.open=!t,view.switchNode(this.setting,e),!1!==n)try{$$(e,r).focus().blur()}catch(e){}return t},getNodes:function(){return data.getNodes(r)},getNodeByParam:function(e,t,i){return e?data.getNodeByParam(r,i?i[r.data.key.children]:data.getNodes(r),e,t):null},getNodeByTId:function(e){return data.getNodeCache(r,e)},getNodesByParam:function(e,t,i){return e?data.getNodesByParam(r,i?i[r.data.key.children]:data.getNodes(r),e,t):null},getNodesByParamFuzzy:function(e,t,i){return e?data.getNodesByParamFuzzy(r,i?i[r.data.key.children]:data.getNodes(r),e,t):null},getNodesByFilter:function(e,t,i,n){return t=!!t,e&&"function"==typeof e?data.getNodesByFilter(r,i?i[r.data.key.children]:data.getNodes(r),e,t,n):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=r.data.key.children,i=e.parentTId?e.getParentNode():data.getRoot(r),n=0,a=i[t].length;n<a;n++)if(i[t][n]==e)return n;return-1},getSelectedNodes:function(){for(var e=[],t=data.getRoot(r).curSelectedList,i=0,n=t.length;i<n;i++)e.push(t[i]);return e},isSelectedNode:function(e){return data.isSelectedNode(r,e)},reAsyncChildNodes:function(e,t,i){if(this.setting.async.enable){var n=!e;if(n&&(e=data.getRoot(r)),"refresh"==t){for(var a=this.setting.data.key.children,o=0,s=e[a]?e[a].length:0;o<s;o++)data.removeNodeCache(r,e[a][o]);if(data.removeSelectedNode(r),e[a]=[],n)this.setting.treeObj.empty();else $$(e,consts.id.UL,r).empty()}view.asyncNode(this.setting,n?null:e,!!i)}},refresh:function(){this.setting.treeObj.empty();var e=data.getRoot(r),t=e[r.data.key.children];data.initRoot(r),e[r.data.key.children]=t,data.initCache(r),view.createNodes(r,0,e[r.data.key.children])},removeChildNodes:function(e){if(!e)return null;var t=e[r.data.key.children];return view.removeChildNodes(r,e),t||null},removeNode:function(e,t){e&&((t=!!t)&&0==tools.apply(r.callback.beforeRemove,[r.treeId,e],!0)||(view.removeNode(r,e),t&&this.setting.treeObj.trigger(consts.event.REMOVE,[r.treeId,e])))},selectNode:function(e,t){if(e&&tools.uCanDo(r)){if(t=r.view.selectedMulti&&t,e.parentTId)view.expandCollapseParentNode(r,e.getParentNode(),!0,!1,function(){try{$$(e,r).focus().blur()}catch(e){}});else try{$$(e,r).focus().blur()}catch(e){}view.selectNode(r,e,t)}},transformTozTreeNodes:function(e){return data.transformTozTreeFormat(r,e)},transformToArray:function(e){return data.transformToArrayFormat(r,e)},updateNode:function(e,t){e&&($$(e,r).get(0)&&tools.uCanDo(r)&&(view.setNodeName(r,e),view.setNodeTarget(r,e),view.setNodeUrl(r,e),view.setNodeLineIcos(r,e),view.setNodeFontCss(r,e)))}};return n.treeTools=o,data.setZTreeTools(r,o),n[a]&&0<n[a].length?view.createNodes(r,0,n[a]):r.async.enable&&r.async.url&&""!==r.async.url&&view.asyncNode(r),o}};var zt=$.fn.zTree,$$=tools.$,consts=zt.consts}(jQuery),function(e){var t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},i={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}},r={onCheckNode:function(e,t){if(!0===t.chkDisabled)return!1;var i=p.getSetting(e.data.treeId),n=i.data.key.checked;if(0==l.apply(i.callback.beforeCheck,[i.treeId,t],!0))return!0;t[n]=!t[n],u.checkNodeRelation(i,t);var a=f(t,h.id.CHECK,i);return u.setChkClass(i,a,t),u.repairParentChkClassWithSelf(i,t),i.treeObj.trigger(h.event.CHECK,[e,i.treeId,t]),!0},onMouseoverCheck:function(e,t){if(!0===t.chkDisabled)return!1;var i=p.getSetting(e.data.treeId),n=f(t,h.id.CHECK,i);return t.check_Focus=!0,u.setChkClass(i,n,t),!0},onMouseoutCheck:function(e,t){if(!0===t.chkDisabled)return!1;var i=p.getSetting(e.data.treeId),n=f(t,h.id.CHECK,i);return t.check_Focus=!1,u.setChkClass(i,n,t),!0}},n={tools:{},view:{checkNodeRelation:function(e,t){var i,n,a,o=e.data.key.children,s=e.data.key.checked,r=h.radio;if(e.check.chkStyle==r.STYLE){var l=p.getRadioCheckedList(e);if(t[s])if(e.check.radioType==r.TYPE_ALL){for(n=l.length-1;0<=n;n--)(i=l[n])[s]&&i!=t&&(i[s]=!1,l.splice(n,1),u.setChkClass(e,f(i,h.id.CHECK,e),i),i.parentTId!=t.parentTId&&u.repairParentChkClassWithSelf(e,i));l.push(t)}else{var d=t.parentTId?t.getParentNode():p.getRoot(e);for(n=0,a=d[o].length;n<a;n++)(i=d[o][n])[s]&&i!=t&&(i[s]=!1,u.setChkClass(e,f(i,h.id.CHECK,e),i))}else if(e.check.radioType==r.TYPE_ALL)for(n=0,a=l.length;n<a;n++)if(t==l[n]){l.splice(n,1);break}}else t[s]&&(!t[o]||0==t[o].length||-1<e.check.chkboxType.Y.indexOf("s"))&&u.setSonNodeCheckBox(e,t,!0),t[s]||t[o]&&0!=t[o].length&&!(-1<e.check.chkboxType.N.indexOf("s"))||u.setSonNodeCheckBox(e,t,!1),t[s]&&-1<e.check.chkboxType.Y.indexOf("p")&&u.setParentNodeCheckBox(e,t,!0),!t[s]&&-1<e.check.chkboxType.N.indexOf("p")&&u.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var i=e.data.key.checked,n=h.checkbox,a=h.radio,o="";o=!0===t.chkDisabled?n.DISABLED:t.halfCheck?n.PART:e.check.chkStyle==a.STYLE?t.check_Child_State<1?n.FULL:n.PART:t[i]?2===t.check_Child_State||-1===t.check_Child_State?n.FULL:n.PART:t.check_Child_State<1?n.FULL:n.PART;var s=e.check.chkStyle+"_"+(t[i]?n.TRUE:n.FALSE)+"_"+o;return s=t.check_Focus&&!0!==t.chkDisabled?s+"_"+n.FOCUS:s,h.className.BUTTON+" "+n.DEFAULT+" "+s},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===h.checkbox.STYLE)for(var i=e.data.key.checked,n=e.data.key.children,a=p.getRoot(e),o=0,s=a[n].length;o<s;o++){var r=a[n][o];!0!==r.nocheck&&!0!==r.chkDisabled&&(r[i]=t),u.setSonNodeCheckBox(e,r,t)}},repairChkClass:function(e,t){if(t&&(p.makeChkFlag(e,t),!0!==t.nocheck)){var i=f(t,h.id.CHECK,e);u.setChkClass(e,i,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var i=t.getParentNode();u.repairChkClass(e,i),u.repairParentChkClass(e,i)}},repairParentChkClassWithSelf:function(e,t){if(t){var i=e.data.key.children;t[i]&&0<t[i].length?u.repairParentChkClass(e,t[i][0]):u.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,i,n){if(t){var a=e.data.key.children;if(t.chkDisabled!=i&&(t.chkDisabled=i),u.repairChkClass(e,t),t[a]&&n)for(var o=0,s=t[a].length;o<s;o++){var r=t[a][o];u.repairSonChkDisabled(e,r,i,n)}}},repairParentChkDisabled:function(e,t,i,n){t&&(t.chkDisabled!=i&&n&&(t.chkDisabled=i),u.repairChkClass(e,t),u.repairParentChkDisabled(e,t.getParentNode(),i,n))},setChkClass:function(e,t,i){t&&(!0===i.nocheck?t.hide():t.show(),t.attr("class",u.makeChkClass(e,i)))},setParentNodeCheckBox:function(e,t,i,n){var a=e.data.key.children,o=e.data.key.checked,s=f(t,h.id.CHECK,e);if(n||(n=t),p.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled&&(t[o]=i,u.setChkClass(e,s,t),e.check.autoCheckTrigger&&t!=n&&e.treeObj.trigger(h.event.CHECK,[null,e.treeId,t])),t.parentTId){var r=!0;if(!i)for(var l=t.getParentNode()[a],d=0,c=l.length;d<c;d++)if(!0!==l[d].nocheck&&!0!==l[d].chkDisabled&&l[d][o]||(!0===l[d].nocheck||!0===l[d].chkDisabled)&&0<l[d].check_Child_State){r=!1;break}r&&u.setParentNodeCheckBox(e,t.getParentNode(),i,n)}},setSonNodeCheckBox:function(e,t,i,n){if(t){var a=e.data.key.children,o=e.data.key.checked,s=f(t,h.id.CHECK,e);n||(n=t);var r=!1;if(t[a])for(var l=0,d=t[a].length;l<d&&!0!==t.chkDisabled;l++){var c=t[a][l];u.setSonNodeCheckBox(e,c,i,n),!0===c.chkDisabled&&(r=!0)}t!=p.getRoot(e)&&!0!==t.chkDisabled&&(r&&!0!==t.nocheck&&p.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled?(t[o]=i,r||(t.check_Child_State=t[a]&&0<t[a].length?i?2:0:-1)):t.check_Child_State=-1,u.setChkClass(e,s,t),e.check.autoCheckTrigger&&t!=n&&!0!==t.nocheck&&!0!==t.chkDisabled&&e.treeObj.trigger(h.event.CHECK,[null,e.treeId,t]))}}},event:{},data:{getRadioCheckedList:function(e){for(var t=p.getRoot(e).radioCheckedList,i=0,n=t.length;i<n;i++)p.getNodeCache(e,t[i].tId)||(t.splice(i,1),i--,n--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var i=e.data.key.checked;return{checked:t[i],half:t.halfCheck?t.halfCheck:e.check.chkStyle==h.radio.STYLE?2===t.check_Child_State:t[i]?-1<t.check_Child_State&&t.check_Child_State<2:0<t.check_Child_State}},getTreeCheckedNodes:function(e,t,i,n){if(!t)return[];var a=e.data.key.children,o=e.data.key.checked,s=i&&e.check.chkStyle==h.radio.STYLE&&e.check.radioType==h.radio.TYPE_ALL;n=n||[];for(var r=0,l=t.length;r<l&&(!0===t[r].nocheck||!0===t[r].chkDisabled||t[r][o]!=i||(n.push(t[r]),!s))&&(p.getTreeCheckedNodes(e,t[r][a],i,n),!(s&&0<n.length));r++);return n},getTreeChangeCheckedNodes:function(e,t,i){if(!t)return[];var n=e.data.key.children,a=e.data.key.checked;i=i||[];for(var o=0,s=t.length;o<s;o++)!0!==t[o].nocheck&&!0!==t[o].chkDisabled&&t[o][a]!=t[o].checkedOld&&i.push(t[o]),p.getTreeChangeCheckedNodes(e,t[o][n],i);return i},makeChkFlag:function(e,t){if(t){var i=e.data.key.children,n=e.data.key.checked,a=-1;if(t[i])for(var o=0,s=t[i].length;o<s;o++){var r=t[i][o],l=-1;if(e.check.chkStyle==h.radio.STYLE){if(2==(l=!0===r.nocheck||!0===r.chkDisabled?r.check_Child_State:!0===r.halfCheck?2:r[n]?2:0<r.check_Child_State?2:0)){a=2;break}0==l&&(a=0)}else if(e.check.chkStyle==h.checkbox.STYLE){if(1===(l=!0===r.nocheck||!0===r.chkDisabled?r.check_Child_State:!0===r.halfCheck?1:r[n]?-1===r.check_Child_State||2===r.check_Child_State?2:1:0<r.check_Child_State?1:0)){a=1;break}if(2===l&&-1<a&&0<o&&l!==a){a=1;break}if(2===a&&-1<l&&l<2){a=1;break}-1<l&&(a=l)}}t.check_Child_State=a}}}};e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,n);var a=e.fn.zTree,l=a._z.tools,h=a.consts,u=a._z.view,p=a._z.data,f=(a._z.event,l.$);p.exSetting(i),p.addInitBind(function(a){var e=a.treeObj,t=h.event;e.bind(t.CHECK,function(e,t,i,n){e.srcEvent=t,l.apply(a.callback.onCheck,[e,i,n])})}),p.addInitUnBind(function(e){var t=e.treeObj,i=h.event;t.unbind(i.CHECK)}),p.addInitCache(function(e){}),p.addInitNode(function(e,t,i,n,a,o,s){if(i){var r=e.data.key.checked;"string"==typeof i[r]&&(i[r]=l.eqs(i[r],"true")),i[r]=!!i[r],i.checkedOld=i[r],"string"==typeof i.nocheck&&(i.nocheck=l.eqs(i.nocheck,"true")),i.nocheck=!!i.nocheck||e.check.nocheckInherit&&n&&!!n.nocheck,"string"==typeof i.chkDisabled&&(i.chkDisabled=l.eqs(i.chkDisabled,"true")),i.chkDisabled=!!i.chkDisabled||e.check.chkDisabledInherit&&n&&!!n.chkDisabled,"string"==typeof i.halfCheck&&(i.halfCheck=l.eqs(i.halfCheck,"true")),i.halfCheck=!!i.halfCheck,i.check_Child_State=-1,i.check_Focus=!1,i.getCheckStatus=function(){return p.getCheckStatus(e,i)},e.check.chkStyle==h.radio.STYLE&&e.check.radioType==h.radio.TYPE_ALL&&i[r]&&p.getRoot(e).radioCheckedList.push(i)}}),p.addInitProxy(function(e){var t=e.target,i=p.getSetting(e.data.treeId),n="",a=null,o="",s=null;if(l.eqs(e.type,"mouseover")?i.check.enable&&l.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+h.id.CHECK)&&(n=l.getNodeMainDom(t).id,o="mouseoverCheck"):l.eqs(e.type,"mouseout")?i.check.enable&&l.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+h.id.CHECK)&&(n=l.getNodeMainDom(t).id,o="mouseoutCheck"):l.eqs(e.type,"click")&&i.check.enable&&l.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+h.id.CHECK)&&(n=l.getNodeMainDom(t).id,o="checkNode"),0<n.length)switch(a=p.getNodeCache(i,n),o){case"checkNode":s=r.onCheckNode;break;case"mouseoverCheck":s=r.onMouseoverCheck;break;case"mouseoutCheck":s=r.onMouseoutCheck}return{stop:"checkNode"===o,node:a,nodeEventType:o,nodeEventCallback:s,treeEventType:"",treeEventCallback:null}},!0),p.addInitRoot(function(e){p.getRoot(e).radioCheckedList=[]}),p.addBeforeA(function(e,t,i){e.data.key.checked;e.check.enable&&(p.makeChkFlag(e,t),i.push("<span ID='",t.tId,h.id.CHECK,"' class='",u.makeChkClass(e,t),"' treeNode",h.id.CHECK,!0===t.nocheck?" style='display:none;'":"","></span>"))}),p.addZTreeTools(function(e,n){n.checkNode=function(e,t,i,n){var a=this.setting.data.key.checked;if(!0!==e.chkDisabled&&(!0!==t&&!1!==t&&(t=!e[a]),n=!!n,(e[a]!==t||i)&&(!n||0!=l.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0))&&l.uCanDo(this.setting)&&this.setting.check.enable&&!0!==e.nocheck)){e[a]=t;var o=f(e,h.id.CHECK,this.setting);(i||this.setting.check.chkStyle===h.radio.STYLE)&&u.checkNodeRelation(this.setting,e),u.setChkClass(this.setting,o,e),u.repairParentChkClassWithSelf(this.setting,e),n&&this.setting.treeObj.trigger(h.event.CHECK,[null,this.setting.treeId,e])}},n.checkAllNodes=function(e){u.repairAllChk(this.setting,!!e)},n.getCheckedNodes=function(e){var t=this.setting.data.key.children;return e=!1!==e,p.getTreeCheckedNodes(this.setting,p.getRoot(this.setting)[t],e)},n.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return p.getTreeChangeCheckedNodes(this.setting,p.getRoot(this.setting)[e])},n.setChkDisabled=function(e,t,i,n){t=!!t,i=!!i,n=!!n,u.repairSonChkDisabled(this.setting,e,t,n),u.repairParentChkDisabled(this.setting,e.getParentNode(),t,i)};var a=n.updateNode;n.updateNode=function(e,t){if(a&&a.apply(n,arguments),e&&this.setting.check.enable&&f(e,this.setting).get(0)&&l.uCanDo(this.setting)){var i=f(e,h.id.CHECK,this.setting);1!=t&&this.setting.check.chkStyle!==h.radio.STYLE||u.checkNodeRelation(this.setting,e),u.setChkClass(this.setting,i,e),u.repairParentChkClassWithSelf(this.setting,e)}}});var o=u.createNodes;u.createNodes=function(e,t,i,n){o&&o.apply(u,arguments),i&&u.repairParentChkClassWithSelf(e,n)};var s=u.removeNode;u.removeNode=function(e,t){var i=t.getParentNode();s&&s.apply(u,arguments),t&&i&&(u.repairChkClass(e,i),u.repairParentChkClass(e,i))};var d=u.appendNodes;u.appendNodes=function(e,t,i,n,a,o){var s="";return d&&(s=d.apply(u,arguments)),n&&p.makeChkFlag(e,n),s}}(jQuery),function(be){var we={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},d={onHoverOverNode:function(e,t){var i=Te.getSetting(e.data.treeId),n=Te.getRoot(i);n.curHoverNode!=t&&d.onHoverOutNode(e),n.curHoverNode=t,ke.addHoverDom(i,t)},onHoverOutNode:function(e,t){var i=Te.getSetting(e.data.treeId),n=Te.getRoot(i);n.curHoverNode&&!Te.isSelectedNode(i,n.curHoverNode)&&(ke.removeTreeDom(i,n.curHoverNode),n.curHoverNode=null)},onMousedownNode:function(e,t){var i,n,X=Te.getSetting(e.data.treeId),G=Te.getRoot(X),J=Te.getRoots();if(2==e.button||!X.edit.enable||!X.edit.drag.isCopy&&!X.edit.drag.isMove)return!0;var a=e.target,o=Te.getRoot(X).curSelectedList,ee=[];if(Te.isSelectedNode(X,t))for(i=0,n=o.length;i<n;i++){if(o[i].editNameFlag&&ye.eqs(a.tagName,"input")&&null!==a.getAttribute("treeNode"+Ce.id.INPUT))return!0;if(ee.push(o[i]),ee[0].parentTId!==o[i].parentTId){ee=[t];break}}else ee=[t];ke.editNodeBlur=!0,ke.cancelCurEditNode(X);var te,ie,ne,ae,oe,se=be(X.treeObj.get(0).ownerDocument),re=be(X.treeObj.get(0).ownerDocument.body),le=!1,de=X,l=X,ce=null,he=null,ue=null,pe=Ce.move.TYPE_INNER,fe=e.clientX,ge=e.clientY,me=(new Date).getTime();function d(e){if(0==G.dragFlag&&Math.abs(fe-e.clientX)<X.edit.drag.minMoveSize&&Math.abs(ge-e.clientY)<X.edit.drag.minMoveSize)return!0;var t,i,n,a,o,s=X.data.key.children;if(re.css("cursor","pointer"),0==G.dragFlag){if(0==ye.apply(X.callback.beforeDrag,[X.treeId,ee],!0))return ve(e),!0;for(t=0,i=ee.length;t<i;t++)0==t&&(G.dragNodeShowBefore=[]),(n=ee[t]).isParent&&n.open?(ke.expandCollapseNode(X,n,!n.open),G.dragNodeShowBefore[n.tId]=!0):G.dragNodeShowBefore[n.tId]=!1;G.dragFlag=1,J.showHoverDom=!1,ye.showIfameMask(X,!0);var r=!0,l=-1;if(1<ee.length){var d=ee[0].parentTId?ee[0].getParentNode()[s]:Te.getNodes(X);for(o=[],t=0,i=d.length;t<i;t++)if(void 0!==G.dragNodeShowBefore[d[t].tId]&&(r&&-1<l&&l+1!==t&&(r=!1),o.push(d[t]),l=t),ee.length===o.length){ee=o;break}}for(r&&(ae=ee[0].getPreNode(),oe=ee[ee.length-1].getNextNode()),te=xe("<ul class='zTreeDragUL'></ul>",X),t=0,i=ee.length;t<i;t++)(n=ee[t]).editNameFlag=!1,ke.selectNode(X,n,0<t),ke.removeTreeDom(X,n),t>X.edit.drag.maxShowNodeNum-1||((a=xe("<li id='"+n.tId+"_tmp'></li>",X)).append(xe(n,Ce.id.A,X).clone()),a.css("padding","0"),a.children("#"+n.tId+Ce.id.A).removeClass(Ce.node.CURSELECTED),te.append(a),t==X.edit.drag.maxShowNodeNum-1&&(a=xe("<li id='"+n.tId+"_moretmp'><a>  ...  </a></li>",X),te.append(a)));te.attr("id",ee[0].tId+Ce.id.UL+"_tmp"),te.addClass(X.treeObj.attr("class")),te.appendTo(re),(ie=xe("<span class='tmpzTreeMove_arrow'></span>",X)).attr("id","zTreeMove_arrow_tmp"),ie.appendTo(re),X.treeObj.trigger(Ce.event.DRAG,[e,X.treeId,ee])}if(1==G.dragFlag){if(ne&&ie.attr("id")==e.target.id&&ue&&e.clientX+se.scrollLeft()+2>be("#"+ue+Ce.id.A,ne).offset().left){var c=be("#"+ue+Ce.id.A,ne);e.target=0<c.length?c.get(0):e.target}else ne&&(ne.removeClass(Ce.node.TMPTARGET_TREE),ue&&be("#"+ue+Ce.id.A,ne).removeClass(Ce.node.TMPTARGET_NODE+"_"+Ce.move.TYPE_PREV).removeClass(Ce.node.TMPTARGET_NODE+"_"+we.move.TYPE_NEXT).removeClass(Ce.node.TMPTARGET_NODE+"_"+we.move.TYPE_INNER));ue=ne=null,le=!1,de=X;var h=Te.getSettings();for(var u in h)h[u].treeId&&h[u].edit.enable&&h[u].treeId!=X.treeId&&(e.target.id==h[u].treeId||0<be(e.target).parents("#"+h[u].treeId).length)&&(le=!0,de=h[u]);var p=se.scrollTop(),f=se.scrollLeft(),g=de.treeObj.offset(),m=de.treeObj.get(0).scrollHeight,v=de.treeObj.get(0).scrollWidth,b=e.clientY+p-g.top,w=de.treeObj.height()+g.top-e.clientY-p,y=e.clientX+f-g.left,C=de.treeObj.width()+g.left-e.clientX-f,k=b<X.edit.drag.borderMax&&b>X.edit.drag.borderMin,T=w<X.edit.drag.borderMax&&w>X.edit.drag.borderMin,x=y<X.edit.drag.borderMax&&y>X.edit.drag.borderMin,N=C<X.edit.drag.borderMax&&C>X.edit.drag.borderMin,E=b>X.edit.drag.borderMin&&w>X.edit.drag.borderMin&&y>X.edit.drag.borderMin&&C>X.edit.drag.borderMin,_=k&&de.treeObj.scrollTop()<=0,D=T&&de.treeObj.scrollTop()+de.treeObj.height()+10>=m,S=x&&de.treeObj.scrollLeft()<=0,I=N&&de.treeObj.scrollLeft()+de.treeObj.width()+10>=v;if(e.target&&ye.isChildOrSelf(e.target,de.treeId)){for(var $=e.target;$&&$.tagName&&!ye.eqs($.tagName,"li")&&$.id!=de.treeId;)$=$.parentNode;var P=!0;for(t=0,i=ee.length;t<i;t++){if(n=ee[t],$.id===n.tId){P=!1;break}if(0<xe(n,X).find("#"+$.id).length){P=!1;break}}P&&e.target&&ye.isChildOrSelf(e.target,$.id+Ce.id.A)&&(ne=be($),ue=$.id)}n=ee[0],E&&ye.isChildOrSelf(e.target,de.treeId)&&(!ne&&(e.target.id==de.treeId||_||D||S||I)&&(le||!le&&n.parentTId)&&(ne=de.treeObj),k?de.treeObj.scrollTop(de.treeObj.scrollTop()-10):T&&de.treeObj.scrollTop(de.treeObj.scrollTop()+10),x?de.treeObj.scrollLeft(de.treeObj.scrollLeft()-10):N&&de.treeObj.scrollLeft(de.treeObj.scrollLeft()+10),ne&&ne!=de.treeObj&&ne.offset().left<de.treeObj.offset().left&&de.treeObj.scrollLeft(de.treeObj.scrollLeft()+ne.offset().left-de.treeObj.offset().left)),te.css({top:e.clientY+p+3+"px",left:e.clientX+f+3+"px"});var F=0,A=0;if(ne&&ne.attr("id")!=de.treeId){var O=null==ue?null:Te.getNodeCache(de,ue),M=(e.ctrlKey||e.metaKey)&&X.edit.drag.isMove&&X.edit.drag.isCopy||!X.edit.drag.isMove&&X.edit.drag.isCopy,L=!(!ae||ue!==ae.tId),U=!(!oe||ue!==oe.tId),R=n.parentTId&&n.parentTId==ue,z=(M||!U)&&ye.apply(de.edit.drag.prev,[de.treeId,ee,O],!!de.edit.drag.prev),j=(M||!L)&&ye.apply(de.edit.drag.next,[de.treeId,ee,O],!!de.edit.drag.next),H=(M||!R)&&!(de.data.keep.leaf&&!O.isParent)&&ye.apply(de.edit.drag.inner,[de.treeId,ee,O],!!de.edit.drag.inner);if(z||j||H){var B=be("#"+ue+Ce.id.A,ne),V=O.isLastNode?null:be("#"+O.getNextNode().tId+Ce.id.A,ne.next()),Y=B.offset().top,W=B.offset().left,Z=z?H?.25:j?.5:1:-1,q=j?H?.75:z?.5:0:-1,K=(e.clientY+p-Y)/B.height();if(pe=(1==Z||K<=Z&&-.2<=K)&&z?(F=1-ie.width(),A=Y-ie.height()/2,Ce.move.TYPE_PREV):(0==q||q<=K&&K<=1.2)&&j?(F=1-ie.width(),A=null==V||O.isParent&&O.open?Y+B.height()-ie.height()/2:V.offset().top-ie.height()/2,Ce.move.TYPE_NEXT):(F=5-ie.width(),A=Y,Ce.move.TYPE_INNER),ie.css({display:"block",top:A+"px",left:W+F+"px"}),B.addClass(Ce.node.TMPTARGET_NODE+"_"+pe),ce==ue&&he==pe||(me=(new Date).getTime()),O&&O.isParent&&pe==Ce.move.TYPE_INNER){var Q=!0;window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==O.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===O.tId&&(Q=!1),Q&&(window.zTreeMoveTimer=setTimeout(function(){pe==Ce.move.TYPE_INNER&&O&&O.isParent&&!O.open&&(new Date).getTime()-me>de.edit.drag.autoOpenTime&&ye.apply(de.callback.beforeDragOpen,[de.treeId,O],!0)&&(ke.switchNode(de,O),de.edit.drag.autoExpandTrigger&&de.treeObj.trigger(Ce.event.EXPAND,[de.treeId,O]))},de.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=O.tId)}}else ne=null,ue="",pe=Ce.move.TYPE_INNER,ie.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)}else pe=Ce.move.TYPE_INNER,ne&&ye.apply(de.edit.drag.inner,[de.treeId,ee,null],!!de.edit.drag.inner)?ne.addClass(Ce.node.TMPTARGET_TREE):ne=null,ie.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);ce=ue,he=pe,X.treeObj.trigger(Ce.event.DRAGMOVE,[e,X.treeId,ee])}return!1}function ve(i){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),he=ce=null,se.unbind("mousemove",d),se.unbind("mouseup",ve),se.unbind("selectstart",c),re.css("cursor","auto"),ne&&(ne.removeClass(Ce.node.TMPTARGET_TREE),ue&&be("#"+ue+Ce.id.A,ne).removeClass(Ce.node.TMPTARGET_NODE+"_"+Ce.move.TYPE_PREV).removeClass(Ce.node.TMPTARGET_NODE+"_"+we.move.TYPE_NEXT).removeClass(Ce.node.TMPTARGET_NODE+"_"+we.move.TYPE_INNER)),ye.showIfameMask(X,!1),J.showHoverDom=!0,0!=G.dragFlag){var e,t,n;for(e=G.dragFlag=0,t=ee.length;e<t;e++)(n=ee[e]).isParent&&G.dragNodeShowBefore[n.tId]&&!n.open&&(ke.expandCollapseNode(X,n,!n.open),delete G.dragNodeShowBefore[n.tId]);te&&te.remove(),ie&&ie.remove();var a=(i.ctrlKey||i.metaKey)&&X.edit.drag.isMove&&X.edit.drag.isCopy||!X.edit.drag.isMove&&X.edit.drag.isCopy;if(!a&&ne&&ue&&ee[0].parentTId&&ue==ee[0].parentTId&&pe==Ce.move.TYPE_INNER&&(ne=null),ne){var o=null==ue?null:Te.getNodeCache(de,ue);if(0==ye.apply(X.callback.beforeDrop,[de.treeId,ee,o,pe,a],!0))return void ke.selectNodes(l,ee);var s=a?ye.clone(ee):ee;function r(){if(le){if(!a)for(var e=0,t=ee.length;e<t;e++)ke.removeNode(X,ee[e]);if(pe==Ce.move.TYPE_INNER)ke.addNodes(de,o,s);else if(ke.addNodes(de,o.getParentNode(),s),pe==Ce.move.TYPE_PREV)for(e=0,t=s.length;e<t;e++)ke.moveNode(de,o,s[e],pe,!1);else for(e=-1,t=s.length-1;e<t;t--)ke.moveNode(de,o,s[t],pe,!1)}else if(a&&pe==Ce.move.TYPE_INNER)ke.addNodes(de,o,s);else if(a&&ke.addNodes(de,o.getParentNode(),s),pe!=Ce.move.TYPE_NEXT)for(e=0,t=s.length;e<t;e++)ke.moveNode(de,o,s[e],pe,!1);else for(e=-1,t=s.length-1;e<t;t--)ke.moveNode(de,o,s[t],pe,!1);ke.selectNodes(de,s),xe(s[0],X).focus().blur(),X.treeObj.trigger(Ce.event.DROP,[i,de.treeId,s,o,pe,a])}pe==Ce.move.TYPE_INNER&&ye.canAsync(de,o)?ke.asyncNode(de,o,!1,r):r()}else ke.selectNodes(l,ee),X.treeObj.trigger(Ce.event.DROP,[i,X.treeId,ee,null,null,null])}}function c(){return!1}return ye.uCanDo(X)&&se.bind("mousemove",d),se.bind("mouseup",ve),se.bind("selectstart",c),e.preventDefault&&e.preventDefault(),!0}},e={tools:{getAbs:function(e){var t=e.getBoundingClientRect(),i=document.body.scrollTop+document.documentElement.scrollTop,n=document.body.scrollLeft+document.documentElement.scrollLeft;return[t.left+n,t.top+i]},inputFocus:function(e){e.get(0)&&(e.focus(),ye.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},showIfameMask:function(e,t){for(var i=Te.getRoot(e);0<i.dragMaskList.length;)i.dragMaskList[0].remove(),i.dragMaskList.shift();if(t)for(var n=xe("iframe",e),a=0,o=n.length;a<o;a++){var s=n.get(a),r=ye.getAbs(s),l=xe("<div id='zTreeMask_"+a+"' class='zTreeMask' style='top:"+r[1]+"px; left:"+r[0]+"px; width:"+s.offsetWidth+"px; height:"+s.offsetHeight+"px;'></div>",e);l.appendTo(xe("body",e)),i.dragMaskList.push(l)}}},view:{addEditBtn:function(e,t){if(!(t.editNameFlag||0<xe(t,Ce.id.EDIT,e).length)&&ye.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var i=xe(t,Ce.id.A,e),n="<span class='"+Ce.className.BUTTON+" edit' id='"+t.tId+Ce.id.EDIT+"' title='"+ye.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+Ce.id.EDIT+" style='display:none;'></span>";i.append(n),xe(t,Ce.id.EDIT,e).bind("click",function(){return ye.uCanDo(e)&&0!=ye.apply(e.callback.beforeEditName,[e.treeId,t],!0)&&ke.editNode(e,t),!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||0<xe(t,Ce.id.REMOVE,e).length)&&ye.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var i=xe(t,Ce.id.A,e),n="<span class='"+Ce.className.BUTTON+" remove' id='"+t.tId+Ce.id.REMOVE+"' title='"+ye.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+Ce.id.REMOVE+" style='display:none;'></span>";i.append(n),xe(t,Ce.id.REMOVE,e).bind("click",function(){return ye.uCanDo(e)&&0!=ye.apply(e.callback.beforeRemove,[e.treeId,t],!0)&&(ke.removeNode(e,t),e.treeObj.trigger(Ce.event.REMOVE,[e.treeId,t])),!1}).bind("mousedown",function(e){return!0}).show()}},addHoverDom:function(e,t){Te.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(ke.addEditBtn(e,t),ke.addRemoveBtn(e,t)),ye.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,i){var n=Te.getRoot(e),a=e.data.key.name,o=n.curEditNode;if(o){var s=n.curEditInput,r=t||(i?o[a]:s.val());if(!1===ye.apply(e.callback.beforeRename,[e.treeId,o,r,i],!0))return!1;o[a]=r,e.treeObj.trigger(Ce.event.RENAME,[e.treeId,o,i]),xe(o,Ce.id.A,e).removeClass(Ce.node.CURSELECTED_EDIT),s.unbind(),ke.setNodeName(e,o),o.editNameFlag=!1,n.curEditNode=null,n.curEditInput=null,ke.selectNode(e,o,!1)}return n.noSelection=!0},editNode:function(t,e){var i=Te.getRoot(t);if(ke.editNodeBlur=!1,Te.isSelectedNode(t,e)&&i.curEditNode==e&&e.editNameFlag)setTimeout(function(){ye.inputFocus(i.curEditInput)},0);else{var n=t.data.key.name;e.editNameFlag=!0,ke.removeTreeDom(t,e),ke.cancelCurEditNode(t),ke.selectNode(t,e,!1),xe(e,Ce.id.SPAN,t).html("<input type=text class='rename' id='"+e.tId+Ce.id.INPUT+"' treeNode"+Ce.id.INPUT+" >");var a=xe(e,Ce.id.INPUT,t);a.attr("value",e[n]),t.edit.editNameSelectAll?ye.inputSelect(a):ye.inputFocus(a),a.bind("blur",function(e){ke.editNodeBlur||ke.cancelCurEditNode(t)}).bind("keydown",function(e){"13"==e.keyCode?(ke.editNodeBlur=!0,ke.cancelCurEditNode(t)):"27"==e.keyCode&&ke.cancelCurEditNode(t,null,!0)}).bind("click",function(e){return!1}).bind("dblclick",function(e){return!1}),xe(e,Ce.id.A,t).addClass(Ce.node.CURSELECTED_EDIT),i.curEditInput=a,i.noSelection=!1,i.curEditNode=e}},moveNode:function(e,t,i,n,a,o){var s=Te.getRoot(e),r=e.data.key.children;if(t!=i&&(!e.data.keep.leaf||!t||t.isParent||n!=Ce.move.TYPE_INNER)){var l=i.parentTId?i.getParentNode():s,d=null===t||t==s;d&&null===t&&(t=s),d&&(n=Ce.move.TYPE_INNER);var c,h,u=t.parentTId?t.getParentNode():s;if(n!=Ce.move.TYPE_PREV&&n!=Ce.move.TYPE_NEXT&&(n=Ce.move.TYPE_INNER),n==Ce.move.TYPE_INNER&&(d?i.parentTId=null:(t.isParent||(t.isParent=!0,t.open=!!t.open,ke.setNodeLineIcos(e,t)),i.parentTId=t.tId)),d)h=c=e.treeObj;else{if(o||n!=Ce.move.TYPE_INNER?o||ke.expandCollapseNode(e,t.getParentNode(),!0,!1):ke.expandCollapseNode(e,t,!0,!1),c=xe(t,e),h=xe(t,Ce.id.UL,e),c.get(0)&&!h.get(0)){var p=[];ke.makeUlHtml(e,t,p,""),c.append(p.join(""))}h=xe(t,Ce.id.UL,e)}var f=xe(i,e);f.get(0)?c.get(0)||f.remove():f=ke.appendNodes(e,i.level,[i],null,!1,!0).join(""),h.get(0)&&n==Ce.move.TYPE_INNER?h.append(f):c.get(0)&&n==Ce.move.TYPE_PREV?c.before(f):c.get(0)&&n==Ce.move.TYPE_NEXT&&c.after(f);var g,m,v=-1,b=0,w=null,y=null,C=i.level;if(i.isFirstNode)v=0,1<l[r].length&&((w=l[r][1]).isFirstNode=!0);else if(i.isLastNode)v=l[r].length-1,(w=l[r][v-1]).isLastNode=!0;else for(g=0,m=l[r].length;g<m;g++)if(l[r][g].tId==i.tId){v=g;break}if(0<=v&&l[r].splice(v,1),n!=Ce.move.TYPE_INNER)for(g=0,m=u[r].length;g<m;g++)u[r][g].tId==t.tId&&(b=g);if(n==Ce.move.TYPE_INNER?(t[r]||(t[r]=new Array),0<t[r].length&&((y=t[r][t[r].length-1]).isLastNode=!1),t[r].splice(t[r].length,0,i),i.isLastNode=!0,i.isFirstNode=1==t[r].length):t.isFirstNode&&n==Ce.move.TYPE_PREV?(u[r].splice(b,0,i),(y=t).isFirstNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!0,i.isLastNode=!1):t.isLastNode&&n==Ce.move.TYPE_NEXT?(u[r].splice(b+1,0,i),(y=t).isLastNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!0):(n==Ce.move.TYPE_PREV?u[r].splice(b,0,i):u[r].splice(b+1,0,i),i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!1),Te.fixPIdKeyValue(e,i),Te.setSonNodeLevel(e,i.getParentNode(),i),ke.setNodeLineIcos(e,i),ke.repairNodeLevelClass(e,i,C),!e.data.keep.parent&&l[r].length<1){l.isParent=!1,l.open=!1;var k=xe(l,Ce.id.UL,e),T=xe(l,Ce.id.SWITCH,e),x=xe(l,Ce.id.ICON,e);ke.replaceSwitchClass(l,T,Ce.folder.DOCU),ke.replaceIcoClass(l,x,Ce.folder.DOCU),k.css("display","none")}else w&&ke.setNodeLineIcos(e,w);y&&ke.setNodeLineIcos(e,y),e.check&&e.check.enable&&ke.repairChkClass&&(ke.repairChkClass(e,l),ke.repairParentChkClassWithSelf(e,l),l!=i.parent&&ke.repairParentChkClassWithSelf(e,i)),o||ke.expandCollapseParentNode(e,i.getParentNode(),!0,a)}},removeEditBtn:function(e,t){xe(t,Ce.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){xe(t,Ce.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,ke.removeEditBtn(e,t),ke.removeRemoveBtn(e,t),ye.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,i){if(i!==t.level){var n=xe(t,e),a=xe(t,Ce.id.A,e),o=xe(t,Ce.id.UL,e),s=Ce.className.LEVEL+i,r=Ce.className.LEVEL+t.level;n.removeClass(s),n.addClass(r),a.removeClass(s),a.addClass(r),o.removeClass(s),o.addClass(r)}},selectNodes:function(e,t){for(var i=0,n=t.length;i<n;i++)ke.selectNode(e,t[i],0<i)}},event:{},data:{setSonNodeLevel:function(e,t,i){if(i){var n=e.data.key.children;if(i.level=t?t.level+1:0,i[n])for(var a=0,o=i[n].length;a<o;a++)i[n][a]&&Te.setSonNodeLevel(e,i,i[n][a])}}}};be.extend(!0,be.fn.zTree.consts,we),be.extend(!0,be.fn.zTree._z,e);var t=be.fn.zTree,ye=t._z.tools,Ce=t.consts,ke=t._z.view,Te=t._z.data,xe=(t._z.event,ye.$);Te.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),Te.addInitBind(function(r){var e=r.treeObj,t=Ce.event;e.bind(t.RENAME,function(e,t,i,n){ye.apply(r.callback.onRename,[e,t,i,n])}),e.bind(t.DRAG,function(e,t,i,n){ye.apply(r.callback.onDrag,[t,i,n])}),e.bind(t.DRAGMOVE,function(e,t,i,n){ye.apply(r.callback.onDragMove,[t,i,n])}),e.bind(t.DROP,function(e,t,i,n,a,o,s){ye.apply(r.callback.onDrop,[t,i,n,a,o,s])})}),Te.addInitUnBind(function(e){var t=e.treeObj,i=Ce.event;t.unbind(i.RENAME),t.unbind(i.DRAG),t.unbind(i.DRAGMOVE),t.unbind(i.DROP)}),Te.addInitCache(function(e){}),Te.addInitNode(function(e,t,i,n,a,o,s){i&&(i.isHover=!1,i.editNameFlag=!1)}),Te.addInitProxy(function(e){var t=e.target,i=Te.getSetting(e.data.treeId),n=e.relatedTarget,a="",o=null,s="",r=null,l=null;if(ye.eqs(e.type,"mouseover")?(l=ye.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+Ce.id.A}]))&&(a=ye.getNodeMainDom(l).id,s="hoverOverNode"):ye.eqs(e.type,"mouseout")?(l=ye.getMDom(i,n,[{tagName:"a",attrName:"treeNode"+Ce.id.A}]))||(a="remove",s="hoverOutNode"):ye.eqs(e.type,"mousedown")&&(l=ye.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+Ce.id.A}]))&&(a=ye.getNodeMainDom(l).id,s="mousedownNode"),0<a.length)switch(o=Te.getNodeCache(i,a),s){case"mousedownNode":r=d.onMousedownNode;break;case"hoverOverNode":r=d.onHoverOverNode;break;case"hoverOutNode":r=d.onHoverOutNode}return{stop:!1,node:o,nodeEventType:s,nodeEventCallback:r,treeEventType:"",treeEventCallback:null}}),Te.addInitRoot(function(e){var t=Te.getRoot(e),i=Te.getRoots();t.curEditNode=null,t.curEditInput=null,t.curHoverNode=null,t.dragFlag=0,t.dragNodeShowBefore=[],t.dragMaskList=new Array,i.showHoverDom=!0}),Te.addZTreeTools(function(e,t){t.cancelEditName=function(e){Te.getRoot(this.setting).curEditNode&&ke.cancelCurEditNode(this.setting,e||null,!0)},t.copyNode=function(e,t,i,n){if(!t)return null;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===Ce.move.TYPE_INNER)return null;var a=this,o=ye.clone(t);if(e||(e=null,i=Ce.move.TYPE_INNER),i==Ce.move.TYPE_INNER){function s(){ke.addNodes(a.setting,e,[o],n)}ye.canAsync(this.setting,e)?ke.asyncNode(this.setting,e,n,s):s()}else ke.addNodes(this.setting,e.parentNode,[o],n),ke.moveNode(this.setting,e,o,i,!1,n);return o},t.editName=function(e){e&&e.tId&&e===Te.getNodeCache(this.setting,e.tId)&&(e.parentTId&&ke.expandCollapseParentNode(this.setting,e.getParentNode(),!0),ke.editNode(this.setting,e))},t.moveNode=function(e,t,i,n){if(!t)return t;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===Ce.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&i==Ce.move.TYPE_INNER||0<xe(t,this.setting).find("#"+e.tId).length))return null;e||(e=null);var a=this;function o(){ke.moveNode(a.setting,e,t,i,!1,n)}return ye.canAsync(this.setting,e)&&i===Ce.move.TYPE_INNER?ke.asyncNode(this.setting,e,n,o):o(),t},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}});var o=ke.cancelPreSelectedNode;ke.cancelPreSelectedNode=function(e,t){for(var i=Te.getRoot(e).curSelectedList,n=0,a=i.length;n<a&&(t&&t!==i[n]||(ke.removeTreeDom(e,i[n]),!t));n++);o&&o.apply(ke,arguments)};var a=ke.createNodes;ke.createNodes=function(e,t,i,n){a&&a.apply(ke,arguments),i&&ke.repairParentChkClassWithSelf&&ke.repairParentChkClassWithSelf(e,n)};var i=ke.makeNodeUrl;ke.makeNodeUrl=function(e,t){return e.edit.enable?null:i.apply(ke,arguments)};var n=ke.removeNode;ke.removeNode=function(e,t){var i=Te.getRoot(e);i.curEditNode===t&&(i.curEditNode=null),n&&n.apply(ke,arguments)};var s=ke.selectNode;ke.selectNode=function(e,t,i){var n=Te.getRoot(e);return(!Te.isSelectedNode(e,t)||n.curEditNode!=t||!t.editNameFlag)&&(s&&s.apply(ke,arguments),ke.addHoverDom(e,t),!0)};var r=ye.uCanDo;ye.uCanDo=function(e,t){var i=Te.getRoot(e);return!(!t||!(ye.eqs(t.type,"mouseover")||ye.eqs(t.type,"mouseout")||ye.eqs(t.type,"mousedown")||ye.eqs(t.type,"mouseup")))||(i.curEditNode&&(ke.editNodeBlur=!1,i.curEditInput.focus()),!i.curEditNode&&(!r||r.apply(ke,arguments)))}}(jQuery),function(t){var i=this&&this.__extends||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);function n(){this.constructor=e}e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)},h="custombox",n=h+"-open",s=h+"-close",a=h+"-lock",o="animateFrom",u="block",r=["top","right","bottom","left"],l=["slide","blur","flip","rotate","letmein","makeway","slip","corner","slidetogether","push","contentscale"],d=["blur","makeway","slip","push","contentscale"],c=["letmein","makeway","slip","corner","slidetogether","door","push","contentscale"],p=["corner","slidetogether","scale","door","push","contentscale"],f=["fall","sidefall","flip","sign","slit","letmein","makeway","slip"],g=function(){function e(){}return e.check=function(e,t){return-1<e.indexOf(t)},e.isIE=function(){var e=window.navigator.userAgent,t=e.indexOf("MSIE ");if(0<t)return!isNaN(parseInt(e.substring(t+5,e.indexOf(".",t)),10));if(0<e.indexOf("Trident/")){var i=e.indexOf("rv:");return!isNaN(parseInt(e.substring(i+3,e.indexOf(".",i)),10))}var n=e.indexOf("Edge/");return 0<n&&!isNaN(parseInt(e.substring(n+5,e.indexOf(".",n)),10))},e}(),m=function(){function e(){this.position=document.documentElement&&document.documentElement.scrollTop||document.body&&document.body.scrollTop||0,document.documentElement.classList.add(h+"-perspective")}return e.prototype.remove=function(){document.documentElement.classList.remove(h+"-perspective"),window.scrollTo(0,this.position)},e}(),v=function(e){function t(t){var i=this;e.call(this),Object.keys(this).forEach(function(e){t[e]&&Object.assign(i[e],t[e])})}return i(t,e),t}(function(){this.overlay={color:"#000",opacity:.48,close:!0,speedIn:300,speedOut:300,onOpen:null,onComplete:null,onClose:null,active:!0},this.content={id:null,target:null,container:null,clone:!1,animateFrom:"top",animateTo:"top",positionX:"center",positionY:"center",width:null,effect:"fadein",speedIn:300,speedOut:300,delay:150,fullscreen:!1,onOpen:null,onComplete:null,onClose:null,close:!0},this.loader={active:!0,color:"#FFF",background:"#999",speed:1e3}}),b=function(){function e(e){this.options=e,this.element=document.createElement("div"),this.element.classList.add(h+"-loader"),this.element.style.borderColor=this.options.loader.background,this.element.style.borderTopColor=this.options.loader.color,this.element.style.animationDuration=this.options.loader.speed+"ms",document.body.appendChild(this.element)}return e.prototype.show=function(){this.element.style.display=u},e.prototype.destroy=function(){this.element.parentElement.removeChild(this.element)},e}(),w=function(){function e(e){if(this.options=e,"loading"===document.readyState)throw new Error("You need to instantiate Custombox when the document is fully loaded");var t=document.querySelector(this.options.content.container);if(t)this.element=t;else if(document.querySelector("."+h+"-container"))document.querySelector("."+h+"-container")&&(this.element=document.querySelector("."+h+"-container"));else{for(this.element=document.createElement("div");document.body.firstChild;)this.element.appendChild(document.body.firstChild);document.body.appendChild(this.element)}this.element.classList.add(h+"-container"),this.element.classList.add(h+"-"+this.options.content.effect),this.element.style.animationDuration=this.options.content.speedIn+"ms",g.check(l,this.options.content.effect)&&this.setAnimation()}return e.prototype.bind=function(e){var t=this;return e===s&&(g.check(l,this.options.content.effect)&&this.setAnimation("animateTo"),this.element.classList.remove(n)),this.element.classList.add(e),new Promise(function(e){return t.listener().then(function(){return e()})})},e.prototype.remove=function(){this.element.classList.remove(s),this.element.classList.remove(h+"-"+this.options.content.effect),this.element.style.removeProperty("animation-duration");var e=document.querySelectorAll("."+h+"-content"),t=document.querySelector(this.options.content.container);if(!e.length)if(t)for(var i=this.element.className.split(" "),n=0,a=i.length;n<a;n++)i[n].startsWith(h+"-")&&this.element.classList.remove(i[n]);else{for(var o=document.querySelector("."+h+"-container");o.firstChild;)o.parentNode.insertBefore(o.firstChild,o);o.parentNode.removeChild(o)}},e.prototype.listener=function(){var t=this;return new Promise(function(e){g.isIE()?setTimeout(e,t.options.content.speedIn):t.element.addEventListener("animationend",function(){return e()},!0)})},e.prototype.setAnimation=function(e){void 0===e&&(e=o);for(var t=0,i=r.length;t<i;t++)this.element.classList.contains(h+"-"+r[t])&&this.element.classList.remove(h+"-"+r[t]);this.element.classList.add(h+"-"+this.options.content[e])},e}(),y=function(){function e(e){this.options=e,this.element=document.createElement("div"),this.element.style.backgroundColor=this.options.overlay.color,this.element.classList.add(h+"-overlay"),this.setAnimation()}return e.prototype.bind=function(e){var t=this;switch(e){case s:g.check(c,this.options.content.effect)&&this.toggleAnimation("animateTo"),this.element.classList.add(s),this.element.classList.remove(n);break;default:document.body.appendChild(this.element),this.element.classList.add(h+"-"+this.options.content.effect),this.element.classList.add(n)}return new Promise(function(e){return t.listener().then(function(){return e()})})},e.prototype.remove=function(){try{this.element.parentNode.removeChild(this.element),this.style.parentNode.removeChild(this.style)}catch(e){}},e.prototype.createSheet=function(){return this.style=document.createElement("style"),this.style.setAttribute("id",h+"-overlay-"+Date.now()),document.head.appendChild(this.style),this.style.sheet},e.prototype.listener=function(){var t=this;return new Promise(function(e){g.isIE()?setTimeout(e,t.options.overlay.speedIn):t.element.addEventListener("animationend",function(){return e()},!0)})},e.prototype.setAnimation=function(){var e=this.createSheet();if(g.check(c,this.options.content.effect)?(this.element.style.opacity=this.options.overlay.opacity.toString(),this.element.style.animationDuration=this.options.overlay.speedIn+"ms",this.toggleAnimation()):(e.insertRule("."+h+"-overlay { animation: CloseFade "+this.options.overlay.speedOut+"ms; }",0),e.insertRule("."+n+"."+h+"-overlay { animation: OpenFade "+this.options.overlay.speedIn+"ms; opacity: "+this.options.overlay.opacity+" }",0),e.insertRule("@keyframes OpenFade { from {opacity: 0} to {opacity: "+this.options.overlay.opacity+"} }",0),e.insertRule("@keyframes CloseFade { from {opacity: "+this.options.overlay.opacity+"} to {opacity: 0} }",0)),g.check(p,this.options.content.effect)){var t=this.options.overlay.speedIn;g.check(p,this.options.content.effect)&&(t=this.options.content.speedIn),this.element.style.animationDuration=t+"ms"}},e.prototype.toggleAnimation=function(e){void 0===e&&(e=o);for(var t=0,i=r.length;t<i;t++)this.element.classList.contains(h+"-"+r[t])&&this.element.classList.remove(h+"-"+r[t]);this.element.classList.add(h+"-"+this.options.content[e])},e}(),C=function(){function e(e){this.options=e,this.element=document.createElement("div"),this.element.style.animationDuration=this.options.content.speedIn+"ms",this.options.content.id&&this.element.setAttribute("id",h+"-"+this.options.content.id),g.check(p,this.options.content.effect)||(this.element.style.animationDelay=this.options.content.delay+"ms"),this.element.classList.add(h+"-content"),this.options.content.fullscreen?this.element.classList.add(h+"-fullscreen"):(this.element.classList.add(h+"-x-"+this.options.content.positionX),this.element.classList.add(h+"-y-"+this.options.content.positionY)),g.check(l,this.options.content.effect)&&this.setAnimation()}return e.prototype.fetch=function(){var c=this;return new Promise(function(t,i){var e=c.options.content.target.match(/^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/);if(e&&11==e[2].length){var n=document.createElement("div"),a=document.createElement("iframe");if(a.setAttribute("src","https://www.youtube.com/embed/"+e[2]),a.setAttribute("frameborder","0"),a.setAttribute("allowfullscreen",""),a.setAttribute("width","100%"),a.setAttribute("height","100%"),n.appendChild(a),!c.options.content.fullscreen){var o=560<window.innerWidth?560:window.innerWidth,s=315<window.innerHeight?315:window.innerHeight,r=parseInt(c.options.content.width,10);c.options.content.width&&window.innerWidth>r&&(s=Math.round(s*r/o),o=r),a.setAttribute("width",o+"px"),a.setAttribute("height",s+"px")}c.element.appendChild(n),t()}else if("#"!==c.options.content.target.charAt(0)&&"."!==c.options.content.target.charAt(0)){var l=new XMLHttpRequest;l.open("GET",c.options.content.target),l.onload=function(){if(200===l.status){c.element.insertAdjacentHTML("beforeend",l.response);var e=c.element.firstChild;try{e.style.display=u}catch(e){i(new Error("The ajax response need a wrapper element"))}c.options.content.width&&(e.style.flexBasis=c.options.content.width),t()}else i(new Error(l.statusText))},l.onerror=function(){return i(new Error("Network error"))},l.send()}else{var d=document.querySelector(c.options.content.target);d?(c.options.content.clone?(d=d.cloneNode(!0)).removeAttribute("id"):(c.reference=document.createElement("div"),c.reference.classList.add(h+"-reference"),c.reference.setAttribute("style",d.getAttribute("style")),d.parentNode.insertBefore(c.reference,d.nextSibling)),d.style.display=u,c.options.content.width&&(d.style.flexBasis=c.options.content.width),c.element.appendChild(d),t()):i(new Error("The element doesn't exist"))}})},e.prototype.bind=function(e){var t=this;switch(e){case s:this.element.style.animationDelay="0ms",this.element.style.animationDuration=this.options.content.speedOut+"ms",this.element.classList.remove(n),this.element.classList.add(s),this.setAnimation("animateTo");break;default:document.body.appendChild(this.element),this.element.classList.add(h+"-"+this.options.content.effect),this.element.classList.add(n)}return new Promise(function(e){return t.listener().then(function(){return e()})})},e.prototype.remove=function(){var e=new RegExp("^[#|.]");!this.options.content.clone&&e.test(this.options.content.target)&&(this.element.childNodes[0].setAttribute("style",this.reference.getAttribute("style")),this.reference.parentNode.insertBefore(this.element.childNodes[0],this.reference.nextSibling),this.reference.parentNode.removeChild(this.reference));try{this.element.parentNode.removeChild(this.element)}catch(e){}},e.prototype.listener=function(){var t=this;return new Promise(function(e){g.isIE()?setTimeout(e,t.options.content.speedIn):t.element.addEventListener("animationend",function(){return e()},!0)})},e.prototype.setAnimation=function(e){void 0===e&&(e=o);for(var t=0,i=r.length;t<i;t++)this.element.classList.contains(h+"-"+r[t])&&this.element.classList.remove(h+"-"+r[t]);this.element.classList.add(h+"-"+this.options.content[e])},e}(),e=function(){function e(e){this.action=function(e){27===e.keyCode&&t.modal.close()},this.options=new v(e)}return e.prototype.open=function(){var t=this;this.build(),this.options.loader.active&&this.loader.show(),this.content.fetch().then(function(){g.check(f,t.options.content.effect)&&(t.scroll=new m),t.options.overlay.active?(t.dispatchEvent("overlay.onOpen"),t.overlay.bind(n).then(function(){t.dispatchEvent("overlay.onComplete"),t.options.loader.active&&t.loader.destroy()})):t.options.loader.active&&t.loader.destroy(),t.container&&t.container.bind(n),document.body.classList.add(a),t.content.bind(n).then(function(){return t.dispatchEvent("content.onComplete")}),t.dispatchEvent("content.onOpen"),t.listeners()}).catch(function(e){throw t.options.loader.active&&t.loader.destroy(),e})},e.prototype.build=function(){this.options.loader.active&&(this.loader=new b(this.options)),g.check(d,this.options.content.effect)&&(this.container=new w(this.options)),this.options.overlay.active&&(this.overlay=new y(this.options)),this.content=new C(this.options)},e.close=function(e){var t=new CustomEvent(h+":close"),i=document.querySelectorAll("."+h+"-content");e&&(i=document.querySelectorAll("#"+h+"-"+e));try{i[i.length-1].dispatchEvent(t)}catch(e){throw new Error("Custombox is not instantiated")}},e.closeAll=function(){for(var e=new CustomEvent(h+":close"),t=document.querySelectorAll("."+h+"-content"),i=t.length,n=0;n<i;n++)t[n].dispatchEvent(e)},e.prototype._close=function(){var e=this,t=[this.content.bind(s).then(function(){return e.content.remove()})];this.options.overlay.active&&t.push(this.overlay.bind(s).then(function(){e.scroll&&e.scroll.remove(),e.overlay.remove(),e.dispatchEvent("overlay.onClose")})),this.container&&t.push(this.container.bind(s).then(function(){return e.container.remove()})),Promise.all(t).then(function(){e.options.content.close&&document.removeEventListener("keydown",e.action,!0),e.dispatchEvent("content.onClose"),document.body.classList.remove(a)})},e.prototype.dispatchEvent=function(e){var t=e.replace(".on",":").toLowerCase(),i=new CustomEvent(h+":"+t),n=Object.create(this.options);document.dispatchEvent(i);try{e.split(".").reduce(function(e,t){return e[t]},n).call()}catch(e){}},e.prototype.listeners=function(){var t=this,e=window.getComputedStyle(this.content.element).getPropertyValue("animation-fill-mode");document.addEventListener("fullscreenchange",function(){window.getComputedStyle(t.content.element).getPropertyValue("animation-fill-mode")===e?t.content.element.style.animationFillMode="backwards":t.content.element.style.animationFillMode=e},!0),this.options.content.close&&document.addEventListener("keydown",this.action,!0),this.options.overlay.close&&this.content.element.addEventListener("click",function(e){e.target===t.content.element&&t._close()},!0),this.content.element.addEventListener(h+":close",function(){t._close()},!0)},e}();t.modal=e}(jQuery),function(D){D.fn.extend({slimScroll:function(E){var _=D.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},E);return this.each(function(){var n,e,a,i,o,s,r,l,d="<div></div>",c=30,h=!1,u=D(this);if(u.parent().hasClass(_.wrapperClass)){var p=u.scrollTop();if(w=u.siblings("."+_.barClass),b=u.siblings("."+_.railClass),T(),D.isPlainObject(E)){if("height"in E&&"auto"==E.height){u.parent().css("height","auto"),u.css("height","auto");var f=u.parent().parent().height();u.parent().css("height",f),u.css("height",f)}else if("height"in E){var g=E.height;u.parent().css("height",g),u.css("height",g)}if("scrollTo"in E)p=parseInt(_.scrollTo);else if("scrollBy"in E)p+=parseInt(_.scrollBy);else if("destroy"in E)return w.remove(),b.remove(),void u.unwrap();k(p,!1,!0)}}else if(!(D.isPlainObject(E)&&"destroy"in E)){_.height="auto"==_.height?u.parent().height():_.height;var m=D(d).addClass(_.wrapperClass).css({position:"relative",overflow:"hidden",width:_.width,height:_.height});u.css({overflow:"hidden",width:_.width,height:_.height});var v,b=D(d).addClass(_.railClass).css({width:_.size,height:"100%",position:"absolute",top:0,display:_.alwaysVisible&&_.railVisible?"block":"none","border-radius":_.railBorderRadius,background:_.railColor,opacity:_.railOpacity,zIndex:90}),w=D(d).addClass(_.barClass).css({background:_.color,width:_.size,position:"absolute",top:0,opacity:_.opacity,display:_.alwaysVisible?"block":"none","border-radius":_.borderRadius,BorderRadius:_.borderRadius,MozBorderRadius:_.borderRadius,WebkitBorderRadius:_.borderRadius,zIndex:99}),y="right"==_.position?{right:_.distance}:{left:_.distance};b.css(y),w.css(y),u.wrap(m),u.parent().append(w),u.parent().append(b),_.railDraggable&&w.bind("mousedown",function(e){var i=D(document);return a=!0,t=parseFloat(w.css("top")),pageY=e.pageY,i.bind("mousemove.slimscroll",function(e){currTop=t+e.pageY-pageY,w.css("top",currTop),k(0,w.position().top,!1)}),i.bind("mouseup.slimscroll",function(e){a=!1,N(),i.unbind(".slimscroll")}),!1}).bind("selectstart.slimscroll",function(e){return e.stopPropagation(),e.preventDefault(),!1}),b.hover(function(){x()},function(){N()}),w.hover(function(){e=!0},function(){e=!1}),u.hover(function(){n=!0,x(),N()},function(){n=!1,N()}),u.bind("touchstart",function(e,t){e.originalEvent.touches.length&&(o=e.originalEvent.touches[0].pageY)}),u.bind("touchmove",function(e){(h||e.originalEvent.preventDefault(),e.originalEvent.touches.length)&&(k((o-e.originalEvent.touches[0].pageY)/_.touchScrollStep,!0),o=e.originalEvent.touches[0].pageY)}),T(),"bottom"===_.start?(w.css({top:u.outerHeight()-w.outerHeight()}),k(0,!0)):"top"!==_.start&&(k(D(_.start).position().top,null,!0),_.alwaysVisible||w.hide()),v=this,window.addEventListener?(v.addEventListener("DOMMouseScroll",C,!1),v.addEventListener("mousewheel",C,!1)):document.attachEvent("onmousewheel",C)}function C(e){if(n){var t=0;(e=e||window.event).wheelDelta&&(t=-e.wheelDelta/120),e.detail&&(t=e.detail/3);var i=e.target||e.srcTarget||e.srcElement;D(i).closest("."+_.wrapperClass).is(u.parent())&&k(t,!0),e.preventDefault&&!h&&e.preventDefault(),h||(e.returnValue=!1)}}function k(e,t,i){h=!1;var n=e,a=u.outerHeight()-w.outerHeight();if(t&&(n=parseInt(w.css("top"))+e*parseInt(_.wheelStep)/100*w.outerHeight(),n=Math.min(Math.max(n,0),a),n=0<e?Math.ceil(n):Math.floor(n),w.css({top:n+"px"})),n=(r=parseInt(w.css("top"))/(u.outerHeight()-w.outerHeight()))*(u[0].scrollHeight-u.outerHeight()),i){var o=(n=e)/u[0].scrollHeight*u.outerHeight();o=Math.min(Math.max(o,0),a),w.css({top:o+"px"})}u.scrollTop(n),u.trigger("slimscrolling",~~n),x(),N()}function T(){s=Math.max(u.outerHeight()/u[0].scrollHeight*u.outerHeight(),c),w.css({height:s+"px"});var e=s==u.outerHeight()?"none":"block";w.css({display:e})}function x(){if(T(),clearTimeout(i),r==~~r){if(h=_.allowPageScroll,l!=r){var e=0==~~r?"top":"bottom";u.trigger("slimscroll",e)}}else h=!1;l=r,s>=u.outerHeight()?h=!0:(w.stop(!0,!0).fadeIn("fast"),_.railVisible&&b.stop(!0,!0).fadeIn("fast"))}function N(){_.alwaysVisible||(i=setTimeout(function(){_.disableFadeOut&&n||e||a||(w.fadeOut("slow"),b.fadeOut("slow"))},1e3))}}),this}}),D.fn.extend({slimscroll:D.fn.slimScroll})}(jQuery),function(o){var a="fa",s={iconPlay:"fa-play",iconPause:"fa-pause",iconVolumeMute:"fa-volume-off",iconVolumeMedium:"fa-volume-up",iconVolumeLow:"fa-volume-down",iconExpand:"fa-expand",iconCompress:"fa-compress"},t=!0;_addControls=function(e){t&&e.append(o("<div>",{class:"default__title"}).text(e.children("video").first().attr("data-title"))),e.append(o("<button>",{class:"default__button--big toggle",title:"Toggle Play"}).append(o("<i>",{class:a+" "+s.iconPlay}))).append(o("<div>",{class:"default__controls ckin__controls"}).append(o("<button>",{class:"default__button btn_toggle",title:"Toggle Video"}).append(o("<i>",{class:a+" "+s.iconPlay}))).append(o("<div>",{class:"video_progress"}).append(o("<div>",{class:"progress__filled"}))).append(o("<button>",{class:"default__button btn_volume",title:"Volume"}).append(o("<i>",{class:a+" "+s.iconVolumeMedium}))).append(o("<button>",{class:"default__button btn_fullscreen",title:"Full Screen"}).append(o("<i>",{class:a+" "+s.iconExpand}))))},_togglePlay=function(e,t){e[e.paused?"play":"pause"](),e.paused?o(t).removeClass("is-playing"):o(t).addClass("is-playing")},_toggleFullScreen=function(e,t){document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen?document.webkitCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),o(e).removeClass("ckin__fullscreen"),t.find("i").removeClass(s.iconCompress).addClass(s.iconExpand)):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),o(e).addClass("ckin__fullscreen"),t.find("i").removeClass(s.iconExpand).addClass(s.iconCompress))},_onFullScreenExit=function(e){null!==document.webkitFullscreenElement||(o(e).removeClass("ckin__fullscreen"),o(e).find(".btn_fullscreen i").removeClass(s.iconCompress).addClass(s.iconExpand))},_toggleVolume=function(e,t){var i=e.volume,n=o("<i>");switch(i){case 1:i=0,n.addClass(a+" "+s.iconVolumeMute);break;case.5:i=1,n.addClass(a+" "+s.iconVolumeMedium);break;default:i=.5,n.addClass(a+" "+s.iconVolumeLow)}e.volume=i,t.children("i").replaceWith(n)},_scrub=function(e,t,i){var n=e.offsetX/i.offsetWidth*t.duration;t.currentTime=n},_addListener=function(){o(".ckin__player").each(function(e,i){var t=o(i).children("video").first();t.on("click",function(){_togglePlay(this,i)}),t.on("play",function(){o(i).find(".btn_toggle i").removeClass(s.iconPlay).addClass(s.iconPause)}),t.on("pause",function(){o(i).find(".btn_toggle i").removeClass(s.iconPause).addClass(s.iconPlay)}),t.on("timeupdate",function(e){var t=e.target.currentTime/e.target.duration*100;o(i).find(".progress__filled").css("flexBasis",t+"%")}),o(i).find(".default__button--big").on("click",function(){_togglePlay(t.get(0),i)}),o(i).find(".btn_toggle").on("click",function(){_togglePlay(t.get(0),i)}),o(i).find(".btn_volume").on("click",function(){_toggleVolume(t.get(0),o(this))}),o(i).find(".btn_fullscreen").on("click",function(){_toggleFullScreen(i,o(this))});var n=!1;o(i).find(".video_progress").on("click",function(e){_scrub(e,t.get(0),this)}).on("mousemove",function(e){n&&_scrub(e,t.get(0),this)}).on("mousedown",function(){n=!0}).on("mouseup",function(){n=!1}),o(i).on("webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){_onFullScreenExit(i)})})},o.LanaiVideo=function(){var e=o("video");o.each(e,function(e,t){var i;if(o(t).parent().hasClass("ckin__player"))i=o(t).parent().first();else{var n=o(t).attr("data-ckin");i=o("<div>",{class:"ckin__player "+n+" ckin__overlay"});var a=o(t);o(t).replaceWith(i)}_addControls(i.append(a))}),_addListener()}}(jQuery),function(e){"use strict";e(".switch").on("click",function(){e(this).find("input[type='checkbox']").checked=!e(this).find("input[type='checkbox']")})}(jQuery),function(s){"use strict";var a="lte.layout",o={slimscroll:!0,resetHeight:!0},r=".wrapper",l=".content-wrapper",d=".layout-boxed",c=".main-footer",h=".main-header",u=".sidebar",p=".control-sidebar",e=".sidebar-menu",t=".main-header .logo",f="fixed",i="hold-transition",g=function(e){this.options=e,this.bindedResize=!1,this.activate()};function n(n){return this.each(function(){var e=s(this),t=e.data(a);if(!t){var i=s.extend({},o,e.data(),"object"==typeof n&&n);e.data(a,t=new g(i))}if("string"==typeof n){if(void 0===t[n])throw new Error("No method named "+n);t[n]()}})}g.prototype.activate=function(){this.fix(),this.fixSidebar(),s("body").removeClass(i),this.options.resetHeight&&s("body, html, "+r).css({height:"auto","min-height":"100%"}),this.bindedResize||(s(window).resize(function(){this.fix(),this.fixSidebar(),s(t+", "+u).one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){this.fix(),this.fixSidebar()}.bind(this))}.bind(this)),this.bindedResize=!0),s(e).on("expanded.tree",function(){this.fix(),this.fixSidebar()}.bind(this)),s(e).on("collapsed.tree",function(){this.fix(),this.fixSidebar()}.bind(this))},g.prototype.fix=function(){s(d+" > "+r).css("overflow","hidden");var e=s(c).outerHeight()||0,t=s(h).outerHeight()+e,i=s(window).height(),n=s(u).height()||0;if(s("body").hasClass(f))s(l).css("min-height",i-e);else{var a;a=n<=i?(s(l).css("min-height",i-t),i-t):(s(l).css("min-height",n),n);var o=s(p);void 0!==o&&o.height()>a&&s(l).css("min-height",o.height())}},g.prototype.fixSidebar=function(){s("body").hasClass(f)?this.options.slimscroll&&void 0!==s.fn.slimScroll&&(s(u).slimScroll({destroy:!0}).height("auto"),s(u).slimScroll({height:s(window).height()-s(h).height()+"px",color:"rgba(0,0,0,0.2)",size:"3px"})):void 0!==s.fn.slimScroll&&s(u).slimScroll({destroy:!0}).height("auto")};var m=s.fn.layout;s.fn.layout=n,s.fn.layout.Constuctor=g,s.fn.layout.noConflict=function(){return s.fn.layout=m,this},s(window).on("load",function(){n.call(s("body"))})}(jQuery),function(a){"use strict";var o="lte.pushmenu",s={collapseScreenSize:767,expandOnHover:!1,expandTransitionDelay:200},e=".sidebar-collapse",t=".main-sidebar",i=".content-wrapper",n=".sidebar-form .form-control",r='[data-toggle="push-menu"]',l=".sidebar-mini",d=".sidebar-expanded-on-hover",c=".fixed",h="sidebar-collapse",u="sidebar-open",p="sidebar-expanded-on-hover",f="sidebar-mini-expand-feature",g="expanded.pushMenu",m="collapsed.pushMenu",v=function(e){this.options=e,this.init()};function b(n){return this.each(function(){var e=a(this),t=e.data(o);if(!t){var i=a.extend({},s,e.data(),"object"==typeof n&&n);e.data(o,t=new v(i))}"toggle"==n&&t.toggle()})}v.prototype.init=function(){(this.options.expandOnHover||a("body").is(l+c))&&(this.expandOnHover(),a("body").addClass(f)),a(i).click(function(){a(window).width()<=this.options.collapseScreenSize&&a("body").hasClass(u)&&this.close()}.bind(this)),a(n).click(function(e){e.stopPropagation()})},v.prototype.toggle=function(){var e=a(window).width(),t=!a("body").hasClass(h);e<=this.options.collapseScreenSize&&(t=a("body").hasClass(u)),t?this.close():this.open(),this.showtabs()},v.prototype.open=function(){a(window).width()>this.options.collapseScreenSize?a("body").removeClass(h).trigger(a.Event(g)):a("body").addClass(u).trigger(a.Event(g))},v.prototype.close=function(){a(window).width()>this.options.collapseScreenSize?a("body").addClass(h).trigger(a.Event(m)):a("body").removeClass(u+" "+h).trigger(a.Event(m))},v.prototype.expandOnHover=function(){a(t).hover(function(){a("body").is(l+e)&&a(window).width()>this.options.collapseScreenSize&&this.expand()}.bind(this),function(){a("body").is(d)&&this.collapse()}.bind(this))},v.prototype.expand=function(){setTimeout(function(){a("body").removeClass(h).addClass(p)},this.options.expandTransitionDelay)},v.prototype.collapse=function(){setTimeout(function(){a("body").removeClass(p).addClass(h)},this.options.expandTransitionDelay)},v.prototype.showtabs=function(){setTimeout(function(){a.addtabs.drop()},this.options.expandTransitionDelay+100)};var w=a.fn.pushMenu;a.fn.pushMenu=b,a.fn.pushMenu.Constructor=v,a.fn.pushMenu.noConflict=function(){return a.fn.pushMenu=w,this},a(document).on("click",r,function(e){e.preventDefault(),b.call(a(this),"toggle")}),a(window).on("load",function(){b.call(a(r))})}(jQuery),function(o){"use strict";var n="lte.tree",a={animationSpeed:500,accordion:!0,followLink:!0,trigger:".treeview a"},s=".tree",r=".treeview",l=".treeview-menu",d=".menu-open, .active",i="li",c="ul",e='[data-widget="tree"]',h=".active",t='[role="presentation"]',u="menu-open",p="tree",f="active",g="collapsed.tree",m="expanded.tree",v=function(e,t){this.element=e,this.options=t,o(this.element).addClass(p),o(r+h,this.element).addClass(u),this._setUpListeners()};function b(i){return this.each(function(){var e=o(this);if(!e.data(n)){var t=o.extend({},a,e.data(),"object"==typeof i&&i);e.data(n,new v(e,t))}})}v.prototype.toggle=function(e,t){var i=e.next(l),n=e.parent(),a=n.hasClass(u);n.is(r)&&(this.options.followLink&&"#"!=e.attr("href")||t.preventDefault(),a?this.collapse(i,n):this.expand(i,n))},v.prototype.expand=function(e,t){var i=o.Event(m);if(this.options.accordion){var n=t.siblings(d),a=n.children(l);this.collapse(a,n)}t.addClass(u),e.slideDown(this.options.animationSpeed,function(){o(this.element).trigger(i)}.bind(this))},v.prototype.collapse=function(e,t){var i=o.Event(g);e.find(d).removeClass(u),t.removeClass(u),e.slideUp(this.options.animationSpeed,function(){e.find(d+" > "+r).slideUp(),o(this.element).trigger(i)}.bind(this))},v.prototype.OnlyRemoveActive=function(){var e=o(t+h).children("a").first();e&&o(s+' a[data-addtab="'+e.attr("aria-controls")+'"]').parent().removeClass(f)},v.prototype.active=function(e){if(o(e)&&0<o(e).length){var t=o(e).parent();t.parent()&&(o(i+h,o(s)).removeClass(f),o(t.parents(i),o(s)).each(function(e,t){o(t).addClass(f)})),t.addClass(f),o(c,o(t)).each(function(e,t){o(t).is(":hidden")||o(t).parent().addClass(u)})}else this.OnlyRemoveActive()},v.prototype.NavClientListeners=function(e,i){var n=this;o(e.parents(l),o(s)).each(function(e,t){o(t).parent().hasClass(u)||o(t).prev("a")&&0<o(t).prev("a").length&&n.toggle(o(t).prev("a"),i)}),this.toggle(e,i),this.active(e)},v.prototype._setUpListeners=function(){var t=this;o(this.element).on("click",this.options.trigger,function(e){t.toggle(o(this),e),t.active(o(this))})};var w=o.fn.tree;o.fn.tree=b,o.fn.tree.Constructor=v,o.fn.tree.noConflict=function(){return o.fn.tree=w,this},o(window).on("load",function(){o(e).each(function(){b.call(o(this))})})}(jQuery),function(a){"use strict";var o="lte.controlsidebar",s={slide:!0},t=".control-sidebar",e='[data-toggle="control-sidebar"]',i=".control-sidebar-open",n=".control-sidebar-bg",r=".wrapper",l=".layout-boxed",d="control-sidebar-open",c="collapsed.controlsidebar",h="expanded.controlsidebar",u=function(e,t){this.element=e,this.options=t,this.hasBindedResize=!1,this.init()};function p(n){return this.each(function(){var e=a(this),t=e.data(o);if(!t){var i=a.extend({},s,e.data(),"object"==typeof n&&n);e.data(o,t=new u(e,i))}"string"==typeof n&&t.toggle()})}u.prototype.init=function(){a(this.element).is(e)||a(this).on("click",this.toggle),this.fix(),a(window).resize(function(){this.fix()}.bind(this))},u.prototype.toggle=function(e){e&&e.preventDefault(),this.fix(),a(t).is(i)||a("body").is(i)?this.collapse():this.expand()},u.prototype.expand=function(){this.options.slide?a(t).addClass(d):a("body").addClass(d),a(this.element).trigger(a.Event(h))},u.prototype.collapse=function(){a("body, "+t).removeClass(d),a(this.element).trigger(a.Event(c))},u.prototype.fix=function(){a("body").is(l)&&this._fixForBoxed(a(n))},u.prototype._fixForBoxed=function(e){e.css({position:"absolute",height:a(r).height()})};var f=a.fn.controlSidebar;a.fn.controlSidebar=p,a.fn.controlSidebar.Constructor=u,a.fn.controlSidebar.noConflict=function(){return a.fn.controlSidebar=f,this},a(document).on("click",e,function(e){e&&e.preventDefault(),p.call(a(this),"toggle")})}(jQuery),function(a){"use strict";var o="lte.boxwidget",s={animationSpeed:500,collapseTrigger:'[data-widget="collapse"]',removeTrigger:'[data-widget="remove"]',collapseIcon:"fa-minus",expandIcon:"fa-plus",removeIcon:"fa-times"},e=".box",t=".collapsed-box",n=".box-body",r=".box-footer",l=".box-tools",d="collapsed-box",c="collapsed.boxwidget",h="expanded.boxwidget",i="removed.boxwidget",u=function(e,t){this.element=e,this.options=t,this._setUpListeners()};function p(n){return this.each(function(){var e=a(this),t=e.data(o);if(!t){var i=a.extend({},s,e.data(),"object"==typeof n&&n);e.data(o,t=new u(e,i))}if("string"==typeof n){if(void 0===t[n])throw new Error("No method named "+n);t[n]()}})}u.prototype.toggle=function(){!a(this.element).is(t)?this.collapse():this.expand()},u.prototype.expand=function(){var e=a.Event(h),t=this.options.collapseIcon,i=this.options.expandIcon;a(this.element).removeClass(d),a(this.element).find(l).find("."+i).removeClass(i).addClass(t),a(this.element).find(n+", "+r).slideDown(this.options.animationSpeed,function(){a(this.element).trigger(e)}.bind(this))},u.prototype.collapse=function(){var e=a.Event(c),t=this.options.collapseIcon,i=this.options.expandIcon;a(this.element).find(l).find("."+t).removeClass(t).addClass(i),a(this.element).find(n+", "+r).slideUp(this.options.animationSpeed,function(){a(this.element).addClass(d),a(this.element).trigger(e)}.bind(this))},u.prototype.remove=function(){var e=a.Event(i);a(this.element).slideUp(this.options.animationSpeed,function(){a(this.element).trigger(e),a(this.element).remove()}.bind(this))},u.prototype._setUpListeners=function(){var t=this;a(this.element).on("click",this.options.collapseTrigger,function(e){e&&e.preventDefault(),t.toggle()}),a(this.element).on("click",this.options.removeTrigger,function(e){e&&e.preventDefault(),t.remove()})};var f=a.fn.boxWidget;a.fn.boxWidget=p,a.fn.boxWidget.Constructor=u,a.fn.boxWidget.noConflict=function(){return a.fn.boxWidget=f,this},a(window).on("load",function(){a(e).each(function(){p.call(a(this))})})}(jQuery),function(n){"use strict";var a="lte.directchat",e='[data-widget="chat-pane-toggle"]',t=".direct-chat",i="direct-chat-contacts-open",o=function(e){this.element=e};function s(i){return this.each(function(){var e=n(this),t=e.data(a);t||e.data(a,t=new o(e)),"string"==typeof i&&t.toggle(e)})}o.prototype.toggle=function(e){e.parents(t).first().toggleClass(i)};var r=n.fn.directChat;n.fn.directChat=s,n.fn.directChat.Constructor=o,n.fn.directChat.noConflict=function(){return n.fn.directChat=r,this},n(document).on("click",e,function(e){e&&e.preventDefault(),s.call(n(this),"toggle")})}(jQuery),function(e){"use strict";var t={chatbody:'[data-widget="chat-small-box"]',chatlisten:'[data-widget="chat-small-open"]'};e(t.data+" .box-body").slimscroll(),e("body").on("click",t.chatlisten,function(){e(this).children().toggleClass("fa-comments").toggleClass("fa-remove"),e(t.chatbody).toggleClass("active")})}(jQuery),function(n){"use strict";n('[data-toggle="control-sidebar"]').controlSidebar(),n('[data-toggle="push-menu"]').pushMenu();var i=n('[data-toggle="push-menu"]').data("lte.pushmenu"),a=n('[data-toggle="control-sidebar"]').data("lte.controlsidebar"),o=(n("body").data("lte.layout"),["skin-blue","skin-black","skin-red","skin-yellow","skin-purple","skin-green","skin-blue-light","skin-black-light","skin-red-light","skin-yellow-light","skin-purple-light","skin-green-light"]);function t(e){n("body").toggleClass(e);var t=n("body").data("lte.layout");t.fixSidebar(),n("body").hasClass("fixed")&&"fixed"==e&&(i.expandOnHover(),t.activate()),a.fix(),i&&null!=i&&i.showtabs(),setTimeout(function(){n.LanaiMenu.SizeChange()},300)}function s(e){var t,i;return n.each(o,function(e){n("body").removeClass(o[e])}),n("body").addClass(e),t="skin",i=e,"undefined"!=typeof Storage?localStorage.setItem(t,i):window.alert("Please use a modern browser to properly view this template!"),!1}var e=function(e){if("undefined"!=typeof Storage)return localStorage.getItem(e);window.alert("Please use a modern browser to properly view this template!")}("skin");e&&n.inArray(e,o)&&s(e),n("[data-skin]").on("click",function(e){n(this).hasClass("knob")||(e.preventDefault(),s(n(this).data("skin")))}),n("[data-layout]").on("click",function(){t(n(this).data("layout"))}),n("[data-controlsidebar]").on("click",function(){t(n(this).data("controlsidebar"));var e=!a.options.slide;(a.options.slide=e)||n(".control-sidebar").removeClass("control-sidebar-open")}),n('[data-sidebarskin="toggle"]').on("click",function(){var e=n(".control-sidebar");e.hasClass("control-sidebar-dark")?(e.removeClass("control-sidebar-dark"),e.addClass("control-sidebar-light")):(e.removeClass("control-sidebar-light"),e.addClass("control-sidebar-dark"))}),n("body").hasClass("fixed")&&n('[data-layout="fixed"]').attr("checked","checked"),n("body").hasClass("layout-boxed")&&n('[data-layout="layout-boxed"]').attr("checked","checked"),n("body").hasClass("sidebar-collapse")&&n('[data-layout="sidebar-collapse"]').attr("checked","checked"),n('[data-toggle="tooltip"]').tooltip()}(jQuery),function(n){var e='[data-widget="tooltip-fullscreen"]',t='[data-widget="tooltip-lock"]',i='[data-widget="tooltip-unlock"]',a='[data-widget="tooltip-refresh"]';n("body").on("click",a,function(){n(".iframeClass").each(function(e,t){if(n(t).parent().hasClass("active")){var i=n(t)[0];i&&i.contentWindow.location.reload(!0)}})}),n("body").on("click",e,function(){screenfull.toggle()}),n("body").on("click",t,function(e){new n.modal({content:{effect:"fadein",target:"#modal",fullscreen:!0,close:!1}}).open(),localStorage.setItem("modalLocked",!0),e.preventDefault()}),n("body").on("click",i,function(e){n.modal.close(),localStorage.setItem("modalLocked",!1),e.preventDefault()})}(jQuery),function(h){"use strict";var o=".active",n=".menu-tabs",a='[role="presentation"]',u="li",p='li:not(".third-menu")',s=".nav-addtabs",f="body.sidebar-collapse",r='[role="tablist"]',l="active",d="menu-open",c="dropdown-menu",g="treeview",m="treeview-menu",v="fa ",b="divider",w="dropdown-toggle",y="caret",C="third-menu",k={Level:0,MaxLeveL:4,MaxVLevel:2,icon:"fa-circle-o",Error:{exceedMaxLevel:"菜单层级超出菜单限制"}},T={DirectionH:!1,EnableNav:!1,NavEl:'[role="menulist"]',El:".sidebar-menu"};h.LanaiMenu=function(e,t){if(x(t),k.MaxLeveL<=3){if("object"==typeof e&&N(JSON.parse('{"children":'+JSON.stringify(e)+"}"),0),!T.DirectionH&&k.Level>k.MaxLeveL||T.DirectionH&&k.Level>k.MaxVLevel)return void("undefined"!=typeof toastr?toastr.error(k.Error.exceedMaxLevel):alert(k.Error.exceedMaxLevel));T.DirectionH||k.Level!=k.MaxLeveL||(T.EnableNav=!0)}E(e),$();var i=h(n+" "+a+o);i&&i.children("a").first().click(),h(window).on("resize",function(){$()})},h.LanaiMenu.SizeChange=function(){$()};var x=function(){arguments[0]&&("object"==typeof arguments[0]?T=h.extend(T,arguments[0]||{}):T[arguments[0]]=arguments[1])},N=function(e,i){k.Level=Math.max(k.Level,i),e.children&&0<e.children.length&&e.children.forEach(function(e,t){N(e,i+1)})},E=function(e){if(h(T.NavEl).html(""),T.EnableNav&&!T.DirectionH){for(var t=0;t<e.length;t++){var i=e[t],n=h("<a>",{href:"#","data-nav":i.nav}).append(h("<i>",{class:i.icon&&""!=i.icon?v+i.icon:v+k.icon,style:"width:20px"})).append(i.title);_(n,i),h(T.NavEl).append(h("<li>").append(n))}h(T.NavEl).find(">li:not('.tabdrop') a").first().click()}else D(e)},_=function(n,a){n.on("click",function(e){a.children&&0<a.children.length?D(a.children):D(JSON.parse("["+JSON.stringify(a)+"]"));var t=n.parent();t.parent().is(".dropdown-menu")?(t.parent().parent().addClass(l),h(s).find(u+o).removeClass(l)):t.parent().find(u+o).removeClass(l),t.addClass(l);var i=h(r).find(u+o).children("a").first();i&&0<i.length&&h('[data-widget="tree"]').data("lte.tree").NavClientListeners(h('[data-addtab="'+h(i).attr("aria-controls")+'"]'),e)})},D=function(e){var t=T.DirectionH?h(T.NavEl):h(T.El);t.html("");for(var i=0;i<e.length;i++)if(e[i].children&&0<e[i].children.length)if(T.DirectionH){var n=h("<li>",{class:"dropdown"}).append(h("<a>",{href:"#",class:w,"data-toggle":"dropdown","aria-expanded":"false"}).append(h("<i>",{class:e[i].icon&&""!=e[i].icon?v+e[i].icon:v+k.icon,style:"width:20px"})).append(e[i].title).append(h("<span>",{class:y})));t.append(n.append(S(h("<ul>",{class:c,role:"menu"}),e[i])))}else{n=h("<li>",{class:g+(0==i?" "+d+" "+l:"")}).append(h("<a>",{href:"#"}).append(h("<i>",{class:e[i].icon&&""!=e[i].icon?v+e[i].icon:v+k.icon})).append(h("<span>").text(e[i].title)).append(h("<span>",{class:"pull-right-container"}).append(h("<i>",{class:v+"fa-angle-left pull-right"}))));t.append(n.append(S(h("<ul>",{class:m}),e[i])))}else t.append(I(e[i],!0))},S=function(e,t){if(t.children&&0<t.children.length)for(var i=0;i<t.children.length;i++)if(t.children[i].children&&0<t.children[i].children.length){var n=h("<li>",{class:g}).append(h("<a>",{href:"#"}).append(h("<i>",{class:t.children[i].icon&&""!=t.children[i].icon?v+t.children[i].icon:v+k.icon})).append(h("<span>").text(t.children[i].title)).append(h("<span>",{class:"pull-right-container"}).append(h("<i>",{class:v+"fa-angle-left pull-right"}))));e.append(n.append(S(h("<ul >",{class:"treeview-menu"}),t.children[i])))}else e.append(I(t.children[i],!0));return e},I=function(e,t){if(T.DirectionH&&null!=e.divider&&null!=e.divider&&e.divider)return h("<li>",{class:b});var i="";return T.DirectionH&&(i=C),null!=e.isUrl&&null!=e.isUrl&&e.isUrl?h("<li>",{class:t?g:i}).append(h("<a>",{href:e.url,target:"_blank"}).append(h("<i>",{class:e.icon&&""!=e.icon?v+e.icon:v+k.icon,style:"width:20px"})).append(h("<span>").append(e.title))):h("<li>",{class:t?g:i}).append(h("<a>",{href:"#","data-addtab":e.addtab,"data-target":e.target,"data-title":e.title,"data-url":e.url,"data-nav":e.nav,"data-ajax":e.ajax}).append(h("<i>",{class:e.icon&&""!=e.icon?v+e.icon:v+k.icon,style:"width:20px"})).append(h("<span>").append(e.title)))},$=function(){var e=0,t=0,i=0,n=0;h(".main-header").find("> .navbar")&&0<h(".main-header").find("> .navbar").length&&(e=h(".main-header").find("> .navbar").width()),h(".navbar-custom-menu")&&0<h(".navbar-custom-menu").length&&(i=h(".navbar-custom-menu").outerWidth()),T.DirectionH?(h(".navbar-header")&&0<h(".navbar-header").length&&(n=h(".navbar-header").outerWidth()),h(T.NavEl).width(e-n-i-45)):(h(".sidebar-toggle")&&0<h(".sidebar-toggle").length&&(t=h(".sidebar-toggle").outerWidth()),h(f)&&0<h(f).length?h(T.NavEl).width(e-t-i-245):h(T.NavEl).width(e-t-i-45));var a=h(T.NavEl),o=h(".tabdrop",a);o&&o.length<=0&&(o=h('<li class="dropdown pull-right hide tabdrop tab-drop  nav-tabs-header"><a class="dropdown-toggle" data-toggle="dropdown" href="javascript:;"><i class="fa fa-align-justify"></i> <b class="caret"></b></a><ul class="dropdown-menu"></ul></li>'),T.DirectionH&&o.find("ul").addClass("no-radius"),o.prependTo(a)),a.parent().is(".tabs-below")&&o.addClass("dropup");var s=0,r=a.innerWidth()-62,l=0,d=a.append(o.find(T.DirectionH?p:u)).find(">li").not(".tabdrop"),c=0;d.each(function(){c+=h(this).outerWidth(!0)}),a.innerWidth()<c?(d.each(function(){l+=h(this).outerWidth(!0),r<l&&(T.DirectionH&&h(this).hasClass("dropdown")&&(h(this).on("mouseover",function(e){e.preventDefault(),h(this).addClass("open")}),h(this).on("mouseout",function(e){e.preventDefault(),h(this).removeClass("open")})),o.find(">ul").append(h(this)),s++)}),0<s&&(o.removeClass("hide"),1===o.find(".active").length?o.addClass("active"):o.removeClass("active"))):o.addClass("hide")}}(jQuery),function($){$.addtabs(),$.LanaiVideo(),$('[aria-controls="home"]').click(function(){var e=$('[data-widget="tree"]').data("lte.tree");e&&e.OnlyRemoveActive()});var locked=!!localStorage.getItem("modalLocked")&&eval(localStorage.getItem("modalLocked"));if(locked){var customerbox=new $.modal({content:{effect:"fadein",target:"#modal",fullscreen:!0,close:!1}});customerbox.open()}}(jQuery);